\documentclass[11pt]{article}

\usepackage[left=3cm, right=3cm, top=3cm, bottom=3cm]{geometry}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{ragged2e}
%crossed out elements
\usepackage{cancel}
\usepackage{amssymb}
%lightning symbol
\usepackage{wasysym}
%position tables
\usepackage{placeins}
%use right curly braces
%\usepackage{mathtools}
%place text under sigmas and pi
\usepackage{mathtools}
%kappa%
\newenvironment{rcurly}{\left.\begin{aligned}}{\end{aligned}\right\rbrace}

\begin{document}

\numberwithin{equation}{subsection}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{definition}[theorem]{Definition}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{lemma}[theorem]{Lemma}
%\newcommand{\R}{\mathbb{R}}
%\newcommand{\R}{\mathbb{Z}}
%\newcommand{\R}{\mathbb{C}}
%\begin{theorem}
%\begin{theorem}

\title{MATH7701 Number Theory}
\author{Vinesh Ramgi}
	%\date{}
	\maketitle


\newpage
	\begin{abstract}

		\centering{What did the number theorist say as he drowned?}\\[1em]
		Log, log, log, log....\\[2em]

		For an up to date version of this pdf, check my GitHub :)\\[0.5em]
https://github.com/vrvinny/number-theory

	\end{abstract}
\newpage
\tableofcontents{}
\newpage
	\section{Introduction/Review}
	\subsection{Introduction}
	Number Theory is the theory of the ring $\mathbb{Z}$ and other related rings. A ring (in this course) is a set $R$ with two binary operations $+$ and $*$ such that:
	\begin{itemize}
		\item ($R$, $+$) is an abelian group
		\item $*$ is associative, commutative and has an identity element $1$
		\item $x(y+z) = xy + xz \hspace{10pt} \forall x,y,z \in \mathbb{R} $

	\end{itemize}
Examples of rings:
	\begin{itemize}
		\item $\mathbb{Z}$ is a ring
		\item Every field is a ring, (e.g. $\mathbb{R}, \mathbb{C}, \mathbb{Q}$)
		\item $\mathbb{Z}/n$ \hspace{10pt} $\mathbb{Z}$ modulo $n$ = \{$0, \dots, n-1$\}
		\item $\mathbb{F}$[X] = \{ polynomials $f(x)$ with coefficients in $\mathbb{F}$


	\end{itemize}
	\subsection{Review}

	\subsubsection{Congruences}
	Let $n$ be a positive integer. Given $x,y \in \mathbb{Z}$, we say $x$ is congruentt to $y$ modulo $n$ if $x-y$ is a multiple of $n$.\\

	$x \equiv y (n)$  \hspace{10pt} or \hspace{10pt} $x \equiv y$ mod $n$\\[1em]
	\textbf{E.g} \hspace{10pt} $2 \equiv 12 \hspace{5pt} (10)$ \\
	 $ $ $ \hspace{500pt} \equiv -8 \hspace{5pt} (10)$\\[1em]
	We write $\mathbb{Z}/n$ for the ring of congruency classes modulo $n$, i.e. the elements are integer, with two of them regarded as the same if they are congruent modulo $n$.\\

	Since every integer is congruent to a unique integer in the set $\{0,\dots, n-1\}$, we have $\mathbb{Z}/n = \{0,\dots, n-1\}$.

	An element $x$ of $\mathbb{Z}/n $ is called "invertible" or a "unit" if $\exists y \in \mathbb{Z}/n$ such that $xy \equiv 1 (n)$.

	\begin{theorem}
$x$ is invertible modulo $n$ iff x and n are coprime
	\end{theorem}
	\textbf{Recall} Two numbers are coprime if their highest common factor is 1.

	Here's how we find the inverse of $x$ in $\mathbb{Z}/n$. Since $X$ and $n$ are coprime we can find $h, k \in \mathbb{Z}$ such that $hx+kn = 1 \implies hx = 1 \hspace{5pt} (n)$. So h is the inverse of $x$ modulo $n$.

	\begin{flushleft}
		\textbf{E.g} We'll find the inberse of 7 modulo 25 using Euclid's algorithm

		\begin{align*}
			25 &= 3\times7 + 4   &1=4-1(3) \hspace{15pt}\\
			7 &= 1\times4 + 3    &1= 4-1(7-1(4))&=2(4)-1(7)\\
			4&= 1\times3+1	     &1 = 2(25-3(7)) - 1(7) &= 2(25) - 7(7)
		\end{align*}

		\begin{align*}
			2(25) &- 7(7) = 1 \\
			&-7(7) = 1 \hspace{5pt}(25) \\
			\\(7^{-1}) &= -7= 18 \hspace{5pt} (25) \\
			7\times 18 &= 126 = 1 \hspace{5pt} (25) 
		\end{align*}
	\end{flushleft}

	We'll write $(\mathbb{Z}/n)^{\times}$ for the invertible elements in $\mathbb{Z}/n $\\
\begin{flushleft}
	%\begin{align*}
		\textbf{E.g} \\ $(\mathbb{Z}/3)^{\times}$ = \{ \cancel 0, 1, 2 \}\\ 
			$(\mathbb{Z}/6)^{\times}$ = \{ \cancel 0, 1, \cancel 2, \cancel 3, \cancel4, 5 \} 


	%\end{align*}
\end{flushleft}


\begin{theorem}
	$(\mathbb{Z}/n)^{\times}$ is a group with the operation of multiplicity.
\end{theorem}

	
	
	\subsubsection{Solving Linear Congruences}

Suppose we want to solve $ax\equiv b \hspace{5pt} (n)$ (given $a,b$ and $n$).

\begin{flushleft}
	\textbf{Case 1:} If $a$ is coprime to $n$ then we can find $a^{-1}$ modulo $n$ by Euclid's algorithm,\\ \hspace{40pt} $x \equiv a^{-1}b \hspace{5pt} (n) $


	\textbf{Case 2:} If $a$ is a factor of $n$, then there are two possibilities:\\
	\hspace{40pt} \textbf{2a)} if $a$ is also a factor of $b$ then $ax \equiv b$ \hspace{3pt} $(n)$ is equivalent to $x = \frac{b}{a} \hspace{10pt} (\frac{n}{a})$\\
	\hspace{40pt} \textbf{2b)} if $a$ is not a factor of $b$ then there are no solutions

\end{flushleft}
\newpage 
\begin{flushleft}
	\textbf{E.g.} Solve $5x = 11 \hspace{5pt} (13)$\\
	This is case 1 because 5 and 13 are coprime
	\begin{align*}
		13 &= 2\times5 + 3   &1=(3) -1(2) \\
		5 &= 1\times3 + 2 &1=(3) -1(5-1(3)) = 2(3) -(5)\\
		3 &= 1\times2 + 1 & 1 =2(13 -2(5)) - (5) = 2(13)-5(5) \\
	\end{align*}
	\begin{align*}
		1\equiv& -5(5) \hspace{10pt} (13)\\
		 5^{-1} \equiv& -5 \equiv 8\hspace{10pt} (13)\\
		 \\
		5x\equiv& 11 \hspace{10pt} (13)\\
		x \equiv 8 \times 11 \equiv& 88 \hspace{10pt} (13)\\
		\\
		x \equiv & 10 \hspace{10pt} (13)
	\end{align*}
\end{flushleft}

\begin{flushleft}
	\textbf{E.g.} Solve $7x \equiv 84 \hspace{10pt} (490)$\\
	
	\hspace{25pt} 7 is a factor of 490 so case 2)\\
	\hspace{25pt} 7 is a factor of 84 so case 2a) \\
	\vspace{5pt}
	\hspace{25pt} $7x \equiv 84 \hspace{10pt}(490)$\\
	\hspace{25pt} $x \equiv 12 \hspace{10pt} (70)$
\end{flushleft}

\begin{flushleft}
	\textbf{E.g.} Solve $7x \equiv 85 \hspace{10pt} (490)$\\
	\hspace{25pt} This is case 2b (7 is a factor of 490 but not of 85) $\therefore$ No solutions	    \\
	\vspace{5pt}
	\hspace{25pt} $7x \equiv 85 \hspace{10pt} (490)$\\
	$\implies \hspace{2pt}7x = 85 + 490y $ for some $y \in \mathbb{Z}$\\
	$\implies \hspace{2pt}0 \equiv 1 \hspace{10pt} (7) $
\end{flushleft}


\begin{flushleft}
	\textbf{E.g.} Solve $6x \equiv 3 \hspace{10pt} (21) $\\
	\hspace{22pt} This is neither case 1 nor case 2 but we can rewrite as: \\
	\vspace{5pt}
	\hspace{26pt}$3(2x) \equiv 3 \hspace{10pt} (21)$\\
	\vspace{5pt}
	\hspace{26pt}By case 2 we can solve for $2x \equiv 1 \hspace{10pt} (7) $\\
	\hspace{26pt}but now 2 is invertible modulo 7 so now solve by case 1\\
	\vspace{5pt} 
	\hspace{26pt} $\therefore x\equiv 4 \hspace{10pt} (7)$
\end{flushleft}

\subsection{Chinese Remainder Theorem}
Suppost we know the congruency class of $x$ modulo 10. Then we can work out its congruency class mod 2 and mod 5.\\
\textbf{E.g.} if $x \equiv 7 \hspace{5pt}(10)$, then $x \equiv 1 \hspace{5pt} (2) $ and $x \equiv 2 \hspace{5pt} (5) $  \vspace{5pt}\\
Then the Chinese Remainder Theorem allows us to do the opposite, i.e. if we know $x$ modulo 2 and modulo 5, then we can work out the value of $x$ modulo 10.\\
\newpage
Suppose $n$ \& $m$ are coprime positive integers, let $a \in (\mathbb{Z} / n)$ and $b \in (\mathbb{Z}/m)$ then there is a unique

\hspace{10pt} $x \in (\mathbb{Z}/nm)$ such that $x \equiv a \hspace{10pt} (n)$\\
\hspace*{136pt} $x \equiv b \hspace{10pt} (m)$ \\
\textbf{Proof of existence part:}\\
\vspace*{5pt}Since $n$ \& $m$ are coprime, we can find $h,k \in \mathbb{Z}$ such that $hn + km = 1$.\\
\vspace{5pt}Let $x = hnb + kma$\\
Check that this a solution to both congruences:
	\begin{align*}	
		\hspace{-15em} x &\equiv kma \hspace{10pt} (n) \\
		\hspace{-15em} x &\equiv (1-hn)a \hspace{10pt} (n) \\
		\hspace{-15em} x &\equiv (1)a \hspace{10pt} (n)\\ 
		\hspace{-15em} x &\equiv a \hspace{10pt}(n) 
	\end{align*}
\vspace{5pt}Similarly, this holds for $x \equiv b \hspace{10pt} (m)$.\\
\textbf{E.g.} Solve the simultaneous congruence:
\begin{flushleft}
	\hspace{10pt} $x \equiv 3 \hspace{10pt} (8)$\\
	\hspace{10pt} $x \equiv 4 \hspace{10pt} (5)$
\end{flushleft}
By the Chinese Remainder Theorem, there is unique solution modulo 40. To find the solution we let $x = hnb + kma $. \\ First find $h,k$ by Euclid's algorithm.
	\begin{align*}
		8 &= 1\times5 + 3   &1=(3) -1(2) \\
		5 &= 1\times3 + 2 &1=(3) -1(5-1(3)) = 2(3) -(5)\\
		3 &= 1\times2 + 1 & 1 =2(8 -2(5)) - (5) = 2(8)-5(5) \\
	\end{align*}
	\begin{align*}
		\hspace{-15em}\therefore x &= (2*8*4) - (3*5*3)\\
		\hspace{-15em} x &= 64 - 45 \\ 
		\hspace{-15em} \implies x &\equiv 19 \hspace{10pt} (40) 
	\end{align*}

Remark: We can use the Chinese Remainder Theorem to solvoe a congruence modulo $nm$, by first solving mod $n$ and then mod $m$ and then combining the results.\\
\textbf{E.g.} Solve $x^{2} \equiv 2 \hspace{5pt} (119)$. Note 119 = 7 * 17.\\
By CRT this is equivalent to:
\begin{align*}
	x^{2} & \equiv 2 \hspace{10pt}(7)  & \implies  x&\equiv \pm3 \hspace{10pt} (7)\\
	x^{2} & \equiv 2 \hspace{10pt} (17) & \implies x&\equiv \pm6 \hspace{10pt} (17)
\end{align*}

Now we combine the solutions:
\begin{align*}
	17 & = 2*7+3  &1=&(7) - 2(3)\\
	7 &= 2*3+1   &1 =&(7) - 2(17-2(7))\\
	& &  1=&5(7) -2(17)
\end{align*}
Since 
\begin{align*}
	x &\equiv \pm 3\hspace{10pt}(7)  \hspace{50pt}\text{We get } x \equiv 5*7*(\pm 6) - 2*17*(\pm 3) \\
	x &\equiv \pm 6 \hspace{10pt} (17) \hspace{81pt} x \equiv \pm 11 \text{  or} \pm 45 \hspace{10pt} (119) 
\end{align*}

\subsection{Prime numbers}

\begin{definition}
An integer $p\geq 2 $ is a prime number if the only factors of $p$ are $\pm 1, \pm p$
\end{definition}

We'll write $\mathbb{F}_p$ for $\mathbb{Z}/p$. This is because:
\begin{theorem}
	If p is prime, then $\mathbb{F}_p$ is a field 
\end{theorem}

\begin{proof}
	Need to check that the non-zero elements of $\mathbb{F}_p$ all have inverses.\\
	
	Let $x \in \mathbb{F}_p$ with $x \not \equiv 0 \hspace{7pt}(p)$ i.e. $x$ is not a multiple of $p$\\
	
	$\therefore$ hcf($x,p$) $=1$\\
	
	$\therefore x$ \& $p$ coprime
\end{proof}
\subsection{Fermat's Little Theorem}
\begin{theorem}
	Let $p$ be a prime number. If $x$ is not a multiple of $p$ then $x^{p-1} \equiv 1 \hspace{7pt} (p)$
\end{theorem}

\begin{proof}
	$x \in \mathbb{F}_{p}^{x} = \{1,2,\dots, p-1\}$ a group with $p-1$ elements.

	Let $n$ be the order of $x$ in this group. 
	
	(order of $x$ is smallest $n>0$ such that $x^{n} \equiv 1 \hspace{7pt} (p) )$

	By corollary to Lagrange's Theorem, $p-1$ is a multiple of $n$\\

	$x^n \equiv 1\hspace{7pt} (p) $

	$x^{p-1} \equiv 1 \hspace{7pt} (p)$
\end{proof}
\begin{theorem}
Lagrange's Theorem: If $H$ is a subgroup of a finite group $G$, then $|H|$ is a factor of $|G|$.
\end{theorem}

\begin{corollary}
Order of an element is a factor of $|G|$
\end{corollary}
We can use Fermat's Little Theorem to do calculations.\\
\textbf{E.g.} Calculate $10^{100}$ modulo $19$\\

By Fermat's Little Theorem: $10^{18} \equiv 1 \hspace{7pt} (19)$ 

\begin{align*}
	10^{100} &\equiv  (10^{18})^{5} * 10^{10} \hspace{7pt} (19)\\
	& \equiv  100^{5}\hspace{7pt} (19)\\
	& \equiv  5^5\hspace{7pt} (19) \\
	& \equiv 25 * 125 \equiv 6*11 \equiv 9 \hspace{7pt} (19) 
\end{align*}

Also using Fermat's Little Theorem we can solve congruence of the form $x^a \equiv b\hspace{7pt} (p) $ as long as $p$ prime and $a$ inverible modulo $p-1$

\subsubsection{General method to solve $x^a \equiv b\hspace{7pt} (p)$}


Let
\begin{align*} 
c = a^{-1}\hspace{7pt} (p-1)\\
	ac = 1+ (p-1)r
\end{align*}
Raise both sides of the congruence to power $c$:
\begin{align*}
	\therefore x^{ac}  &\equiv b^{c}\hspace{7pt} (p)\\
	 x^{1+(p-1)r} &\equiv b^{c}\hspace{7pt}(p)\\
	 x &\equiv b^{c}
\end{align*}
So the solution is $x \equiv b^c\hspace{7pt} (p)$\\
\textbf{E.g.} Solve $x^5 \equiv 2\hspace{7pt} (19) $

19 is prime and 5 is coprime to 18.

Find $c = 5^{-1} $ mod $ 18$

\begin{align*}
	18 =& 3*5 +3& 1=& 2*3 - 5&\\
	5 =& 2*3 - 1 & 1=&2(18-3*5) - 5&\\
	& & 1=&2*18 - 7*5&\\
	\\
	&&\therefore 5^{-1} &\equiv -7\hspace{7pt} (18)\\
	&&&\equiv 11\hspace{7pt} (18)\\ 
	\therefore x &\equiv 2^{11}\hspace{7pt} (19)\\
	& \equiv 2048 \hspace{7pt}(19)\\
	& \equiv 15\hspace{7pt} (19)
\end{align*}

\subsection{Fundamental Theorem of Arithmetic}
If $n$ is a positive integer then there is a unique factorisation, $n= p_1p_2\dots p_r$ with $p_i$ prime. "Unique" means up to reordering the primes $p_1$,$\dots$, $p_r$.
Showing that a factorisation exists is easy. For the uniqueness part we use:

\subsubsection{Euclid's Lemma}

\begin{lemma}
Suppose $p$ prime, and $p | ab$. Then $p| a$ or $p|b$.
\end{lemma}
To prove Euclid's lemma we use Bezout's lemma.
\begin{proof}
	Assume $p|ab$ but $p\not|\hspace{5pt}a $. Then hcf($a,p$) = 1
	
	By Bezout's lemma, $\exists h,k $ such that:
	
	$1 =ha + kp$ 

	$b = hab + kpb$\hspace{50pt} Both $hab$ and $kpb$ are multiples of p. \\$\therefore p | b$
\end{proof}

\subsubsection{Checking whether a number is prime}
If $n$ is composite then the smallest factor of $n$ is (apart from 1) is a prime number $p\leq \sqrt{n}$, i.e. to show that $n$ is prime, we just need to show that none of the primes up to $\sqrt{n}$ are factors of n.\\
\textbf{E.g.} Is 199 prime? 

$\sqrt{199} < 15$ since $15^2 = 225$\\
The primes up to 15 are $\cancel 2,\cancel 3,\cancel 5,\cancel 7,\cancel 11,\cancel 13$\hspace{20pt} 199 $\equiv$ 3\hspace{7pt} (7)

\hspace{190pt} 199 $\equiv $ 4\hspace{7pt} (13) 

\hspace{190pt} $\therefore$ 199 is prime

\begin{theorem}
There are infinitely many primes
\end{theorem}

\begin{proof}
Suppose $p_1, \dots, p_n$ are all the primes.

	\hspace{18pt}Let $N = p_1\dots p_n + 1$

	\hspace{18pt}$\therefore N$ has no prime factors \lightning 
\end{proof}
\flushleft{}
Similarly there are infinitely many primes $p \equiv 2 \hspace{7pt} (3)$
\begin{proof}
Assume there are only finitely many primes, call them $p_1,p_2,\dots,p_r$. All other primes\\ 
	\hspace{31pt}	are either 3 or are congruent to 1 mod 3.
	
	\hspace{35pt}Let $N=3p\dots p_{r-1}$. Since $3 \not | \hspace{5pt}N$ and $p_i \not |\hspace{5pt} N $ then all the prime factor of $N$ are 
	
	\hspace{35pt}congruent to 1 mod 3.


	\hspace{35pt}$\therefore N \equiv 1\hspace{7pt} (3) \implies$ because clearly $N \equiv 2\hspace{7pt} (3)$ 
\end{proof}


\newpage
\section{Elementary Number Theory}

\subsection{Euler Totient Function}
Recall $(\mathbb{Z}/n)^\times$ is the group of invertible elements in $\mathbb{Z}/n$.

\textbf{E.g.} $(\mathbb{Z}/6)^\times = \{ 1,6\} $

\hspace{23pt} $(\mathbb{Z}/8)^\times = \{1,3,5,7\}$

These are groups with the multiplication operation, * . The multiplication table for $(\mathbb{Z}/8)^\times$ is given below. 

\centering
	\begin{tabular}{l|llll}
		* & \multicolumn{1}{l}{1} 
		 & \multicolumn{1}{l}{3} 
		 & \multicolumn{1}{l}{5} 
		 & \multicolumn{1}{l}{7} \\ \hline
		1 & 1 & 3 & 5 & 7 \\
		3 & 3 & 1 & 7 & 5 \\
		5 & 5 & 7 & 1 & 3 \\ 
		7 & 7 & 5 & 3 & 1 \\ 
	\end{tabular}


\begin{definition}
	The Euler Totient function is $\phi(n) = |(\mathbb{Z}/n)^\times | $
\end{definition}
\raggedright
\begin{align*}	
	\textbf{E.g.} \hspace{10pt}\phi(6) &= 2 &\hspace{200pt}\\
	  \phi(8) &= 4 &\hspace{400pt}
\end{align*}
If $p$ prime then $(\mathbb{Z}/p)^\times = \{1, \dots, p-1 \}$ so  $\phi(p) = p-1$

\begin{theorem}
	Euler's Theorem- Let $x \in (\mathbb{Z}/n)^\times$ then $x^{\phi(n)} \equiv 1\hspace{7pt} (n) $ 
\end{theorem}
In the case $n=p$ is prime, this is just Fermat's Little Theorem.



\begin{proof}
	Let $d$ be the order of $x$, i.e. $x^{d} \equiv 1 \hspace{7pt} (n) $.
	By a corollary to Lagrange's Theorem, $d$ is a factor of $\phi(n) \implies x^{\phi (n)} \equiv 1 \hspace{7pt} (n)$ 
\end{proof}
We can use Euler's theorem to solve congruences and calculate powers mod $n$. To use the theorem, we need a quick way of calculating $\phi(n) $.

\begin{lemma}
	Let $n=p^a$ where $p$ is prime $a>0$. Then $\phi(n) = (p-1)p^{a-1}$
\end{lemma}
\textbf{E.g.} $\phi(8) = \phi(2^3) = (2-1)2^{3-1} = 4$
\begin{proof}
An integer is coprime to $p^a$ as long as it's not a multiple of $p$.\\
	$\therefore $ The elements of $\mathbb{Z}/p^a$ which are not invertible are the multiples of $p$. $0, p, 2p, \dots, p^a - p$.\\
	There are $p^a-1$ of these:\vspace{10pt}\\
	$\therefore |(\mathbb{Z}/p^a)^\times| = p^a - p^{a-1} = (p-1)p^{a-1}$
\end{proof}


\begin{theorem}
	Let $n$ and $m$ be coprime. Then there is an isomorphism:
	\begin{equation*}
		(\mathbb{Z}/nm)^\times \cong (\mathbb{Z}/n)^\times * (\mathbb{Z}/m)^\times
	\end{equation*}
\end{theorem}
We'll use the theorem before we prove it.\\

\textbf{Remark}: If $G$ and $H$ are groups, $G\times H  = \{ (x,y): x \in G, y \in H \}$, then $G\times H$ is a group with the operation , $(x, y)(x',y') = (xx',yy')$ and $G \times H$ is the "direct product" of $G$ and $H$ 
\begin{corollary}
	If $n$ and $m$ are coprime then $\phi(nm) = \phi(n)\phi(m)$
\end{corollary}
\begin{proof}
	\begin{align*}
		\phi(nm) = | (\mathbb{Z}/n)^\times | &= |(\mathbb{Z}/n)^\times * (\mathbb{Z}/m)^\times |\\
		&= |(\mathbb{Z}/n)^\times| * |(\mathbb{Z}/m)^\times|\\
		&= \phi(n) \phi(m)
	\end{align*}
\end{proof}
\begin{corollary}
	(Corollary of the corollary): Suppose $n = p_{1}^{a_1} \dots p_{r}^{a_r}$ with $p_1, \dots p_r$ distinct primes and $a_i > 0 $. Then 
	\begin{equation*}
		\phi(n) = (p_1 - 1)p^{a_1 - 1} \hspace{2pt}* \dots *\hspace{2pt} (p_r - 1)p_{r}^{a_r -1} 
	\end{equation*}
\end{corollary}

\begin{proof}
	Since $p_1^{a_1}, \dots, p_r^{a_r}$ are coprime,\\
	\begin{align*}
		\phi(n) & = \phi(p_1^{a_1}) \dots \phi(p_r^{a_r})&\text{by the corollary}\\
		& = (p_1 - 1)p_1^{a_1 - 1} \dots (p_r -1)p_r^{a_r-1} &\text{by the lemma} 
	\end{align*}
\end{proof}

\textbf{E.g.} Calculate $\phi(200)$
\begin{align*}
	\phi(200) &= \phi(2^3 * 5^2) &\hspace{300pt}\\
	&= (2-1)2^{3-1} * (5-1)5^{2-1}\\
	& = 4*4*5\\
	& = 80
\end{align*}

\begin{theorem}
	Suppose $n$ and $m$ are coprime, then $(\mathbb{Z}/nm)^\times \cong (\mathbb{Z}/n)^\times * (\mathbb{Z}/m)^\times$\\
	The isomorphism is the map $x \mapsto (x \mod n, x \mod m)$
\end{theorem}

\textbf{E.g.} $n=4 $, $m=5$ 
\begin{align*}
	(\mathbb{Z}/4)^\times &= \{1,3\}\\
	(\mathbb{Z}/5)^\times &= \{1,2,3,4\}\\
	\therefore (\mathbb{Z}/4)^\times * (\mathbb{Z}/5)^\times &= \{ (1,1), (1,2), (1,3), (1,4),\\
	&\hspace{20pt} (3,1), (3,2), (3,3), (3,4)\}\\
	(\mathbb{Z}/20)^\times &= \{1,3,7,9,11,13,17,19\}
\end{align*}
The isomorphism is: 
\begin{align*}
	1&\mapsto(1,1)  &11\mapsto(3,1)\\
	3&\mapsto(3,3)  &13\mapsto(1,3)\\
	7&\mapsto(3,2)  &17\mapsto(1,2)\\
	9&\mapsto(1,4)  &19\mapsto(3,4)
\end{align*}

\begin{proof}
	Let $\Phi: \mathbb{Z}/nm \mapsto \mathbb{Z}/n * \mathbb{Z}/m$\\
	\hspace{30pt} $\Phi(x) = (x\mod n, x \mod m)$ \\
	\hspace{30pt} This is a bijection by the Chinese Remainder Theorem.\\
	\hspace{30pt} We'll next show that $x$ is invertible mod $nm \iff x$ is invertible mod $n$ and mod $m$
	$(\implies)$ Suppose $x$ is invertible mod $nm$ 
	%\vspace{10pt}
	\begin{align*}
		\text{Let } xy &\equiv 1\hspace{7pt}(nm) \hspace{285pt}\\
		\therefore xy & \equiv 1\hspace{7pt} (n)\\
		xy &\equiv 1 \hspace{7pt} (m)
	\end{align*}
	\hspace{34pt} $\therefore x$ invertible mod $n$ and $m$ 

	$(\impliedby) $ Suppose $x$ invertible mod $n$ and $m$
	\begin{align*}
		xa &\equiv 1\hspace{7pt} (n)\\
		xb &\equiv 1\hspace{7pt} (n)\hspace{270pt}
	\end{align*}
	\hspace{36pt}By the Chinese Remainder Theorem, $\exists y$ such that $y \equiv a\hspace{7pt} (n)$\\ 
	$\hspace{281pt} y \equiv b \hspace{7pt} (m)$
\begin{equation*}
\begin{rcurly}
	\therefore xy &\equiv xa \equiv 1\hspace{7pt} (n)\\
	&\equiv xb \equiv 1  \hspace{7pt} (m) \\
\end{rcurly}
	\implies xy \equiv 1 \hspace{7pt}  (nm) \text{    by the Chinese Remainder Theorem} 
\end{equation*}
	We've shown that $\Phi$ gives a bijection between $(\mathbb{Z}/nm)^\times$ and $(\mathbb{Z}/n)^\times$ * $(\mathbb{Z}/m)^\times$. We'll next check that $\Phi (xy) = \Phi (x) \Phi (y)$.\\
	\begin{align*}
		\Phi(xy) &= (xy \mod n, xy \mod m)\\
		& =(x \mod n , x \mod m) * (y \mod n, y \mod m)\\
		&= \Phi (x) \Phi(y)
	\end{align*}
\end{proof}
\subsection{Euler's Theorem}
If $x \in (\mathbb{Z}/n)^\times $ then $x^{\phi{(n)}} \equiv 1\hspace{7pt} (n) $ and $	\phi(p_1^{a_1} \dots p_r^{a_r}) = (p_1-1) p^{a_1 -1} \dots (p_r-1)p_r^{a_r-1}$\\ \vspace{7pt}
\textbf{E.g.} Calculate $7^{135246872002} \mod 10000$ 
\begin{align*}
	&7 \text{ coprime to  10000 so } 7^{\phi(10000)} \equiv 1\hspace{7pt} (10000) \hspace{180pt}\\
	& 10000 = 2^4 *5^4\\
	\therefore &\phi(10000) = (2-1)2^3 * (5-1)*5^3 = 8*500\\
	&7^{4000} \equiv 1 \hspace{7pt}(10000) \implies 7^n \text{ depends only on } n \text{ mod 4000}\\
	&135246872002 \equiv 2 (4000)\\
	\therefore& 7^{135246872002} \equiv 7^2 \equiv 49\hspace{7pt} (10000)
\end{align*}
We can also use Euler's THeorem to solve congruence with powers
\newpage
\subsubsection{Solving equations of the form $x^{a} \equiv b \hspace{7pt} (n)$}


Supose we want to solve $x^a \equiv b\hspace{7pt} (n)$ where $b$ is coprime to $ n$ and $a$ is coprime to $\phi(n)$. Clearly any solution $x$ must be coprime to $n$ by Euler's Theorem $x^{\phi(n)} \equiv 1\hspace{7pt} (n)$.\\
$\therefore$ The congruency class of $x^y \mod n $ depends only $y \mod \phi(n)$ \\ \vspace{7pt}

Let 

\begin{equation*}
	c =a^{-1} \mod \phi(n)
\end{equation*}
Raise both sides of the congruence to power $c$:
\begin{equation*}
	x^{ac} \equiv x^1 \equiv b^c\hspace{7pt} (n) 
\end{equation*}
$\therefore $ The solution is $x \equiv b^c \hspace{7pt} (n)$
\\[1em]


\textbf{E.g.} $x^7 \equiv 3\hspace{7pt}(50) $ 
\\3 is coprime to 50,
\begin{align*}
	50 &= 2*5^2 \\ \implies \phi(50) &= 1*4*5 = 20
\end{align*}
7 is coprime to $\phi(50)$. To solve, we need to find
\begin{align*}
	c &\equiv 7^{-1} \mod \phi(50)\\
	&\equiv 3 \hspace{7pt} (20) \\[1em]
	x &\equiv 3^3 \equiv 27\hspace{7pt} (50) 
\end{align*}


\textbf{E.g.} $x^{27} \equiv 5\hspace{7pt} (123)$\\
5 is coprime to 123,

\begin{align*}
	123 &= 3*41\\
	\implies \phi(123) &= 2*40 = 80
\end{align*}
27 is coprime to 80

To solve, we find $27^{-1} \mod 80$ 
\begin{align*}
	80 &= 3*27 - 1\\
	\implies 1 &= 3*27 - 80 \\[1em]
	27^{-1} &= 3\\[1em]
	x &= 5^3\\
	x &= 125 \equiv 2\hspace{7pt} (123)
\end{align*}

\subsection{Primitive roots}
Recall, let $G$ be a finite group. $G$ is called a cyclic group if $\exists x \in G$ such that, every element in $G$ has the form $x^n$ for some $n \in \mathbb{Z}$, i.e. $G = \{ 1,x,x^2, \dots , x^{n-1}\}$ where $n$ is the order of $x$, equivalentl the order of $x$ is $|G|$. The element $x$ is called a generator of $G$.

\begin{theorem}
	(Gauss' Theorem), For ever prime number $p$, the group $\mathbb{F}^{\times}_{p}$ is cyclic
\end{theorem}
\begin{definition}
	A generator of $\mathbb{F}^{\times}_p$ is called a primitive root. Equivalently, this is an element of order $p-1$
\end{definition}
\textbf{E.g.} $p=7, x=3$ We'll see that 3 is a primitive root modulo 7
\begin{align*}
	\text{Powers of 3 in }F^{\times}_7: && 3^0 =1 && 3^3 \equiv 6 \hspace{7pt}(7) && 3^6 \equiv 1\hspace{7pt} (7)\\
	&& 3^1= 3 && 3^4 \equiv 4 \hspace{7pt}(7) \\
	&& 3^2 \equiv 2\hspace{7pt} (7) &&3^5 \equiv 1 \hspace{7pt} (7)
\end{align*}
so 3 is a primitive root modulo 7.
There is a quicker way to check whether $x$ is a primitive root.

\begin{proposition}
	Let $x \in \mathbb{F}^{\times}_p$, then $x$ is a primitive root modulo $p$ if and only if for every prime factor $q$ of $p-1$:
	\begin{equation*}
		x^{\frac{p-1}{q}} \neq 1\hspace{7pt} (p)
	\end{equation*}
\end{proposition}

\begin{proof}
Assume the second statement is false, so $\exists$ prime factor $q$ of $p-1$ such that:
	\begin{align*}
		&x^{\frac{p-1}{q}} \equiv 1\hspace{7pt} (p) \hspace{0pt} &\therefore \text{order of } x \leq \frac{p-1}{q} < p-1\\
&& \therefore x \text{ is not a primitive root}
	\end{align*}
Conversely, assume $x$ is not a primitive root, so $x$ doe not have order $p-1$. But the order of $x$ is a factor of $p-1$.\\
Suppose the order of $x$ is $\frac{p-1}{d}$, $d>1$.\\

Let $q$ be a prime factor of $d  \implies q | p-1$ \\

	$\frac{p-1}{q}$ is a multiple of $\frac{p-1}{d}$ but $x^{\frac{p-1}{q}} \equiv 1\hspace{7pt} (p) \implies x^{\frac{p-1}{q}} \equiv 1 \hspace{7pt} (p)$

\end{proof}

\textbf{E.g.} $p=29$\\
By the proposition $x$ is a primitive root mod 29 $\iff x^{28/2} \not \equiv 1\hspace{7pt} (29)$ and \\
\hspace{259pt} $x^{28/7} \not \equiv 1 \hspace{7pt} (29)$\\[1em]

\hspace{230pt} $\iff x^{14} \not \equiv 1 \hspace{7pt} (29) $ and\\
\hspace{259pt} $x^4 \not \equiv 1\hspace{7pt} (29)$ 


\begin{align*}
	\text{Try }x=2: &&2^4 &\equiv 16 \not \equiv 1\hspace{7pt} (29)  \\
	&& 2^{14} &\equiv 128^2 \equiv 12^2 \equiv 144 \equiv -1 \hspace{7pt} (29)\\
	\therefore 2 \text{ is a primitive root mod 29}
\end{align*}

Another trick to speed up the calculation:\\
$\mathbb{F}_p$ is a field $\therefore$ every polynomimal of $d$ has no more than $d$ in $\mathbb{F}$ (proved in 2201).\\
\hspace{55pt} $\therefore$ if $x^2 \equiv 1 \hspace{7pt} (p)$ then $x \equiv \pm 1 \hspace{7pt} (p)$
\\[1em]  


This means that checking whether $x^{14} \equiv 1 \hspace{7pt}(29)$ is equivalent to checking whether $x^7 \equiv \pm 1 \hspace{7pt} (29)$.
\\[1em]

\textbf{E.g} 3 is also a primitive root modulo 29

\begin{align*}
	3^2& \equiv 9 \not \equiv \pm 1 \hspace{7pt} (29) &&&&&&&&&\\
	3^4& \equiv 1 \hspace{7pt} (29)\\[1em]
	3^7& \equiv 27^2 * 3 \hspace{7pt} (29)\\
	&\equiv (-2)^2 * 3 \equiv 12 \hspace{7pt} (29)\\
	&\equiv \pm 1 \hspace{7pt}(29) \\[1em]
	&\therefore 3^{14} \not \equiv 1 \hspace{7pt} (29)
\end{align*}

\subsection{Roots of unity and Cyclotomic Polynomials}
A complex number $\zeta$ is called an $n^{th}$ root of unity if $\zeta ^n = 1$. The $n^{th}$ roots of unity are $e^{2\pi i \frac{a}{n}}$ for $a = \{0, 1, \dots, n-1\} $\\
We call $\zeta$ a primitive $n^{th}$ root of unity if $n$ smaller power than $\zeta^n$ is equal to 1, i.e. $\zeta$ has order $n$ in $\mathbb{C}^\times$ if $\zeta$ is not a primitive $n^{th}$ root of unity $\zeta = e^{2\pi i \frac{b}{d}}$ where $b = \{0,\dots, d-1\}$ for $d<n$\\
$\therefore \frac{a}{n} = \frac{b}{d}$\\[1em]
The cancellation happens when $a$ is not coprime to $n$. This shows that the primitive $n^{th}$ of unity are $e^{2\pi i \frac{a}{n}}$, $a \in (\mathbb{Z}/n)^\times$.

\begin{corollary}
	There are exactly $\phi(n)$ primitive $n^{th}$ roots of unity
\end{corollary}
We'll actually prove a more precise version of Gauss' Theorem.
\begin{theorem}
	For every factor $d$ of $p^{-1}$ there are $\phi(d)$ elements in $\mathbb{F}^{\times}_{p}$ of order d.
\end{theorem}
\begin{definition}
	The $n^{th}$ cyclotomic polynomial is:
	\begin{equation*}
		\Phi_{n} (x) = \Pi_{\substack{\text{primtive }\\ n^{th} \text{roots}\\ \text{of unity } \zeta }  }(X- \zeta)  
	\end{equation*}
	i.e $\zeta ^n = 1 $ and no smaller power of $\zeta$ is 1, $\zeta = e^{2 \pi i \frac{a}{n} }, a \in (\mathbb{Z}/n)^\times$
\end{definition}
This has degree $\phi(n)$.\\[1em]
\newpage{}
\textbf{E.g.} n=4\\
Primitive  $4^{th}$ roots of unity are $i,-i$:
\begin{align*}
	\Phi_4(x) &= (x-i)(x-(-i))&&&&&&\\
	&= x^2 + 1
\end{align*}

\begin{lemma}
	For every $n>0$:
	\begin{equation*}
		x^n - 1 = \Pi_{\substack{\text{factors}\\ d \text{ of } n }} \Phi_{d} (x)
	\end{equation*}
\end{lemma}
\textbf{E.g.} Calculate $\Phi_6 (x)$


\begin{align*}
	\text{By the lemma} &&&& x^6 -1 &= \Phi_1 \Phi_2 \Phi_3 \Phi_6 &&&& x^6-1 = (x^3 - 1) \Phi_2 \Phi_6 \\
	&&&& x^3 -1 &= \Phi_1 \Phi_3 
\end{align*}
\begin{align*}
	\therefore \Phi_6 = \frac{x^6-1}{(x^3-1(x+1)} = \frac{x^3+1}{x+1} =x^2-x+1
\end{align*}
Let $p$ be a prime number. A primitive root mod $p$ is an $x \in \mathbb{F}_p^{\times}$, such that $x$ generates $\mathbb{F}^\times_p$. Equivalently order = $p-1$

\subsubsection{How to calculate $\Phi_n(x)$}
\begin{lemma}
	$x^n - 1 = \Pi_{\substack{d|n}} \Phi_d(x)$ 
\end{lemma}

\textbf{E.g.} $n=4$
\begin{align*}
	x^4-1 &= \Phi_1 \Phi_2 \Phi_4 && && \Phi_1 = x-1\\
	&&&&& \Phi_2 = (x-(-1)) = x+1\\
	&&&&& \Phi_4 = (x-i)(x-(-i))= x^2+1\\
	& =(x-1)(x+1)(x^2+1)
\end{align*}

\begin{proof}
	\begin{equation*}
x^n - 1 = \Pi_{\substack{\\\zeta \text{ is an }\\ n^{th} \text{ root of}\\ \text{unity}}} (x- \zeta)
	\end{equation*}
		
		but every $n^{th}$ root of unity is a primitive $d^{th}$ root of unity for some $d|n$.\\
	\begin{equation*}
		x^{n} = \Pi_{\substack{d|n} } (\Pi_{\substack{\text{primitive} \\d^{th} \text{roots} \\ \text{of unity} }}  (x-\zeta) )= \Pi_{d|n} \Phi_x (x)
	\end{equation*}
\end{proof}
\newpage
\textbf{E.g.} Calculate $\Phi_5(x)$
\begin{align*}
	x^5-1  &= \Phi_1(x) \Phi_5(x) &&&&\\
	&=(x-1) \Phi_5(x)\\[1em]
	\Phi_5(x) &= \frac{x^5-1}{x-1} = 1+x+x^2+x^3+x^4 
\end{align*}
More generally if $p$ prime then $x^p-1 = (x-1) \Phi_p(x) \implies \Phi_p(x) = 1+x+\dots +x^{p-1}$

\textbf{E.g.} Calculate $\Phi_8(x)$
\begin{align*}
	x^8-1 &= \Phi_1(x) \Phi_2(x) \Phi_4(x) \Phi_8(x) &&&&&\\[1em]
	x^4-1 &= \Phi_1(x) \Phi_2(x) \Phi_4(x) \implies \Phi_8(x) = \frac{x^8-1}{x^4-1} = x^4+1 
\end{align*} 

\begin{corollary}
	$\Phi_n(x)$ has coefficients in $\mathbb{Z}$
\end{corollary}

\begin{proof}
	$\Phi_n(x)$ = \LARGE{$\frac{x^n-1}{\Pi_{\substack{d|n \\ d\neq n}}\Phi_d(x) }$}\\[0.5em]
	\normalsize
We'll prove the corollary by induction on $n$, clearly true when $n=1$. Assume $\Phi_d$ has integer coefficients $\forall d<n$.

It is proved in Algebra 3 (MATH2201) that, if $f,g \in \mathbb{Z}[X] $ and $g$ monic then $f=qg+r$ where $deg(r) < deg(g)$ and $g,r \in \mathbb{Z}[x]$. \\
Using this, we get that the denominator $\Pi_{\substack{ d|n \\ d \neq n}} \Phi_d (x) $ is a monic polynomial with coefficients in $\mathbb{Z} \implies \Phi_n \in \mathbb{Z}[X].$
\end{proof}

\subsubsection{Gauss' Theorem}
\begin{theorem}
	Let $n$ be a factor of $p-1$, where $p$ is prime. Then there are exactly $\phi(n)$ elements of order $n$ in $\mathbb{F}^\times_p$. These are the roots of $\Phi $ in $\mathbb{F}^\times_p$. In particular there are $\phi(p-1)$ primitive roots.
\end{theorem}

\begin{proof}
	Let $f(x) = x^{p-1} -1$\\
	By Fermat's Little theorem, $f(x) = 0 \hspace{7pt} (p) $ for $x=1,\dots, p-1 $ for $(x\neq 0)$ 
	\begin{align*}
		\therefore f(x) &= (x-1)(x-2)\dots (x-(p-1)) &&&&&&&&&&&&&&&&&&&\\
		&= \Pi_{\substack{n|p-1}} \Phi_n (x)
	\end{align*}
	This implies that:
	\begin{itemize}
		\item{Each $\Phi_n $ (for $n|p-1$) factorises completely into linear factors with no repeated roots\\ $\therefore \Phi_n $ has $\phi(n)$ roots in $\mathbb{F}_p$  }
		\item{Every element of $\mathbb{F}^\times_p$ is a root of exactly one of the polynomials $\Phi_n$ with $n|p-1$ } 
	\end{itemize}
	It remains to show that the roots of $\Phi_n(x)$ in $\mathbb{F}_p$ has order of exactly $n$.\\
	Suppose $\Phi_n(x) \equiv 0 \hspace{7pt}(p)$\\[1em]
	By the lemma $\Phi_n(x)$ is a factor $x^n -1$ \\
	\hspace{140pt} $\therefore x^n - 1 \equiv 0 \hspace{7pt}(p)$\\
	\hspace{140pt} $\therefore x^n \equiv 1 \hspace{7pt} (p)$\\[1em]
	Suppose $x^m \equiv 1 \hspace{7pt} (p) $ for some $m|n$, $m<n$\\[0.5em]
	\hspace{12pt} $\implies x^m - 1 \equiv 0 \hspace{7pt} (p)$\\[1em]

	By the lemma $\Pi_{\substack{d|m}}\Phi_d(x) \equiv 0 \hspace{7pt} (p)$\\[0.5em]
	\hspace{41pt} $\implies \Phi_d(x) \equiv 0\hspace{7pt} (p)$ for some $d$ \hspace{7pt}\lightning \\
We already know that $x$ is only a root of 1 of the cyclotomic polynomials, therefore $x$ has order $n$. 
\end{proof}


\subsection{Quadratic reciprocity (Quadratic equations modulo prime numbers)}
Recall we can solve $x^a \equiv b\hspace{7pt} (p)$ as long as $a$ is coprime to $p-1$. This won't work if $a=2$ because $a$ will not be invertible mod $p-1$. An easier question to ask is, which quadratic equations have solutions modulo $p$?\\
\textbf{E.g.} Does $x^2 \equiv 37 \hspace{7pt} (149)$ have solutions?\\[1em]

Notation: We always let $p$ be an odd prime (i.e. $p\neq 2$)\\[0.5em]

An element $a \in \mathbb{F}^\times_p $ is a quadratic residue if $x^2 \equiv a \hspace{7pt} (p)$ has solutions.

An element $a \in \mathbb{F}^\times_p $ is a quadratic non-residue if there are no solutions. \\[1em]
The quadratic residue symbol is defined for $a \in \mathbb{F}^\times_p$ by

\begin{equation*}
(\frac{a}{p}) =
\begin{cases}
		1 \hspace{11pt} \text{ a quadratic residue}\\
		-1 \hspace{7pt} \text{a quadratic non-residue}
\end{cases}
\end{equation*}

\begin{lemma}
	Let $g$ be a primitive root modulo $p$ ($p$ odd prime). Then $g^r$ is a quadratic residue iff $r$ even.
\end{lemma}

\begin{proof}
	\begin{align*}
		(\impliedby)& \text{Assume }r \text{ even} &&&&&(\implies) &\text{Assume }g^r\equiv x^2 \hspace{7pt} (p)\\
		&\text{Clearly } g^r \text{ is a square in } \mathbb{F}^\times_p &&&&&& x\equiv g^s \hspace{7pt} (p) \hspace{15pt} (s \in \mathbb{Z}) \text{ since } g \text{ primitive roots}\\
		&\text{So }g^r \text{ is a quadratic residue} &&&&& \therefore & g^r \equiv g^{2s} \hspace{7pt} (p)\\
		& &&&&& & g^{r-2s} \equiv 1 \hspace{7pt} (p)\\
		& &&&&& & g \text{ has order } p-1 \text{ ,so } r-2s \text{ is a multiple of }p-1 \\
		& &&&&& & p\text{ odd } \implies p-1 \text{ is even }\implies r \text{ is even}
	\end{align*}
\end{proof} 
\newpage
\textbf{E.g.} $p=7$\\[1em]

%\begin{minipage}{.5\linewidth}

	
	\begin{tabular}{cc}	
\begin{tabular}{l|l}
	\centering
	$x$     & $x ^2 \mod 7$ \\ \cline{1-2}
	$\pm 1$ & 1              \\
	$\pm 2$ & 4              \\
	$\pm 3$ & 2               
\end{tabular}
%\end{minipage}
	$\implies $ \hspace{25pt}

\begin{tabular}{l|l}
	$a$ & $(\frac{a}{7})$ \\\cline{1-2}
	1 & 1   \\
	2 & 1   \\
	3 & -1  \\
	4 & 1   \\
	5 & -1  \\
	6 & -1 
\end{tabular}
\end{tabular}
	\\[1em]So 1,2,4 are quadratic residues; 3,4,6 are quadratic non-residues\\



\begin{corollary}
	There are exactly $\frac{p-1}{2}$ quadratic residues and $\frac{p-1}{2}$ quadratic non-residues mod $p$
\end{corollary}

\begin{definition}
	Euler's criterion: Let $p$ be an odd prime and $a \in \mathbb{F}^\times_p \implies (\frac{a}{p}) \equiv a^{\frac{p-1}{2}} \hspace{7pt} (p)$\\
	Also $(\frac{ab}{p}) = (\frac{a}{p}) (\frac{b}{p})$
\end{definition}
\begin{proof}
	$(a^{\frac{p-1}{2}})^2 \equiv 1 \hspace{7pt} (p)$ by Fermat's Little theorem.\\[1em] 
	\hspace{25pt}$\therefore a^\frac{p-1}{2} \equiv \pm 1 \hspace{7pt} (p)$\\[0.5em]
	Let $a= g^r $ where $g$ is a primitive root $\implies a^{\frac{p-1}{2}} \equiv g^{(p-1)\frac{r}{2}}$
	\begin{align*}	
		a \text{ is a quadratic residue} &\iff r \text{ is even} &&&&&\\
		&\iff (p-1)\frac{r}{2} \text{ is a multiple of } p-1 \\
		&\iff g^{(p-1)\frac{r}{2}} \equiv 1 \hspace{7pt} (p)\\
		&\iff a^{\frac{p-1}{2}} \equiv 1 \hspace{7pt} (p)
	\end{align*}
\end{proof}
To calculate $(\frac{a}{p})$, we'll use three theorems:

\subsubsection{Quadratic Reciprocity Law}
Let $p,q$ be distinct odd prime numbers. Then $(\frac{p}{q}) = (-1)^{\frac{(p-1)(q-1)}{4}}$




\large
\begin{equation*}
	\text{i.e.} \hspace{7pt} (\frac{p}{q}) =  
	\begin{cases}
		(\frac{q}{p}) &\text{ if } p \equiv 1 \hspace{7pt} (4) \text{ or } q \equiv 1\hspace{7pt} (4)\\
		-(\frac{q}{p}) &\text{ if } p \equiv q \equiv -1 \hspace{7pt} (4)
	\end{cases}
\end{equation*}

\subsubsection{First Nebensatz}
\normalsize If $p$ is an odd prime, then $(\frac{-1}{p}) = (-1)^{\frac{p-1}{2}}$
\large
\begin{equation*}
	\text{i.e.} \hspace{7pt} (\frac{-1}{p}) = 
	\begin{cases}
		1 & p \equiv 1\hspace{7pt} (4)\\
		-1 & p \equiv -1 \hspace{7pt} (4)
	\end{cases}
\end{equation*}

\subsubsection{Second Nebensatz}
\normalsize Let $p$ be an odd prime, then $(\frac{2}{p}) = (-1)^{\frac{p^2 - 1}{ 8}}$
\large
\begin{equation*}
	\text{i.e.} \hspace{7pt} (\frac{2}{p}) = 
	\begin{cases}
		1 & p \equiv \pm 1\hspace{7pt} (8)\\
		-1 & p \equiv \pm 3 \hspace{7pt} (8) 
	\end{cases}
\end{equation*}
\normalsize
We'll prove the theorems later. \\[1em]

\textbf{E.g.} Does the congruence $x^2 \equiv 37 \hspace{7pt} (199)$ have solutions?

\begin{align*}
	199 \text{ is an odd prime } (\frac{37}{199})&= +(\frac{199}{37}) &\text{ by quadratic reciprocity}\\
	&\equiv (\frac{14}{37}) &\text{ because } 199 \equiv 14\hspace{7pt} (37)\\
	&\equiv (\frac{2}{37}) (\frac{7}{37}) &\text{by the corollary}\\
	&\equiv (-1) (\frac{7}{37}) &\text{by the }2^{nd} \text{ Nebensatz}\\
	&\equiv (-1)(+1) (\frac{37}{7}) &\text{by the quadratic reciprocity law}\\
	&\equiv -(\frac{2}{7}) &\text{because }37\equiv 2 \hspace{7pt} (7)\\
	&\equiv - (+1) &\text{by the } 2^{nd} \text{ Nebensatz} \\
	&\equiv -1 &\therefore x^2\equiv 37\hspace{7pt} (199) \text{ has no solutions}
\end{align*}
\textbf{E.g.} $x^2 \equiv 47 \hspace{7pt} (53) $ have solutions?
\begin{align*}
	(\frac{47}{53}) = +(\frac{53}{47}) = (\frac{6}{47}) = (\frac{2}{47})(\frac{3}{47}) = (+1)(-1) (\frac{47}{3}) = -(-\frac{1}{3}) = -(-1) = +1
\end{align*}
This shows that 47 is a quadratic residue mod 53, so $x^2 \equiv 47 \hspace{7pt}(53)$ does have solutions. $(x=10)$\\[1em]

We can speed up the test for primitive roos using quadratic reciprocity,
\begin{align*}
	x \text{ is a primitive root mod }p \iff \forall q | p-1, q \text{ prime } x^{\frac{p-1}{q}} \not \equiv 1 \hspace{7pt} (p)
\end{align*}
This means we need to calculate $x^{\frac{p-1}{q}} \hspace{7pt} (p)$ for primes $q | p-1$, the biggest power of $x$ to calculate is $x^{\frac{p-1}{2}}$. But we can calculate this, because it is $(\frac{x}{p})$ by Euler's criterion.\\[0.5em]

\textbf{E.g.} Is 35 a primitive root modulo 83?\\[0.5em]
The primes $q$ dividing 82 are $2,41$, need to check $35^2, 35^{41}$\\
$35^2 \not \equiv 1 \hspace{7pt} (83) $ because $35 \not \equiv \pm 1 \hspace{7pt} (83)$, a quadratic equation cannot have more than 2 roots.\\
$35^{41} \equiv (\frac{35}{83} ) \hspace{7pt} (83) = (\frac{5}{83}) (\frac{7}{83}) = (\frac{83}{5}) (-1) (\frac{83}{7}) = (\frac{3}{5}) (-1) (\frac{-1}{7}) = (\frac{5}{3}) (-1)(-1) = (\frac{2}{3})$  $= -1 \not \equiv 1 \hspace{7pt} (83)$ \\
So 35 is a primitive root modulo 83.

\begin{proof}
	\textit{First Nebensatz:} \\
	By Euler's criterion, $(\frac{-1}{p}) \equiv (-1)^{\frac{p-1}{2}} \hspace{7pt}(p)$. \\ 
	Both sides are $\pm 1$, and $+1 \not \equiv -1 \hspace{7pt} (p) $ because $p\geq 3 \implies$ they are equal.
\end{proof}

\textbf{E.g.} Find the first primitive root modulo 41\\
$40 = 2^3  * 5 $ 


\begin{equation*}
	x\in \mathbb{F}^{\times}_{41}  \text{ is a primitive root} \iff 
	\begin{cases}
		x^{\frac{40}{2}} \not \equiv 1 \hspace{7pt}(41)\\
		x^{\frac{40}{5}} \not \equiv 1 \hspace{7pt}(41) 
	\end{cases}
\end{equation*}
\begin{equation*}
	\text{We can then simplify the conditions to:    }
	\begin{cases}
		\frac{x}{41} = -1\\
		x^4 \not \equiv \pm 1 \hspace{7pt} (41)
	\end{cases}
\end{equation*}

\begin{align*}
	\text{Try } x=2: \hspace{10pt} &(\frac{2}{41}) = 1  && && \implies \text{not a primitive root} \\
	\text{Try } x=3:  \hspace{10pt}&  (\frac{3}{41}) = (\frac{41}{3}) = (\frac{2}{3}) = -1 && \text{and } 3^4 = 81 \equiv -1\hspace{7pt} (41) &&\implies \text{not a primitive root}\\
	\text{Try } x=4: \hspace{10pt}&&&&& \implies \text{not a primitive root}\\
	\text{Try } x=5 \hspace{16pt}& (\frac{5}{41}) = (\frac{41}{5}) = (\frac{1}{5}) = 1 &&&& \implies \text{not a primitive root}\\
	\text{Try } x =6:  \hspace{10pt} &(\frac{6}{41}) = (\frac{2}{41}) (\frac{3}{41})= 1 * -1 =-1 \\
	&2^4 * 3^4 = -2^4 \equiv 16 \hspace{7pt} (41) \not \equiv \pm 1  &&&& \implies \text{so 6 is a primitive root} 
\end{align*}
\\[1em]

\textbf{E.g.} For which primes $p$ does the congruence $x^2 \equiv -3 \hspace{7pt} (p)$ have solutions? 
\\[0.5em]
Notice $x=1$ is a solution mod 2,\\
\hspace{30pt} $x=2$ is a solution mod 3.\\

For primes $p \neq 2,3 $ it depends on $(\frac{-3}{p})$\\


\begin{align*}
	\text{We'll calculate $(\frac{-3}{p})$} && (\frac{-3}{p}) &= (\frac{-1}{p})   (\frac{3}{p})\\
	&&&= (-1)^{\frac{p-1}{2}} (\frac{3}{p})\\
	&&&= (-1)^{\frac{(3-1)(p-1)}{4}}(\frac{p}{3})\\
	&&&= (\frac{p}{3})
\end{align*}
List the squares mod 3, $1^2 = 1 \hspace{7pt} (3), 2^2 = 1 \hspace{7pt} (3) $
\begin{equation*}
	\therefore (\frac{p}{3}) = 
	\begin{cases}
		1  &\text{if $p\equiv1 \hspace{7pt} (3)$}\\
		-1 & \text{if $p\equiv 2 \hspace{7pt} (3)$} 
	\end{cases}
\end{equation*}
We've shown that $x^2 \equiv -3\hspace{7pt} (p)$ has solutions iff $p \neq 2 \text{ or } p \equiv 1 \mod 3$ .
\begin{corollary}
	There are infinitely many primes $p \equiv 1 \hspace{7pt} (3)$
\end{corollary}

\begin{proof}
Assume there are only finitely many, and call them $p_1, p_2, \dots, p_r$\\
Let $N = n^2 +3 $ where $n=2p_1\dots p_r$\\
Take a prime factor $q$ of $N$\\[1em]
	$N \equiv 0\hspace{7pt} (q)$\\
	$n^2 + 3 \equiv 0 \hspace{7pt} (q) $\\
	$n^2 \equiv -3 \hspace{7pt}(q)$\\
	We've just shown that this implies $q = 2 $ or 3 or $q \equiv 1\hspace{7pt} (3)$ but $q \neq 2, 3, q \not \equiv 1 \hspace{7pt}(3) $ \lightning 
\end{proof}

Before we prove the $2^{nd}$ Nebensatz, we need to know about a new ring.\\[0.5em]
Let $\zeta= e^{\frac{2\pi i}{8}}$, a primitive $8^{th}$ root of unity.

We'll use the ring $\mathbb{Z}[\zeta] = \{f(\zeta) \colon f \in \mathbb{Z} \} = \{a_0 + a_1\zeta +a_2 \zeta^2 +\dots + a_n\zeta^n : a_i \in \mathbb{Z} \}$\\
This is clearly a ring (closed under +,*).

\subsection{Uniqueness Lemma}

Every $A \in \mathbb{Z}[\zeta]$ can be written uniquely as $A = W + x\zeta + y\zeta^2 +z\zeta^3$ with $w,x,y,z \in \mathbb{Z}$.\\
We'll use congruence modulo $p$ in the ring $\mathbb{Z}[\zeta]$ to prove the $2^{nd}$ Nebensatz.

\begin{definition}
	Let $A,B \in \mathbb{Z}[\zeta]$\\
	We'll say $A \equiv B \hspace{7pt} (p\mathbb{Z}[\zeta])$ if $A-B = pC$ for some $c \in \mathbb{Z}[\zeta]$
\end{definition}
\begin{align*}
	\text{Suppose } & A = a_0 + a_1\zeta + a_2\zeta^2 +a_3\zeta^3\\
	& B = b_0 + b_1\zeta + b_2\zeta^2 +b_3\zeta^3\\
	& C = c_0 + c_1\zeta + c_2\zeta^2 +c_3\zeta^3
\end{align*}
The equation $A-B = pC$ is equivalent (by uniqueness lemma) to:
\begin{align*}
a_0 -b_0 =pC_0, \\
	a_1 -b_1 =pC_1,\\
	a_2 -b_2 =pC_2, \\
	a_3 -b_3 =pC_3,  
\end{align*}
This implies that the congruence $A \equiv B \hspace{7pt} (p\mathbb{Z}[\zeta])$ is equivalent to $a_i \equiv b_i \hspace{7pt} (p)$ for $i=0,1,2,3$

\begin{corollary}
	$1\not \equiv -1 \hspace{7pt}(p\mathbb{Z}[\zeta])$ if $p$ is an odd prime. 
\end{corollary}
This means that to calculate $(\frac{2}{p})$ it is enough to calculate its congruency class mod $(p\mathbb{Z}[\zeta])$
The uniquess lemma is implied by a more general result:

\subsubsection{General Uniqueness Lemma}
Let $m \in \mathbb{Z}[X]$ be monic and irreducible over $\mathbb{Q}$ of degree $d$. If $\alpha \in \mathbb{C}$ is a root of $m$, then every element of $\mathbb{Z}[\alpha]$ can be written uniquely as $a_0 +a_1+\dots+a_{d-1}\alpha^{d-1}$ with $a_i \in \mathbb{Z}$.

The uniqueness lemma for $\mathbb{Z}[\zeta]$ follows because $\zeta$ is a root of $m(x)= \Phi_8(x) = x^4 +1$. It is proved in (7202 Groups \& Rings) that $x^4 +1$ is irreducible over $\mathbb{Q}$.


\begin{proof}
	(General Uniqueness Lemma)\\[0.5em]
	Let $A \in \mathbb{Z}[\alpha]$ and $m(\alpha) = 0$
	\begin{align*}
		\text{Existence: } && &A= f(\alpha) \text{ for some } f \in \mathbb{Z}[X] \hspace{100pt}\\[0.5em]
		&& &\text{divide $ f $ by $m$ with remainder, } f=q*m+r  && deg(r)<deg(m)<d \\[0.5em]
		\therefore &&&f(\alpha) = q(\alpha) m(\alpha) +r(\alpha)\\[0.5em]
		\therefore &&& A=r(\alpha)\\
	\end{align*}
	\begin{align*}
		\text{Uniqueness: } &&&\text{Suppose }A=f(\alpha) = g(\alpha) \hspace{7pt} (f\neq g) \text{ where $f$ \& $g$ both have degree} <d\\[0.5em]
		\therefore &&&h(\alpha) = 0 \text{ where } h=f-g \hspace{7pt}(\neq 0) \\[0.5em]
		&&& m\text{ is irreducible over $\mathbb{Q}$ and has a bigger degree than $h$}\\[0.5em]
		\therefore&&& m \not |\hspace{3pt} h \text{ in } \mathbb{Q}[x] \text{, so $m$ and $h$ are coprime in $\mathbb{Q}[x]$}\\[1em]
		&&&\exists a,b \in \mathbb{Q}[x] \text{ such that :}\\[0.25em]
		&&& 1= am +bh = a(\alpha)m(\alpha)+b(\alpha)h(\alpha) = 0  \hspace{100pt} m(\alpha)= 0 &&h(\alpha)=0\\[0.25em]
		\implies&&& 1=0 \\[0.1em]
		\implies&&& f=g
	\end{align*}
\end{proof}


\begin{lemma}
In any ring $R$ with any prime $p$
	\begin{equation*}
		(x+y)^p \equiv x^p +y^p\hspace{7pt} (pR) \text{ for any } x,y \in R 
	\end{equation*}
\end{lemma}
\begin{proof}
Sufficient to show that each binomial coefficient:
	\begin{align*}
		c=\frac{p!}{i!(p-i)!} && i =1,2,\dots,p-1 \text{ is a multiple of p}
	\end{align*}
	\begin{align*}
		i!(p-i)! \not \equiv 0 \hspace{7pt} (p) \implies  \in \mathbb{F}^\times_p
	\end{align*}
\end{proof}

\newpage{}
\begin{proof}
	$2^{nd}$ Nebensatz\\[1em]

	Let $p$ be an odd prime and let $G = \zeta + \zeta^{-1} = \sqrt{2}$. We'll calculate $G^p$  $mod$  $ (p\mathbb{Z}[\zeta]) $ in two ways.\\

	\textbf{First Calculation: }
	\begin{align*}
		G^P &= (\zeta + \zeta^{-1})^p\\
		&= \zeta^p + \zeta^{-p} \mod (p\mathbb{Z}[\zeta]) \text{ by the lemma}\\
	\end{align*}
	Since $\zeta^8 = 1$ this only depends $p$ modulo 8 if $p \equiv \pm 1 (8)$ then, 
	\begin{align*}
		G^p = \zeta + \zeta^{-1} \equiv G \hspace{7pt}(p\mathbb{Z}[\zeta])\\
	\end{align*}
	If $p\equiv \pm 3 \hspace{7pt}(8)$ then, 
	\begin{align*}
	G^p \equiv \zeta^3 + \zeta^{-3} \equiv -G \hspace{7pt}(p\mathbb{Z}[\zeta])
	\end{align*}
	So in summary, 

	\begin{align*}
		G^{p} \equiv (-1)^{\frac{p^2-1}{8}}G \hspace{7pt}(p\mathbb{Z}[\zeta])
	\end{align*}
	\textbf{Second Calculation:}\\[1em]
	Since $G^2 = 2$,
	\begin{align*}
		G^p &= G * 2^{\frac{p^2-1}{2}} \\
		&= G * (\frac{2}{p})\hspace{7pt} (p\mathbb{Z}[\zeta]) \text{ by Euler's criterion} 
	\end{align*}
Comparing the results of these two calculations we get:
	\begin{align*}
		(\frac{2}{p}) G = (-1)^{\frac{p^2 -1}{8}} G \hspace{7pt}(p\mathbb{Z}[\zeta])
	\end{align*}

	Note $G^2 * \frac{p+1}{2} \equiv 1 \hspace{7pt}(p\mathbb{Z}[\zeta])$, i.e. $G$ is invertible modulo $p\mathbb{Z}[\zeta]$ with inverse $G*\frac{p+1}{2}$
	\begin{align*}
		\implies & (\frac{2}{p}) \equiv (-1)^{\frac{p^2-1}{8}} \hspace{7pt}(p\mathbb{Z}[\zeta])\\
	\end{align*}

		\text{Since $1 \equiv -1\hspace{7pt} (p\mathbb{Z}[\zeta])$}, 
	\begin{align*}
		(\frac{2}{p}) = (-1)^{\frac{p^2 -1}{8}}
	\end{align*}
\end{proof}
The proof of the $2^{nd}$ Nebensatz worked because $\sqrt{2} \in \mathbb{Z}[\zeta]$\\
To prove the quadratic reciprocity law, we'll show that $\sqrt\pm p)$ is in another cyclotomic ring
\newpage
	Let $\zeta_p = e^{\frac{2\pi i }{p}} $, a primtive $p^{th}$ root of unity. We'll work in the ring modulo $q\mathbb{Z}[\zeta]$.

	\begin{definition}
		The $p^{th}$ Gauss sum (where $p$ is an odd prime):\large
		\begin{equation*}
			G(p) = \sum_{a=1}^{p-1}(\frac{a}{p})\zeta^a_p \in \mathbb{Z}[\zeta_p]
		\end{equation*}

	\end{definition}
		\normalsize
		\begin{lemma}
			$G(p)^2 = (-1)^{\frac{p-1}{2}}$ 
		\end{lemma}
\begin{proof}
		\begin{align*}
			G(p)^{2} &= \Bigg(\sum^{p-1}_{a=1} (\frac{a}{p}) \zeta^a_p\Bigg)\Bigg(\sum^{p-1}_{b=1} (\frac{b}{p}) \zeta^b_p \Bigg) \\
			&= \sum_{a,b \in \mathbb{F}^\times_p}(\frac{a}{p})(\frac{b}{p})  \zeta^a_p \zeta^b_p\\
			&= \sum_{a,b \in \mathbb{F}^\times_p} (\frac{ab}{p})\zeta^{a+b}_p\\	
			\intertext{Let $c\equiv a^{-1}b \hspace{7pt} (p)$, as $b$ runs through $\mathbb{F}^\times_p$, so does $c$}
			&= \sum_{a,c \in \mathbb{F}^\times_p} (\frac{a^2}{p}) \zeta^{a+ac}_p\\
			&= \sum_{c \in \mathbb{F}^\times_p} (\frac{c}{p})\bigg( \sum_{a=1}^{p-1} (\zeta^{1+c}_p)^a\bigg)
		\end{align*}
		Note the second summation is a geometric progression. Recall that,
	\begin{align*}
		\sum^{p-1}_{i=1} r^i = 
		\begin{cases}
			\cfrac{r^p -1}{r-1} &r \neq 1\\
			p-1 & r=1
		\end{cases}
	\end{align*}
	Summing the geometric progression:

	\begin{align*}
		\sum_{a=1}^{p-1} \big(\zeta^{1+c}_p\big)^{a} =& 
		\begin{cases}
			\cfrac{\big(\zeta_p^{1+c} \big)^p - \zeta^{1+c}_p }{\zeta^{1+c}_p - 1} & \text{if } c \not \equiv 1 \hspace{7pt} (p)\\
			p-1 & \text{if } c \not \equiv -1 \hspace{7pt} (p)
		\end{cases}
		\\[1em] =&
		\begin{cases}
			-1 &c \not \equiv -1 \hspace{7pt} (p)\\
			p-1 & c \equiv -1 \hspace{7pt} (p)
		\end{cases}
	\end{align*}
	\newpage
	\begin{align*}
		\therefore G(p)^2 &= \sum_{c \in \mathbb{F}^\times_p} (\frac{c}{p}) (-1) + p(\frac{-1}{p}) &&\\
		\intertext{ $\sum_{c \in \mathbb{F}^\times_p} (\frac{c}{p}) (-1) = 0$ since there are $\frac{p-1}{2}$ quadratic residues and quadratic non-residues. }
		&= p(\frac{-1}{p}) \\
		&= (-1)^{\frac{p-1}{2}}p &\text{ by the $1^{st}$ Nebensatz}
	\end{align*}
\end{proof}

\subsubsection{Uniqueness Lemma for $\mathbb{Z}[\zeta_p]$}
Every element $A \in \mathbb{Z}[\zeta_p] $ can be written uniquely as:
\begin{align*}
	A = a_0 + a_1\zeta + \dots + a_{p-2}\zeta^{p-2} && \text{with } a_i \in \mathbb{Z} 
\end{align*}
This is because $\zeta_p$ is a root of $m(x) = \Phi_p(x) = 1+x+\dots +x^{p-1}$. It's proved in 7202 that $\Phi_p$ is irreducible over $\mathbb{Q}$.

\begin{proof}
	Quadratic Reciprocity law\\[1em]
	We'll calculate $G(p)^q \hspace{7pt}(q\mathbb{Z}[\zeta_p])$ in two ways.\\[1em]

	\textbf{First Calculation:}
	\begin{align*}
		G(p)^q &= \bigg(\sum_{a=1}^{p-1} (\frac{a}{p}) \zeta^a_p \bigg)^q\\
		&=\sum_{a=1}^{p-1} \bigg((\frac{a}{p}) \zeta^a_p \bigg)^q\hspace{7pt} (p\mathbb{Z}[\zeta]) \\
		\intertext{Since $q$ is odd, $(\frac{a}{p})^q = (\frac{a}{p})$}
		G(p)^q &\equiv \sum_{a \in \mathbb{F}^\times_p }(\frac{a}{p}) \zeta^{aq}_p
		\intertext{Let $b \equiv aq \hspace{7pt} (p) $, and as $a$ runs through $\mathbb{F}^\times_p$ so does $b$ }
		G(p)^q &\equiv \sum_{b \in \mathbb{F}^\times_p} (\frac{bq^{-1}}{p})\zeta^b_p\\
		&= (\frac{q^{-1}}{p}) \sum_{b \in \mathbb{F}^\times_p} (\frac{b}{p}) \zeta^b_p\\
		\intertext{Note that $G(p) = \sum_{b \in \mathbb{F}^\times_p} (\frac{b}{p}) \zeta^b_p$ which implies, }
		G(p)^q &\equiv (\frac{q^{-1}}{p}) G(p) \hspace{7pt}(q\mathbb{Z}[\zeta_p])\\
		&\equiv (\frac{q}{p}) G(p) \hspace{7pt}(q\mathbb{Z}[\zeta_p])
	\end{align*}
	\textbf{Second Calculation: }\\[1em]
	Since $G(p)^2 = (-1)^{\frac{p-1}{2}}p$,
	\begin{align*}
		G(p)^q &= G(p) \bigg( (-1)^{\frac{p-1}{2}} p\bigg)^{\frac{q-1}{2}}  \\
		&= G(p) (-1)^{\frac{(p-1)(q-1)}{4}} p^{\frac{q-1}{2}}\\
		\therefore G(p)^q& \equiv G(p) (-1)^{\frac{(p-1)(q-1)}{4}} (\frac{p}{q}) \hspace{7pt}(q\mathbb{Z}[\zeta_p]) \hspace{50pt} \text{ by Euler's criterion}
	\end{align*}
Comparing the two results we get:
	\begin{align*}
		(\frac{q}{p}) G(p) \equiv (-1)^{\frac{(p-1)(q-1)}{4}} (\frac{p}{q})G(p) \hspace{7pt}(q\mathbb{Z}[\zeta_p])
	\end{align*}
	We need to check that $G(p)$ is invertible modulo $q\mathbb{Z}[\zeta_p]$,\\[1em]
	$G(p)^2 = \pm p$, which is invertible modulo $q$\\[0.5em]
	$G(p)$ has inverse $G(p) * (\pm p)^{-1} \hspace{7pt}(q\mathbb{Z}[\zeta_p])$\\[0.5em]
	$\therefore (\frac{p}{q}) \equiv (-1)^{\frac{(p-1)(q-1)}{4}} (\frac{p}{q}) \hspace{7pt}(q\mathbb{Z}[\zeta_p]) $\\[0.5em]
	Since $1 \equiv -1 \hspace{7pt}(q\mathbb{Z}[\zeta_p]) $, it follows that $(\frac{q}{p}) = (-1)^{\frac{(p-1)(q-1)}{4}} (\frac{p}{q})$
\end{proof}

\newpage
\section{P-adic Number theory}
This means methods for congruences modulo $p^n$, $p$ prime and $n$ large.\\[1em]

If we want to solve $f(x)=0$, $x \in \mathbb{R}$ we can use the Newton-Raphson method:
\begin{itemize}
	\item{Begin with an "approximate solution" $a_0$}
	\item{Define a sequence recursively $a_{n+1} = a_n - \cfrac{f(a_n)}{f'(a_n)}$}
\end{itemize}
Very often $a_n$ converge to a limit $a$ and $f(a) = 0$.

We can use the same method in number theory for solving congruences. Suppose $f(x)$ is a polynomial with coefficients in $\mathbb{Z}$ and we want to solve $f(x)\equiv 0 \hspace{7pt} (p^N)$ ($p$ prime, $n$ large)

We can try this:
\begin{itemize}
	\item{Find a solution $a_0$ to $f(a_0) \equiv 0 \hspace{7pt} (p^r)$ where $r$ is small}
	\item{Define a recursive sequence $a_{n+1} = a_n - \cfrac{f(a_n)}{f'(a_n)}$}
\end{itemize}
If $n$ is large enough, then often $f(a_n) \equiv 0\hspace{7pt} (p^N)$\\[1em]

\textbf{E.g.} Let $f(x) = x^2 + 2$, $p=3$\\
Suppose we want to solve $x^2 +2 \equiv 0 \hspace{7pt} (3^N)$ \\[0.5em]

Let $a_0 = 1: $ $f(a_0) = 1^2 + 2 = 3 \equiv 0 \hspace{7pt} (3)$\\[0.5em]
Define the sequence $a_n$ by $a_{n+1} = a_n = \cfrac{f(a_n)}{f'(a_n)}=a_n - \cfrac{a_n^2 +2}{2a_n} = \cfrac{a_n}{2} - \cfrac{1}{a_n}$
\begin{align*}
	a_0 &= 1 &&&&&&&&&&&&&&&&\\
	a_1 &= \frac{1}{2} -1 = \frac{-1}{2} \\
	a_2 &= \frac{-1}{4} +2 = \frac{7}{4}
\end{align*}
It turns out that $ \frac{-1}{2} $ is a solution mod 9 $\implies -1 *2^{-1} \mod 9$\\
\hspace{75pt} $\frac{7}{4} $ is a solution mod 81 $\implies 7*4^{-1} \mod 9$\\[0.5em]
$2^{-1} \equiv 5 \hspace{7pt} (9) \implies a_1 \equiv 4 \hspace{7pt} (9) $\\[0.5em]
$4^{-1} \equiv -20 \hspace{7pt} (81) \implies  a_2 = \frac{7}{4} \equiv -140 \equiv 22\hspace{7pt} (81)$\\[1em]
$a_3 $ would be a solution mod $3^8$.\\[1em]
In this example, we're reducing rational numbers mod $p^n$ not just integers. If $\frac{a}{b}$ is arational numbe,r then we can reduce this modulo $p^n$ as long as $b$ is invertible mod $p^n$, i.e. when b is not a multiple of p. We'll write:

\begin{equation*}
	\mathbb{Z}_{(p)} = \{\frac{a}{b} : a,b \in \mathbb{Z}, p \not | b\}
\end{equation*}
$\mathbb{Z}_{(p)} $ is closed under $+, *$, so $\mathbb{Z}_{(p)}$ is a ring contained in $\mathbb{Q}$ containing $\mathbb{Z}$. This is called the "local ring of $p$" and is the set of rational number which can be reduce modulo $p^n$ $(\forall n)$


\begin{definition}
	If $p$ is a prime number and $n \in \mathbb{Z}$, then the valuation of $n$, at $p$ is:

	\begin{equation*}
		V_{p}(n) = 
		\begin{cases}
	max\{a:  p^a | n\} & n \neq 0\\
			\infty & n=0
		\end{cases}
	\end{equation*}
\end{definition}
A simple statement that can be made is, $V_{p}(nm) = V_p(n) + V_p(m)$ .
We can also extend $V_p$ to a function on $\mathbb{Q}$, $V_p(\frac{n}{m}) = V_p(n) - V_p(m)$.

With this notation:
\begin{equation*}
	Z_{(p)} = \{ x\in \mathbb{Q} : V_p(x) \geq 0 \}
\end{equation*}
\begin{align*}
	x \equiv y \hspace{7pt} (p^{a}) \iff V_p(x-y) \geq a
\end{align*}

\textbf{E.g} 
\begin{align*}
	V_2(\frac{7}{12}) =-2 && V_2(\frac{7}{12}) =-1&&   V_5(\frac{7}{12}) =0 && V_7(\frac{-7}{12}) =+1  
\end{align*}


\subsection{Hensel's Lemma}
Let $p$ be a prime number. Let $f \in \mathbb{Z}_{(p)}[x]$ and $a_0 \in \mathbb{Z}_{(p)}$ such that $f(a_0) \equiv 0 \hspace{7pt} (p^{2c+1})$ where $c= V_P(f'(a_0))$.

Then if we define $a_{n+1} = a_n - \cfrac{f(a_n}{f'(a_n)}$ then $a_n \in \mathbb{Z}_{(p)}$ and $f(a_n) \equiv 0 \hspace{7pt} (p^{2c+2^n})$ 

\begin{proof}
We'll prove the following by induction on $n$
	\begin{enumerate}
		\item{$a_n \in \mathbb{Z}_{(p)}$ and $a_n \equiv a_0 \hspace{7pt} (p^{c+1})$}
		\item{$V_p(f'(a_n)) = c$}
		\item{$f(a_n) \equiv 0 \hspace{7pt}(p^{2c+2^n})$}
	\end{enumerate}
	If $n=0$ then the statements 1,2,3 are all true for $a$ by assumption.
	Now assume 1,2,3 for $a_n$, we'll prove them for $a_{n+1}$\\[1em]
	Let $a_{n+1} = a_n - \delta$  where $\delta = \cfrac{f(a_n)}{f'(a_n)}$\\[0.5em]	
	\textbf{1: }
	\begin{align*}	
		V_p(\delta) &= V_p(f(a_n)) -V_p(f'(a_n)) \\
		&\hspace{70pt} =c &\text{ by \bf{2:}}\\
		&\geq 2c+2^n &\text{ by \bf{3:}}\\
		V_p(\delta) &\geq 2c +2^n - c\\
		V_p(\delta) &\geq c +2^n &\textbf{(*)}\\
	\end{align*}
	\text{By \bf{(*)}}
	\begin{align*}
		&V_p(\delta) \geq 0 \implies \delta \in \mathbb{Z}_{(p)} &&\\[0.5em]
		\therefore & \text{ }a_{n+1} = a_n - \delta \in \mathbb{Z}_{(p)}
	\end{align*}
	\text{By \bf{(*)}}
	\begin{align*}
		V_{p} \geq c+1 &\implies \delta \equiv 0 \hspace{7pt} (p^{c+1})\\[0.5em]
		a_{n+1} &\equiv a_n \hspace{7pt} (p^{c+1})\\
		&\equiv a_0 \hspace{7pt} (p^{c+1}) && \text{by \bf{1}}
	\end{align*}
	\textbf{2: }We've shown that $a_{n+1} \equiv a_0 \hspace{7pt} (p^{c+1})$
	\begin{align*}
		\therefore \hspace{7pt} f'(a_{n+1}) &\equiv f'(a_0) \hspace{7pt} (p^{c+1})\\
		&\not \equiv 0 &&\text{because } V_p(f'(a_0)) = c\\
		&&& \text{also } f'(a_{n+1}) \equiv f'(a_0) \hspace{7pt} (p^c)\\
		&&& \hspace{62pt} \equiv 0 \hspace{7pt} (p^c)\\[0.5em]
		&&& \text{because } V_p(f'(a_0)) = c \hspace{7pt} (p^c)\\[1em]
		\therefore V_p(f'(a_{n+1})) &=c 
	\end{align*}
	\textbf{3: } Must show that $f(a_{n+1}) \equiv 0 \hspace{7pt} (p^{2c+2^{n+1}})$
	\begin{align*}
	a_{n+1} &= a_n - \delta \\[1em]
		a_{n+1}^r &= (a_n -\delta)^r\\
		&= a_n^r - ra_n^r\delta +  \text{multiples of } \delta^2
	\end{align*}
	By \textbf{(*)}:
	\begin{align*}
		 V_p(\delta) &\geq c+2^n\\[1em]
		\therefore V_p(\delta^2) &\geq 2c + 2^{n+1}\\[1em]
		\therefore \delta^2 &\equiv 0 \hspace{7pt} (p^{2c+2^{n+1}})
	\end{align*}
	This implies $a^r_{n+1} \equiv a^r_n - ra^{r-1}_n \delta \hspace{7pt} (p^{2c+2^{n+1}})$\\

	Suppose $f(x) = \sum c_r * x$. Substiuting $a_{n+1}$, we get:
	\begin{align*}
		f(a_{n+1}) &= \sum c_r(a_n^r - ra^{r-1}_n \delta) \hspace{7pt} (p^{2c+2^{n+1}})\\
		&= \sum c_ra_n^r - \bigg(\sum rc_ra_n^{r-1} \bigg)\delta \hspace{7pt} (p^{2c+2^{n+1}})\\
		&= f(a_n) - f'(a_n) *\cfrac{f(a_n)}{f'(a_n)} \equiv 0 \hspace{7pt} (p^{2c+2^{n+1}})
	\end{align*}
\end{proof}
\newpage
\textbf{E.g.} $f(x) = x^3 + x + 1$, $p =3$\\
Find a root of $f$ mod 81\\[1em]
Note that $ f'(x) = 3x^2+1$ and $f(1) = 3 \equiv 0$\\[0.5em]
Try $a_0 = 1$
\begin{align*}
	c&= V_3(f'(a_0)) \\
	&=V_3(4) \\
	&=0
\end{align*}
$3^{2c+1} = 3 $ and $a_0$ is a root of $f$ modulo 3\\
$\therefore a_0 = 1 $ satisfies the conditions of Hensel's lemma.
\begin{align*}
	a_1 &= 1 - \cfrac{a_0}{f'(a_0)} \\
	& = 1 - \cfrac{3}{4}
\end{align*}
It is sufficient to work out $a_1$ mod 9
\begin{align*}
	4^{-1} \equiv 1 \hspace{7pt} (3) && \frac{3}{4} \equiv 3 *1 \hspace{7pt} (9) && a_1 \equiv -2 \hspace{7pt}(9)  
\end{align*}
Check 
\begin{align*}
	f(a_1) &\equiv (-2)^3 + (-2) + 1 \\
	f(2) &= -9 \equiv 0 \hspace{7pt} (9)
\end{align*}
\begin{align*}
	a_2 &= -2 - \frac{f(-2)}{f'(-2)}\\
	&= -2 - \frac{-9}{13}
\end{align*}
This should be a root of $f$ modulo 81. 
\begin{align*}
	13^{-1} &\equiv -2\hspace{7pt} (9)\\[1em]
	\implies \frac{9}{13} &\equiv -18 \\
\end{align*}
\begin{align*}
	a_2 \equiv -2 -18 \equiv -20\\
\end{align*}
\begin{align*}
	\text{Check } f(a_2) = (-20)^3 -20 +1 &\equiv -8000 -19 \\
	&= -8019\\ 
	&= -81*99\\
	&=0\hspace{7pt} (81)
\end{align*}
\newpage
\subsection{Quadratic Congruences}
We'll see how to find out whether $x^2 \equiv b \hspace{7pt} (n) $ has solutions.\\[0.5em]
Suppose $n= p_1^{a_1} \dots p_r^{a_r}$ ($p_i$ distinct primes). There are solutions modulo $n \iff \forall i$, there are solutions modulo $p_i^{a_i}$ by the Chinese Remainder Theorem.
	
	
\begin{proposition}
Suppose $p$ is an odd prime not dividing $b$.
	If $x^2 \equiv b \hspace{7pt} (p)$  has solutions then $x^2 \equiv b\hspace{7pt} (p^r)$ has solutions for all $r$
\end{proposition}
	

\begin{proof}
	Suppose there is a solution $a_0$ modulo $p$, i.e. $a_0^2 \equiv b \hspace{7pt} (p)$\\[0.5em]
	Let $f(x) = x^2 - b$.  We'll check that $a_0$ satisfies the conditions of Hensel's lemma.
	\begin{align*}
		c &= V_p(f'(a_0)) \\
		&= V_p(2a_0) && \text{ and since } p\neq 2\\
		\implies c &=V_p(a_0) 
	\end{align*}
	Also since $p \not | b$, we know $p \not | a_0$:
	\begin{align*}
		\therefore\hspace{7pt} & c =0 \\
		\therefore\hspace{7pt} &f(a_0) \equiv \hspace{7pt} (p^{2c+1})  \implies a_0 \text{ satisfies the conditions of Hensel's lemma}\\
		\therefore \hspace{7pt} & \text{We have roots of $f$ modulo all powers of $p$}
	\end{align*}
\end{proof}

\textbf{Remark}\\
Suppose we want a root of $f$ modulo $p^{13}$\\
Choose $n$ so that $2c+2^n \geq 13$\\
$f(a_n) \equiv 0\hspace{7pt} (p^{2c+2^n}) \implies f(a_n) \equiv 0 \hspace{7pt} (p^{13})$\\[1em]

The proposition would be false if we allowed $p=2$

\textbf{E.g.} Let $b = 3$

\begin{align*}
	\begin{split}
		x^2 &\equiv 3 \hspace{7pt} (2) \text{ has a solution}\\
		x^2 &\equiv 3 \hspace{7pt} (4) \text{ has no solutions} 
	\end{split} &&&&&
	\begin{tabular}{l|l}	
		\multicolumn{1}{l|}{$x$} & \multicolumn{1}{l}{$x^2$ mod 4} \\ \hline
		0 & 0 \\
		1 & 1 \\
		2 & 0 \\
		3 & 1                      
	\end{tabular} &&&&& \\[1em]
\end{align*}

if $b=5$
\begin{align*}
	\begin{split}
		x^2 &\equiv 5 \hspace{7pt} (2) \text{ has a solution}\\
		x^2 &\equiv 5 \hspace{7pt} (4) \text{ has solutions} \\
		x^2 &\equiv 5 \hspace{7pt} (8) \text{ has no solutions} 
	\end{split} &&&&&
	\begin{tabular}{l|l}	
		\multicolumn{1}{l|}{$x$} & \multicolumn{1}{l}{$x^2$ mod 8} \\ \hline
		0        & 0 \\
		$\pm1$   & 1 \\
		$\pm2$   & 4 \\
		$\pm3$   & 1 \\
		$\pm 4$  & 0
	\end{tabular} &&&&& \\[1em]
\end{align*}

\begin{proposition}
	Suppose $b$ is odd. If $x^{2} = \equiv b \hspace{7pt} (8)$ has solutions then $x^2 \equiv b\hspace{7pt} (2^r) $ has solutions for all $r$ 
\end{proposition}
\begin{proof}
	Suppose $a_0 \equiv b \hspace{7pt} (8) $, this implies $a_0$ is odd.\\
	Let $f(x) = x^2 -b$ \\[0.5em]
       	$\therefore c = V_2(f'(a_0)) = V_2(2a_0) = 1 $ because $a_0$ is odd\\[0.5em]
	$\therefore 2^{2c+1} = 8$\\[0.5em]
	$\therefore a_0$ is a root of $f$ modulo $p^{2c+1}$\\[0.5em]
	By Hensel's lemma, there are solutions modulo all powers of 2.\\[1em]
\end{proof}

\textbf{E.g.} For which $n$ does the congruence $x^2 \equiv 5 \hspace{7pt} (5) $ have solutions?\\[1em]
First consider the case $n \equiv p^r $\hspace{7pt} ($p$ prime)\\
If $p \neq 2, 5 $ then by the first propositiong, there are solutions $p^n \iff (\frac{5}{p}) = 1$\\[0.5em]
$(\frac{5}{p}) = + (\frac{p}{5})$ depends on $p $ mod $5$ 

\begin{align*}
	\begin{tabular}{l|l}
		\multicolumn{1}{l|}{x} & \multicolumn{1}{l}{s} \\ \hline
		1                       & 1                      \\
		2                       & -1                     \\
		3                       & -1                     \\
		4                       & 1                     
	\end{tabular}&
	\begin{split}
		&\text{ (different $x$)}\\
		&\text{ The congruence $x^2 \equiv 5 \hspace{7pt} (p) $ has solutions}\\
		&\iff  p\equiv 1,4 \hspace{7pt} (5) \text{ (in the cases $p \neq 2, 5$)}
	\end{split}
\end{align*}
For $p=2$, \hspace{3pt} $x^2 \equiv 5 \hspace{7pt} (2) $ has a solution, $x=1$ \\
\hspace{55pt} $x^2 \equiv 5 \hspace{7pt}(4) $  has a solution, $x=1$\\ 
But the only odd square mod 8 is 1. So $x^2 \equiv 5 \hspace{7pt} (8)$ has no solutions.\\
$\therefore $ no solutions mod $2^n$ if $n\geq 3$\\[1em]
For $p=5$ \hspace{3pt} $x^2 = 5 \hspace{7pt} (5)$ has solutions, here's how we check. Assume:
\begin{align*}
	x^2 &\equiv 5 \hspace{7pt} (25)\\
	\therefore x^2 &\equiv 0 \hspace{7pt} (5) \\[0.5em]
	\text{So } & 5 | x^2 \\
	\text{So } & 5 | x \\
	\therefore x^2 &\equiv 0 \hspace{7pt} (25) \hspace{7pt} \text{\lightning}
\end{align*}
So there are solution modulo $n$ if  $n = 2^a * 5^b * \Pi p_i^{c_i} $ where $a\leq 2, b\leq 1, p_i \equiv 1 \hspace{7pt} (5),c_i \in \mathbb{N} $ \\[1em]

\textbf{E.g.} For which $n$ does $x^2 \equiv -7\hspace{7pt}  (n)$ have solutions?\\[1em]
Assume $p$ is a prime $\neq 2, 7$



\begin{align*}
	\begin{split}
		(\frac{-7}{p}) &= (\frac{-1}{p}) (\frac{7}{p})\\[0.5em]
		&= (-1)^{\frac{p-1}{2}}(-1)^{\frac{(7-1)(p-1)}{4}} (\frac{p}{7})\\[0.5em]
		&= (-1)^{\frac{p-1}{2} + \frac{3(p-1)}{2}} (\frac{p}{7})\\[0.5em]
		&= (+1) (\frac{p}{7}) \text{ depends on $p$ mod 7}
	\end{split}&&
	\begin{tabular}{l|l}
		\multicolumn{1}{l|}{x} & \multicolumn{1}{l}{$\bigg(\cfrac{x}{7}\bigg)$} \\[0.8em] \hline
	1 & 1 \\ 
	2 & 1 \\ 
	3 & -1\\
	4 & 1 \\
	5 & -1\\
	6 & -1\\                 
	\end{tabular}
	\begin{split}
		&3^2 = 9 \equiv 2 \mod 7 \\[1em]
		&x^2 \equiv -7 \hspace{7pt} (p^r) \text{ has solutions}\\[1em]
		&\implies p \equiv 1,2,4 \mod 7
	\end{split}
\end{align*}
	\\[1em]
For $p=2$:  $-7 \equiv 1 \hspace{7pt} (8)$ so -7 is a square modulo 8 by the proposition.\\
 \hspace{53pt}$x^2 \equiv -7\hspace{7pt} (2^r)$ has solutions for all r. \\[1em]

 For $p=7$: $x^2 \equiv -7 \hspace{7pt} (7)$ has a solution $x=0$ but $x^2 \equiv -7 \hspace{7pt} (7^2)$ has no solutions. Suppose 

\begin{align*}
	x^2 &\equiv -7 \hspace{7pt} (7^2)\\
	\therefore x^2 &\equiv 0\hspace{7pt} (7) \\[1em]
	\therefore 7 &| x^2\\
	\implies  7 &| x\\[1em]
	\implies x^2 &\equiv 0 \hspace{7pt} (49)\hspace{7pt} \text{\lightning} 
\end{align*}
So $x^2 \equiv -7\hspace{7pt} (n) $ has solutions $\iff n = 7^a * \Pi p_i^{b_i}$ where $a\leq 1$, $p_i \equiv 1,2,4\hspace{7pt} (7)$, $b_i \in \mathbb{N}$

\subsection{P-adic congruence}
Suppose we have a series $\sum^\infty_{n=1} x_n $ for $x_n \in \mathbb{Z}_{(p)}$. We'll say that the series converges \textbf{p-adically} if for every $a$, there are only finitely many terms $x_n$ with $x_n \not \equiv \hspace{7pt} (p^a)$. We can add up the series in $\mathbb{Z}/p^a$ because only finitely many terms are non zero.


\begin{lemma}
	$\sum x_n$ converges p-adically $\iff V_p(x_n) \rightarrow \infty$ 
\end{lemma}
\begin{proof}
	If $V_p(x_n) \rightarrow \infty$ then for $n$ significantly large, $V_p(x_n) \geq a$, i.e., $x_n\equiv 0 \hspace{7pt} (p^a)$ \\[0.5em]
\end{proof}

\textbf{E.g.} p=3
\begin{align*}
	(1+3x)^{\frac{1}{2}} = 1 + \frac{1}{2}(3x) + \frac{(\frac{1}{2}) (\frac{-1}{2}) (3x)^2}{2!} + \frac{(\frac{1}{2}) (\frac{-1}{2}) (\frac{-3}{2})(3x)^3 }{3!}
\end{align*}
	if $x \in \mathbb{Z}_{(3)}$ then this series converge 3-adically.
	\newpage
\begin{align*}
	(1+3x)^{\frac{1}{2}} &\equiv 1 \hspace{7pt} (3)\\
	&\equiv 1 + \frac{3x}{2} \hspace{7pt} (9)\\
	&\equiv 1 + \frac{3x}{2} + \frac{9}{8}x^2\hspace{7pt} (27)\\
	&\equiv 1 + \frac{3x}{2} + \frac{9}{8}x^2 + \frac{27}{16}x^3 \hspace{7pt} (27)\\
\end{align*}
	We can write these polynomials with integer coefficients.
\begin{align*}
	(1+3x)^{\frac{1}{2}} &\equiv 1 + 15x + 9x^2 \hspace{7pt} (27)\\
	&\equiv 1 + 42x + 9x^2 + 27x^3 \hspace{7pt} (81)
\end{align*}
Important point; these polynomials play the same role in number theory $(1+3x)^{\frac{1}{2}}$ does in analysis $\sqrt(1+3x)$\\
\textbf{E.g.} 
\begin{align*}
	(1+15x+9x^2)^2 &= 1 + (30)x+(18+15^2)x^2 + (2*9*15)x^3 + (81)x^4\\
	&\equiv 1+3x \hspace{7pt} (27)
\end{align*}
	
	\textbf{E.g.} Find a square root of 7 in $\mathbb{Z}/81$

\begin{align*}
	7^\frac{1}{2} &= (1+3*2)^{\frac{1}{2}}\\
	&\equiv 1 + 42*2 + 9*2^2 + 27*2^3 \hspace{7pt} (81) \\
	&\equiv 1 + 84 + 36-27 \hspace{7pt} (81)\\
	&\equiv 13\hspace{7pt} (81)
\end{align*}
	Check $13^2 = 169 \equiv 7\hspace{7pt} (81)$\\[0.5em]
	This works because of a result called the power series trick.\\[1em]
	
\textbf{Notation} We'll write $\mathbb{Z}_{(p)}\Big[[x]\Big]$ for the set of power series in $x$ with coefficient in $\mathbb{Z}_{(p)}$. $\mathbb{Z}_{(p)}\Big[[x]\Big]$ is a ring with addition and multiplication of power series as operations. We can often compose two power series $f,g \in \mathbb{Z}_{(p)}\Big[[x]\Big]$ to get a new power series $f \circ g$. $(f \circ g)(x) = f(g(x)) $.

We can define $f \circ g$ as long as either $f$ is a polynomial or $g$ has zero constant term.
Suppose

\begin{align*}
	f(x) &= \sum^\infty_{n=0} a_nx^n\\
	g(x) &= \sum^\infty_{n=0} b_nx^n\\
\end{align*}
We'll see that $f \circ g$ is a power series
\begin{align*}
	f(g(x)) &= \sum_{n=0}^\infty a_n(\sum^\infty_{m=1} b_mx^m)^n\\
	&=  \sum_{n=0}^\infty a_n  \sum_{m_1=0}^\infty  \sum_{m_2=0}^\infty\dots \sum_{m_n=0}^\infty  b_{m_1} \dots b_{m_n} x^{m_1 + \dots + m_n}
\end{align*}
so $f(g(x)) = \sum c_d x^d$ where \[c_d = \underbrace{\sum^\infty_{m_1,\dots,m_n =1} a_nb_{m_1}\dots b_{m_n}}_\text{finite sum in $\mathbb{Z}_{(p)}$}\]\\
Note $f \circ g$ is not defined otherwise.

\textbf{E.g} 
\begin{align*}
	f(x) &= 1+x+x^2 + \dots\\
	g(x) &= 1 + x\\[1em]
	\implies f(g(x)) &= 1 + (1+x) + (1+x)^2\\
\end{align*}
This has constant term $1+1+1+1 + \dots $, so $f\circ g$ is not defined.


\subsection{Power Series Trick}

Suppose $f,g,h$ are power series with coefficients in $\mathbb{Z}_{(p)}$. Assume either $f$ is a polynomial or $g$ has no constant term. Also assume: 

\begin{itemize}
	\item{For small real numbers $x$, $f(x), g(x), h(x)$ converge and $f(g(x)) = h(x)$}
	\item{For all $x \in \mathbb{Z}_{(p)}$, $f(x), g(x)$ and $h(x)$ converge p-adically}
\end{itemize}
Then for all $x \in \mathbb{Z}_{(p)} $, $f(g(x)) \equiv h(x)$ \hspace{7pt} $(p^n)$\\[0.5em]
In the example $f(x) = x^2, g(x) = (1+3x)^\frac{1}{2}, h(x) = 1+3x$.\\
For small real $x$, $f(g(x)) = h(x)$, so as long as we know that $g(x)$ converges 3-adically ($\forall x \in \mathbb{Z}_{(3)}$) the power series trick implies $g(x)^2 \equiv 1+3x \hspace{7pt} (3^n)$\\[1em]


How do we check for p-adic convergence?

\begin{lemma}
	$\sum x_n$ converge p-adically if and only if $V_p(x_n) \rightarrow \infty$
\end{lemma}
We need a way of calculating valuations of $n^th$ term of a square.

\begin{proposition}
	$V_p(n!) = \lfloor{\frac{n}{p}} \rfloor +   \lfloor{\frac{n}{p^2}} \rfloor +  \lfloor{\frac{n}{p^3}} \rfloor + \dots \leq \frac{n}{p-1} $
\end{proposition}
We'll prove this later, first use the properties to show that $(1+3x)^\frac{1}{2}$ converge 3-adically for all $x \in \mathbb{Z}_{(3)}$
\begin{align*}
	(1+3x)^\frac{1}{2} &= 1+ \frac{1}{2} (3x) + \frac{(\frac{1}{2}) (\frac{-1}{2}) (3x)}{2!} +\dots \\[1em]
	n^{th} \text{ term } &= \cfrac{(\frac{1}{2}) (\frac{1}{2}-1) (\frac{1}{2}-2)\dots (\frac{1}{2} - n+1) }{n!}(3x)^n\\[2em]
	V_3(n^{th} \text{ term}) &= V_3\Bigg((\frac{1}{2})(\frac{1}{2}-1) \dots (\frac{1}{2}-n+1)\Bigg) - V_3(n!) + V_3((3x)^n) \\
	&\geq 0 - \frac{n}{3-1} + n\\
	&\geq \frac{n}{2} \rightarrow \infty \text{ as } n \rightarrow \infty\\
	\implies & \text{series converges 3-adically}
\end{align*}

\textbf{E.g.} Assume $p$ is an odd prime\\[1em]

Let $exp(px) = 1+px+\frac{(px)^2}{2!} + \frac{(px)^3}{3!} + \dots$.\\
We'll see that this converges for all $x\in \mathbb{Z}_{(p)}$
\begin{align*}
	n^{th} \text{ term }&= \frac{(px)^n}{n!}\\[2em]
	V_p(n^{th} \text{ term } &= V_p((px)^n) - V_p(n!)\\
	&= (n*V_p(p)) + (n*V_p(x))) - V_p(n!)\\
	   &\hspace{30pt} 1 \hspace{60pt} \geq 0 \hspace{30pt}\leq \frac{n}{p-1}\\
	   & \geq n - \frac{n}{p-1}\\[0.5em]
	   &\geq (\frac{p-2}{p-1}) \rightarrow \infty \text{ for } p \neq 2
\end{align*}

\textbf{E.g.} $\log (1+px)$ converges p-adically for all $x \in \mathbb{Z}_{(p)}$
\begin{align*}
	V_p\Bigg(\pm \frac{(px)^n}{n} \Bigg) &= V_p\Big((px)^n\Big) - V_p(n)\\
	& \hspace{20pt} nV_p(px) \hspace{10pt}<V_p(n!)\\
	&\geq n - \frac{n}{p-1}\\
	&\geq \Bigg(\frac{p-2}{p-1}\Bigg)n \rightarrow \infty \text{ if } p \neq 2 
\end{align*}

\textbf{Remark}
A quick way to remember the series for $\log(1+px)$
\begin{align*}
	\frac{1}{1-x} &= 1 + x+x^2 + \dots && \text{geometric series}\\
	\frac{1}{1+x} & = 1-x+x^2 -x^3 + \dots\\[0.5em]
	\log(1+x) &= x-\frac{x^2}{2} + \frac{x^3}{3} -\frac{x^4}{4} + \dots \\[0.5em]
	\log(1+px) &= x-\frac{(px)^2}{2} + \frac{(px^3}{3} -\frac{(px)^4}{4} + \dots \\[0.5em]
\end{align*}

\begin{proof} Calculating $V_p(n!)$\\[1em]
	$n! = 1*2*\dots *n$\\
	$V_p(n) =\sum_{i=1}^n V_p(i) \hspace{7pt}(*)$\\[1em]
	The number of $i$ between 1 \& $ n $ which are multiples of $p$ is $\lfloor \frac{n}{p}\rfloor$.\\
	There are $\frac{n}{p^2}$ values of $i$ which are multiples of $p^2$, etc.\\[0.5em]
	$\lfloor \frac{n}{p}\rfloor$ - $\lfloor \frac{n}{p^2}\rfloor$ values of $i$ are mutliples of $p$, but not of $p^2$, i.e. $V_p(i) = 1$\\[0.5em]
	So   $\lfloor \frac{n}{p}\rfloor$ - $\lfloor \frac{n}{p^2}\rfloor$ terms in the sum $(*)$ are equal to 1.\\[0.5em]
	Similarly  $\lfloor \frac{n}{p^2}\rfloor$- $\lfloor \frac{n}{p^3}\rfloor$ terms in the sum $(*)$ are equal to 2.\\
	In general there are exactly $\lfloor \frac{n}{p^a}\rfloor$- $\lfloor \frac{n}{p^{a+1}}\rfloor$ terms in $(*)$ which are equal to $a$
	\begin{align*}
\therefore V_p(n!) = 1 * \text{no of terms equal to 1} + 2* \text{number of terms equal to 2 } + \dots 
	\end{align*}

	\begin{align*}
		Vp(n!) =& 1*(\lfloor \frac{n}{p}\rfloor - \lfloor \frac{n}{p^2}\rfloor)\\
		 + &2 *(\lfloor \frac{n}{p^2}\rfloor - \lfloor \frac{n}{p^3}\rfloor)\\
		 + &3 * (\lfloor \frac{n}{p^3}\rfloor - \lfloor \frac{n}{p^4}\rfloor)\\
		 +& \dots\\[1em]
		 =& \lfloor \frac{n}{p}\rfloor +  (2-1)\lfloor \frac{n}{p^2}\rfloor + (3-2)\lfloor \frac{n}{p^3}\rfloor + \dots \\[0.5em]
		 =&  \lfloor \frac{n}{p}\rfloor +  \lfloor \frac{n}{p^2}\rfloor +  \lfloor \frac{n}{p^3}\rfloor + \dots
	\end{align*}
	Using this we can prove the upper bound.
	\begin{align*}
		V_p(n!) &\leq \frac{n}{p} + \frac{n}{p^2} + \dots\\
			& \leq \frac{n}{p} \underbrace{(1+ \frac{1}{p} + \frac{1}{p^2} + \dots)}_{\text{geometric series } \frac{1}{1-\frac{1}{p}}}\\
			& \leq \frac{n}{p-1}
	\end{align*}
\end{proof} 

\subsubsection{P-adic log \& exp}
Let $p$ be an odd prime. Use the notation 
\begin{align*}
	p\mathbb{Z}/p^n = \{ px \colon x \in p\mathbb{Z}/p^n \}
\end{align*}

\textbf{E.g.}
\begin{align*}
	3\mathbb{Z}/27 = \{0,3,6,9,12,15,18,21,24\}
\end{align*}

$p\mathbb{Z}/p^n$ is closed under $+$, so it is a subgroup of $(\mathbb{Z}/p^n)^\times $

\begin{align*}
	1+p\mathbb{Z}/p^n = \{ 1+px \colon x \in p\mathbb{Z}/p^n \}
\end{align*}
\textbf{E.g.}
\begin{align*}
	1+3\mathbb{Z}/27 = \{1,4,7,10,13,16,19,22,25\}
\end{align*}
$1+p\mathbb{Z}/p^n $ is closed under $*$, so $1+p\mathbb{Z}/p^n $ is a subgroup $(\mathbb{Z}/n)^\times$. Both subgroups have $p^{n-1}$ elements, but one is additive and the other is multiplicative. But actually there are isomorphic. This isomorphism is $\exp \& \log$.
\begin{theorem}
Let $p$ be an odd prime. Then there is an isomorphism:

	\begin{align*}
		p\mathbb{Z}/p^n &\leftrightarrows^{{\text{log}}}_{\text{exp}} 1 + p\mathbb{Z}/p^n\\[1em]
		px &\longmapsto \exp(px)\\
		1+px &\longmapsto \log(1+px) 	
	\end{align*}
\end{theorem}
\textbf{E.g.} $\mathbb{Z}/27$  $(p=3)$ We'll find the isomorphisms in this case.

\begin{align*}
	\exp(3x) &\equiv 1 +3x + \frac{3^2x^2}{2!} +\frac{3^3x^3}{3!}\hspace{7pt} (27)\\
	&\equiv 1+ 3x + 18x^2 + 18x^3 \hspace{7pt} (27)\\[1em]
	\log(1+3x) &\equiv 3x - \frac{(3x)^2}{2} + \frac{(3x)^3}{3}\hspace{7pt} (27)\\
	& \equiv 3x + 9x^2 + 9x^3\hspace{7pt} (27) 
\end{align*}
Check:
\begin{align*}
	\log(\exp(3x)) &\equiv \log(1+ 3(x+6x^2+6x^3))\\
	&\equiv 3(x+6x^2+6x^3)+9(x+6x^2+6x^3)^2 + 9(x+6x^2+6x^3)\\
	&\equiv  3x+18x^2+18x^3 + 9x^2 +9x^3 \\
	&\equiv 3x
\end{align*}
Similarly $\exp(\log(1+3x)) \equiv 1+3x \hspace{7pt} (27)$

We can use the theorem to solve congruences.\\[1em]

\textbf{E.g.} Solve $7^x \equiv 13 \hspace{7pt} (27)$\\[0.5em]

7 and 13 are in $1+ 3\mathbb{Z}/27$, so we can take their logarithms.
\begin{align*}
	x \log(7) \equiv \log(13)
\end{align*}
Using the formula for $\log(1+3x)$, we get:

\begin{align*}
	\log(7) &= \log(1+6)\\[0.5em]
	&\equiv 6 - \frac{6^2}{2} + \frac{6^3}{3} -\frac{6^4}{4}\\[0.5em]
	&\equiv 6-18+72\\[0.5em]
	&\equiv 6 \hspace{7pt} (27)
\end{align*}

\begin{align*}
	\log(13) &\equiv \log(1+12) \\[0.5em]
	&\equiv 12-\frac{12^2}{2} + \frac{12^3}{3} \hspace{7pt} (27)\\[0.5em]
	&\equiv 12-72 + 3^2 * 4^3 \hspace{7pt} (27)\\[0.5em]
	&\equiv 12 -72 + 9 \hspace{7pt} (27)\\[0.5em]
	&\equiv 3\hspace{7pt} (27)
\end{align*}
So $7^x \equiv 13 \hspace{7pt} (27) $ reduces to:
\begin{align*}
	& 7^x \equiv 13 \hspace{7pt} (27) \\
	\implies &6x \equiv 3 \hspace{7pt} (27)\\
	\implies &2x \equiv 1 \hspace{7pt} (9)\\
	\implies &x \equiv 5 \hspace{7pt} (9)
\end{align*}
\newpage
\begin{proof} $ $ \\[1em]
	We'll use the power series trick. We've shown that $\log(1+px), \exp(px)$ converge p-adically for $x \in \mathbb{Z}_{(p)}$ and they converge for small real numbers and for small real $x$
	\begin{align*}
		&\log\big(\exp(px)\big) = px\\[0.5em]
		&\exp\big(\log(1+px)\big) = 1+px
	\end{align*}
	By the power series trick:
	\begin{align*}
		&\exp\big(\log(1+px)\big) \equiv 1+px \hspace{7pt} (p^n)\\[0.5em]
		&\log\big(\exp(px)\big) \equiv px \hspace{7pt} (p^n) \\
	\end{align*}
	$\therefore \log \text{ and } \exp$ are inverse functions, so they are bijective.\\[0.5em]
	Remains to show that $\exp(px+py) \equiv \exp(px) * \exp(py) \hspace{7pt} (p^n)$\\[0.5em]

	For any $a \in \mathbb{N} $: $\exp(pax) = \exp(px))^a$ for small real $x$\\[1em]

	By the power series trick with:
	\begin{align*}
		f(x) &= x^a\\
		g(x) &= \exp(px)\\
		h(x) &= \exp(pax)\\[1em]
		\exp(pax) &\equiv (\exp(px))^a \hspace{7pt} (p^a)\\ 
	\end{align*}
	Take $x=1$
	\begin{align*}
		\exp(pa) &\equiv exp(p)^a \hspace{7pt} (p^a)  \\[0.5em]
		\therefore \exp(pa+pb) &\equiv \exp(p)^{a+b} \hspace{7pt} (p^a) \\[0.5em]
		&\equiv \exp(p)^a * \exp(p)^b \\
		&\equiv \exp(pa) * \exp(pb) \hspace{7pt} (p^n)
	\end{align*}
	We've proved this when $a$ \& $b$ are positive integers, but every element of $\mathbb{Z}/p^n$ can be written as a positive integer.
\end{proof}



\newpage
\subsection{Teichm\"uller Lifts}
Let $p$ be an odd prime. We saw that $(\mathbb{Z}/p^n)^\times$ has a big subgroup $1+p\mathbb{Z}/p^n$ and we can easily do calculations in the subgroup. Teichm\"uller lifts is another subgroup.\\[1em]
$(\mathbb{Z}/p^n)^\times$ = Teichm\"uller lifts $* \hspace{2pt} (1+p\mathbb{Z}/p^n)$ \\[1em]

Let $x \in \mathbb{Z}_{(p)} $ and assume $x\not \equiv 0 \hspace{7pt} (p)$ :
\begin{align*}
x, x^p, x^{p^2}, x^{p^3}, \dots
\end{align*}

All these terms are constant mod $p$: 
\begin{align*}
	x^{p-1} &\equiv 1 \hspace{7pt} (p)\\
	x^p &\equiv x \hspace{7pt} (p) 
\end{align*}
The sequence is constant mod $p^2$, but all terms after the $2^{nd}$ are constant mod $p^2$.\\[0.5em]
\textbf{E.g.} $p=3, x=2$\\[0.5em]
We'll look at the sequence mod 9:

\begin{align*}
	2^3 &\equiv 8 \hspace{7pt} (9)\\
	2^9 \equiv 8^3 &\equiv 8 \hspace{7pt} (9) \\
	2^{27} &\equiv 8 \hspace{7pt} (9) \hspace{20pt}  etc
\end{align*}
The sequence is eventually constant modulo $p^n$


\begin{definition}
	The Teich\"uller lift of $x$ modulo $p^n$ is: 
	\begin{align*}
		T(x) \equiv x^{p^{n-1}} \mod p^n
	\end{align*}
\end{definition}

To calculate Teichm\"uller lifts, we use:

\begin{lemma}
	Suppose $x \equiv y \hspace{7pt} (p^n)$ then $x^p \equiv y^p\hspace{7pt} (p^{n+1})$
\end{lemma}

\begin{proof}
Let $ x \equiv y + p^n \implies $
	\begin{align*}
		x^p &\equiv (y + p^n)^p\\[1em]
		x^p &\equiv y^p + py^{p-1}p^n + \text{ multiples of } p^{2n}\\[1em]
		x^p &\equiv y^p \hspace{7pt} (p^{n+1})
	\end{align*}
\end{proof}

\newpage

\textbf{E.g.} Calculate $T(12) \mod 125$\\[1em]
Definition is $12^{25} \mod 125$. Using the lemma:
\begin{align*}
	12 &\equiv 2 \hspace{7pt} (5)\\[1em]
	12^5 &\equiv 2^5 \hspace{7pt} (5^2)\\
	&\equiv 32 \equiv 7  \hspace{7pt} (25)\\
	12^5 &\equiv 7\hspace{7pt}  (25)\\[1em]
	12^{25} &\equiv 7^5 \hspace{7pt}  (5^3)
\end{align*}

\begin{align*}
	T(12) &\equiv (2+5)^5 \hspace{7pt} (125)\\
	&\equiv 2^5 +\hspace{7pt}  5(2^4)*5  + \hspace{7pt} 10*2^3*5^2 + \text{ multiples of 125}\\
	&\equiv 2^5 +\hspace{7pt} 5^2*2^4 \hspace{7pt} (125)\\
	&\equiv 2^5 + \hspace{7pt} 25*16 \hspace{7pt} (125)  \hspace{50pt}\text{note }  16 \equiv 1 \hspace{7pt} (5)\\
	&\equiv 2^5 + \hspace{7pt} 25*1 \hspace{7pt} (125)\\
	&\equiv 32 + 25 \hspace{7pt} (125)\\
	&\equiv 57 \hspace{7pt} (125)
\end{align*}


\begin{tabular}{l|l}
	$x$ & $T(x) \mod 125$     \\ \hline
	1 &  1                         \\
	2 &  57                             \\
	3 &  $T(-1)*T(2) = - 1 * 57 \equiv 68 \hspace{7pt} (125)$ \\
	4 &   $(-1)^{25} \equiv -1$                               \\
\end{tabular}
\\[3em]
\begin{theorem}\
	\begin{enumerate}
		\item{If $r>n-1$ then $x^{p^r} \equiv T(x) \hspace{7pt} (p^n)$}
		\item{$T(x)^{p-1} \equiv 1 \hspace{7pt} (p^n) $}
		\item{$T(x)$ depends only on $x \mod p$ and $T(x) \equiv x \hspace{7pt} (p) $}
		\item{$T\colon \mathbb{F}_p^\times  \mapsto (\mathbb{Z}/p^n)^\times$ is an injective homomorphism}
	\end{enumerate}
\end{theorem}
\newpage
\begin{proof}$ $\\[1em]
	By Euler's theorem,  $\phi(p^n) = (p-1) p^{n-1} $ 
	\begin{align*}
		\implies& \underbrace{x^{(p-1)p^{n-1} } }_\text{$T(x)^{p-1}$}  \equiv 1 \hspace{7pt} (p^n)\\
		\implies & T(x)^{p-1} \equiv 1 \hspace{7pt} (p^n)
	\end{align*}
	This proves \textbf{\textit{2}}.\\[1em]
	$\therefore T(x)^p \equiv T(x) \hspace{7pt} (p^n)$\\
	Doing this several times we get $T(x) \equiv T(x)^p \equiv T(x)^{p^2} \equiv \dots \hspace{7pt} (p^n) $

	This proves \textbf{\textit{1}}.\\[1em]

	Suppose:
	\begin{align*}
		x &\equiv y \hspace{7pt} (p)\\
		x^p &\equiv y^p \hspace{7pt} (p^2) &&\text{by the lemma}  \\
		x^{p^2} &\equiv y^{p^2} \hspace{7pt} (p^3) && \text{by the lemma}\\
		& \hspace{7pt}\vdots\\
		T(x) &\equiv T(y) \hspace{7pt} (p^n) &&\text{by Fermat's Little Theorem}\\
		x&\equiv x^p \equiv x^{p^2} \equiv \dots \equiv T(x) \hspace{7pt} (p)
	\end{align*}
	This proves \textbf{\textit{3}}.\\
	\begin{align*}
		T(xy) \equiv (xy)^{p^{n-1}} &\equiv x^{p^{n-1}} y^{p^{n-1}}\\
		&\equiv T(x) T(y) \hspace{7pt} (p)
	\end{align*}
	So $T$ is a homomorphism, suppose:
	\begin{align*}
		T(x) &\equiv T(y) \hspace{7pt} (p^n)\\
		\therefore T(x) &\equiv T(y) \hspace{7pt} (p) \\
		x &\equiv y\hspace{7pt} (p) &&	\text{by \textbf{\textit{3.}}}\\[1em]
		\therefore T\colon \mathbb{F}_p^\times &\mapsto (\mathbb{Z}/p^n)^\times \text{is injective}
	\end{align*}
\end{proof}


\begin{corollary}
	Let $p$ be an odd prime, every element in $(\mathbb{Z}/p^n)^\times$ can be written uniquely in the form:
	\begin{align*}
		T(x) * \exp(py) \text{ with } &x \in \mathbb{F}_p^\times \\
		&py \in p\mathbb{Z}/p^n
	\end{align*}
\end{corollary}

\newpage 
\textbf{E.g} 22 $\in (\mathbb{Z}/125)^\times$

\begin{align*}
	22 &= T(x) \exp(5y) \hspace{7pt} (125)\\
	&\equiv 2\hspace{7pt}(5)  \\ 
	&\equiv x \hspace{7pt} (5)\\[1em]
	\implies x &\equiv 2 \hspace{7pt} (5)
\end{align*}

\begin{align*}
	22 = T(2)\exp(5y)\hspace{7pt} (125)\\
	 22*T(2^{-1}) \equiv \exp(5y) \hspace{7pt} (125) && \text{from the table $T(3) = 68$}\\[1em]
\end{align*}
\begin{align*}
	\exp(5y) &\equiv 22*68 \hspace{7pt} (125)\\
	&\equiv 121 \hspace{7pt} (125)\\
	&\equiv -4 \hspace{7pt} (125)
\end{align*}


\begin{align*}
	\therefore 5y &\equiv \log(-4) \hspace{7pt} (125)\\
	&\equiv \log(1-5) \hspace{7pt} (125)\\
	&\equiv -5 - \frac{25}{2} - \frac{125}{3} + \dots\\
	&\equiv -5 - 75\\
	&\equiv 45 \hspace{7pt} (125)\\[2em]
	\therefore 22 &= T(2)\exp(45) \hspace{7pt} (125)
\end{align*}

\textbf{E.g} Calculate $22^{37} \mod 125$
\begin{align*}
	22^{37} &\equiv \big(T(2)\exp(45) \big)^{37}\\
	&\equiv T(2^{37})* \underbrace{\exp(45*37)}_\text{$\equiv 40$} \hspace{7pt} (125)\\
	&\equiv 2 \hspace{7pt}(5)\\[1em]
	\therefore 22^{37} &\equiv \underbrace{T(2)}_\text{$\equiv 57$} * \underbrace{\exp(40)}_\text{$\equiv 841$}\\
	&\equiv 57*91 \hspace{7pt} (125)\\
	&\equiv 62 \hspace{7pt} (125) 
\end{align*}
\newpage
\textbf{E.g.} Calculate $T(23) \mod 7^3$
\begin{align*}
	23 &\equiv 2 \hspace{7pt} (7) \\
	23^7 &\equiv 2^7 \equiv 128 \equiv 30 \hspace{7pt} (7^2)\\
	23^{7^2} &\equiv 30^7 \hspace{7pt} (7^3)
\end{align*}
Using the binomial theorem: 
	\begin{align*}
		23^{7^2} &\equiv (2+ 4\cdot7 )^7\hspace{7pt} (7^3)\\
		&\equiv 2^7 + 7\cdot 2^6 \cdot 4 + \text{multiples of $7^3$} \hspace{7pt} (7^3)
	\end{align*}
	
	Since $2^6 \cdot 4 \equiv 4 \mod 7 $, it follows that $(7^2 \cdot 2^6 \cdot 4) \equiv (49* 4) \equiv 196 \mod 7^3 $. This shows that $T(23) \equiv 128 + 196 \equiv 324 \mod 7^3$\\[1em]


	The following corollary was stated but not proved:
\begin{corollary}
	Let $p$ be an odd prime number. Every element of $(\mathbb{Z}/p^n)^\times$ can be written uniquely in the form $T(x) \cdot \exp(py)$ where $x \in \mathbb{F}_p^{\times} $ and $py \in p\mathbb{Z}/p^n$. Thi is an isomorphism of groups:
	\begin{align*}
		(\mathbb{Z}/p^n)^\times \cong \mathbb{F}_p^\times * p\mathbb{Z}/p^n
	\end{align*}
\end{corollary}

\begin{proof}
	Take any $a \in (\mathbb{Z}/p^n)^\times $ and let $x \equiv a \mod p $. We have $a \equiv x \equiv T(x) \mod p$. Therefore $aT(x)^{-1} \equiv 1 \mod p$. This implies that $\log(\frac{a}{T(x)})$ converges p-adically. Let $py = \log(aT(x)^{-1})$. Then obviously $a=T(x)\exp(py)$.\\[0.5em]

	For uniqueness, suppose $T(x)\cdot \exp(py) \equiv T(x')\cdot \exp(py') \mod p^n $. Since the image of $\exp$ is congruent to $ 1 \mod p$, we have $T(x) \equiv T(x') \mod p$.\\[0.5em]

	This implies $x\equiv x' \mod p$. Therefore $T(x) \equiv T(x') \mod p^n$. From this we get $\exp(py) \equiv \exp(py') \mod p^n$. Taking logs we get $py \equiv py' \mod p^n$\\[1em] 
\end{proof}
This corollary can be used to solve the following types of equations:\\[0.5em]

\textbf{E.g} $x^{21}\equiv 71 \mod 81$\\
Note 21 is not coprime to $\phi(81) = 54$, so previous methods cannot be used to solve this equation. Also $(1+70)^{\frac{1}{21}}$ does not converge 3-adically. Start with $71\equiv 2 \mod 3$:
\begin{align*} 
	\implies 71 \equiv T(2)\exp(3y) \mod 81
\end{align*}
$T(2) \equiv -1 \mod 81$, 
\begin{align*}
	\implies& \exp(3y) \equiv -71 \\
	\implies& 3y \equiv \log(1+9) = 9 - \frac{81}{2} + \dots \equiv 9 \mod 81\\
	\implies & 71 = T(2) \exp(9) \mod 81
\end{align*}
\newpage	
Suppose we also decompose $x = T(u)\exp(3v)$. Then 
\begin{align*}
	x^{21} = T(u^{21})\exp(3*21v) = T(2) \exp(9)
\end{align*}
Since such a representation is unique, this gives us two simultaneous equations:
\begin{align*}
	u^{21} \equiv 2 \mod 3  \implies&   u\equiv -1 \equiv 2 \mod 3\\[2em]
	63v \equiv 9 \mod 81  \implies&  7v \equiv 1\mod 9\\
	 &v\equiv 4 \mod 9\\
	 &3v\equiv 12 \mod 27\\
\end{align*}
\begin{align*}
	x\equiv T(2)\exp(12) \mod 27
\end{align*}

\begin{align*}
	\exp(12) &\equiv 1 + 12 + \frac{12^2}{2} + \frac{12^3}{6} + \frac{12^4}{4!} + \dots\\
	& \equiv 1 + 12 + 72 + 288\\
	&\equiv 1 + 12+18+18\\
	&\equiv 22 \mod 27\\[1em]
	T(2) &\equiv -1 \mod 27\\
\end{align*}
	
So $x \equiv 5 \mod 27 \implies x \equiv 5,32, 59 \mod 81$

\subsection{Fractional Powers}
	If $p$ is an odd prime $n$ and $a \equiv 1 \mod p$ and $b \in \mathbb{Z}_{(p)} $ then $a^b $ modulo $p^n$ is:
\begin{align*}
	a^b \equiv \exp(b\log(a)) \mod p^n
\end{align*}

The usual rules hold for powers:
\begin{itemize}
	\item{$(ab)^c \equiv a^cb^c \mod p^n$}
	\item{$a^{b+c} \equiv a^b a^c \mod p^n$}
	\item{$a^{bc} \equiv (a^b)^c \mod p^n$}
\end{itemize}
\newpage
\textbf{E.g} $4^{\frac{1}{2}} \mod 27$
First find $\log(4) \mod 27$

\begin{align*}
	\log(4) & \equiv(1+3) \mod 27\\
	& \equiv 3 - \frac{9}{2} + \frac{27}{3} \mod 27\\
	& \equiv 3 + 9 + 9 \mod 27\\
	& \equiv 6 \mod 27
\end{align*}

So 
\begin{align*}
	4^b &\equiv \exp(-6b) &\mod 27\\
	& 1 -6b + \frac{36b^2}{2} - \frac{6^3 b^3}{6} &\mod 27\\
	& 1 -6b + 18b^2 - 36b^3 &\mod 27\\
	& 1-6b - 9b^2-  9b^3 &\mod 27
\end{align*}
	
\begin{align*}
	4^\frac{1}{2} &\equiv 1- 3 - 9(\frac{1}{4} + \frac{1}{8}) \\
	 &\equiv 1-3 \frac{27}{8}\\
	 &\equiv 1-3 \\
	 &\equiv -2 \mod 27
\end{align*}


\subsection{P-adic integers}
This section is slighty more highbrow way of looking at the results of the previous lectures. We've defined several congruency classes such as $\exp(px) \mod p^n$, $T(a) \mod p^n$, $\log(1+px) \mod p^n$. It's a little bit more convenien to be able to write down just $\exp(px)$, $T(a)$, etc $\dots$ without needing to write modulo $p^n$ everywhere. The problem is that there is no integer (or even an element of the local ring) which is congruent $T(a) \mod p^n$ for all $n$. Instead, we work in a bigger ring, the ring $\mathbb{Z}_p$ of p-adic integers. In this ring, the expression $T(a)$, $\exp(px)$ etc all make sense.\\[1em]

Let $p$ be any prime number. By a p-adic integer, we shall mean a p-adically convergent series

\begin{align*}
	\sum^{\infty}_{i=1} a_i &&a_i \in \mathbb{Z}_{(p)}, V_p(a_i) \longrightarrow \infty
\end{align*}

Recall that any series represents and element of $\mathbb{Z}/p^n$ for every $n$. We call two p-adic integers equal if they are congruent modulo $p^n$ for every $n$. THe set of all p-adic integers is whether $\mathbb{Z}_p$ (without the brackets around the $p$). Note that we can add, subtract and multiply p-adically convergent series, so in fact $\mathbb{Z}_p$ is a ring. 

The advantage of this kind of notation is that we can write (for example) $\log(1+px)$ to mean a p-adic integer, without having to reduce modulo $p^n$. This allows us to state many of the recent theorems more simply. If $a \in \mathbb{Z}$ or $\in \mathbb{Z}_{(p)}$, then we can regard $a$ as the series $a = a + 0 + 0 + 0 +\dots$ and so $a$ is a p-adic integer as well.

Therefore $\mathbb{Z} \subset \mathbb{Z}_{(p)} \subset \mathbb{Z}$\\[1em]


However, it turns out that there are many more p-adic integers than there are elements in the local ring $\mathbb{Z}_{(p)}$. For example consider the following 5-adic integer:

\begin{align*}
	a &= (1+5) ^\frac{1}{2}\\
	 &= 1+ \frac{1}{2}*5 + \frac{\frac{1}{2}*\frac{-1}{2}}{2} + 5^2 + \dots
\end{align*}

In fact $a$ is a square root of 6. We've shown earlier that $a^2 \equiv 6 \mod 5^n$ for all $n$ and therefore $a^2 \equiv 6 \in \mathbb{Z}_5$. However, the local ring $\mathbb{Z}_{(5)}$ has no square roots of 6 since its elements are rational numbers. This shows that $a$ is in $\mathbb{Z}_5$ but not $\mathbb{Z}_{(5)}$.
\begin{proposition}
Every p-adic integer can be written uniquely in the form:

	\begin{align*}
	\sum^{\infty}_{i=0}a_ip_i 
	\end{align*}
with coefficients $a_i \in \{ 0,1,\dots,p-1\}$
\end{proposition}

\begin{proof} $ $\\
Let $x$ be a p-adic integer, so $x$ is defined modulo $p^n$ for all n. There is a unique choice of $a_0$ such that $a_0 \equiv x \mod p $. 

	This means that $x-a_0$ is a multiple of $p$. There is a unique choice of $a_1$ such that $a_1 \equiv \frac{x-a_0}{p} \mod p$.

	This implies $pa_1 \equiv x-a_0 \mod p^2$, so $ x\equiv a_0 + a_1p \mod p^2$.
	This implies $x-a_0-a_1p$ is a multiple of $p^2$ and there is a unique $a_2$ such that $p^2a_2 \equiv x - a_0 -a_1p \mod p^3$, etc.
\end{proof}

We've already seen what it means for a series to converge p-adically. We'll now make a coresponding definition for sequences.

\begin{definition}
	Let $a_n$ be a sequence for elements of $\mathbb{Z}_{(p)}$. We'll say that this sequence converges p-adically if the corresponding series:
	\begin{align*}
	a_0 + (a_1 - a_0) + (a_2-a_1) + \dots
	\end{align*}
\end{definition}
	
	If this is the case, then we define the limit of the sequence to be this series, regarded as an element of $\mathbb{Z}_p$. Note that the partial sums of the series above are exactly the terms of the sequence $a_n$. In fact, we have already seen manyt examples of p-adic limits.

	Suppose $a_0 \in \mathbb{Z}_{(p)} $ satisfies the conditions of Hensel's lemma for a polynomial $f(x)$, i.e. $f(a_0) \equiv 0 \mod p^{2c+1}$, where $c = V_p(f'(a_0))$. Consider the series:
	\begin{align*}
	a =a_0+ (a_1-a_0) + (a_2-a_1)+(a_3-a_2)+\dots
	\end{align*}
	We'll show that this series converges p-adically. Recall that $a_{n+1} - a_n = \frac{f(a_n)}{f'(a_n)} $
	\newpage
When proving Hensel's lemma, we showed that $f(a_n) \equiv 0 \mod p^{2c+2^n}$, $V_p(f'(a_n)) = c$\\[1em]
	Therefore $V_p(a_{n+1} - a_n) \geq 2c + 2^n - c = c+ 2^n \rightarrow \infty $\\[1em]

	Hence $a$ is a p-adic integer, and is congruent to $a_n \mod p^{c+2^n}$.
	We can re-interpret Hensel's lemma as saying the following:

\begin{proposition}
	Let $a_0$ and $f$ satisfy the conditions of Hensel's lemma and let $a \in \mathbb{Z}_p$ be the p-adic integer defined above. Then $f(a) = 0$
\end{proposition}

\begin{proof} $ $ \\
	We just need to prove that $f(a) \equiv 0 \mod $ any power of $p$. But we have $f(a) \equiv f(a_n) \equiv 0 \mod p^{c+2^n}$
\end{proof}

Next consider Teichm\"uller lifts. For an odd prime $p$ and an element $a \in \mathbb{Z}_{(p)}$ such that $p \not | a $ let:

\begin{align*}
	T(a) = a + (a^p - a) + (a^{p^2} - a^p) + (a^{p^3} - a^{p^2}) + (a^{p^4} - a^{p^3}) + \dots
\end{align*}
We've shown that $a^{p^n} - a^{p^{n-1}} \equiv 0 \mod p^n$, and therefore the valuation of the $n-th$ term is at least $n$. This shows that the series converges p-adically, so $T(a) \in \mathbb{Z}_p$. Now the properties of Teichm\"uller lifts can be restated as follows:

\begin{proposition}
	The p-adic integer $T(a)$ depends onlt on the congruence class of a modulo $p$, and the map $T \colon \mathbb{F}_p^\times \mapsto \mathbb{Z}^\times_p$ is an injective group homomorphism.
\end{proposition}

\begin{proof} $ $\\
	Since $T(x) \equiv x \mod p$, it follows that $T$ is injective. For every $n$, we have $T(xy) \equiv T(x)T(y) \mod p^n$. Therefore $T(xy) = T(x)T(y) \in \mathbb{Z}_p$
\end{proof}

\newpage
\section{Quadratic rings}
An integer $d$ is called square-free if $d$ is not a multiple of a square (apart from $1^2$). Let $d$ be a square-free integer with $d\not \equiv 1$. Define a complex number $\alpha$ by:


\begin{align*}
	\alpha =
	\begin{cases}
		\sqrt{d} & \text{ when }d \not \equiv 1   \hspace{7pt} (4)\\[1em]
		\frac{1+\sqrt{d}}{2} & \text{ when } d \equiv 1 \hspace{7pt} (4)
	\end{cases}
\end{align*} 

Consider the set $\{x+y\alpha : \hspace{7pt} x,y \in \mathbb{Z} \}$. This is called a "Quadratic Ring".

\begin{lemma}
Every quadratic ring is a ring, i.e. closed under $+, \times$.
\end{lemma}
\begin{proof}
Clearly closed under +
	\begin{align*}
	(x+y\alpha)(r+s\alpha) = xr + (xs+yr)\alpha + ys\alpha^2
	\end{align*}

	Sufficient to show that $\alpha^2$ is in the quadratic ring.


	\textbf{Case 1:}
	\begin{align*}
		\alpha = \sqrt{d} \implies \alpha^2 = d \text{ which is in the quadratic ring} 
	\end{align*}

	\textbf{Case 2:}
	\begin{align*}
		\alpha = \frac{1+\sqrt{d}}{2}  &&&& d \equiv 1 \hspace{7pt} (4)\\[0.5em]
		(\alpha - \frac{1}{2})^2 = \frac{d}{4}\\[0.5em]
		\alpha^2 -\alpha + \frac{1}{4} = \frac{d}{4}\\[0.5em]
		\alpha \equiv \alpha + \frac{d-1}{4} && d-1 \equiv 0 \hspace{7pt} (4) \implies && \frac{d-1}{4} \in \mathbb{Z}
	\end{align*}
	$\therefore \alpha^2 $ is in the quadratic ring.
\end{proof}

We call $\mathbb{Z}[\alpha] = \{x+y\alpha : x,y, \in \mathbb{Z}\}$:
\begin{itemize}
	\item{A real quadratic ring if $d>0$}
	\item{A complex quadratic ring if $d<0$}
\end{itemize}
\textbf{E.g} $d=-1$\\
$-1\equiv 1 \hspace{7pt} (4) $\\
$\therefore \alpha = \sqrt{-1} = i$\\[0.5em]

$\mathbb{Z}[i] = \{x+iy : x,y \in \mathbb{Z} \} $ is the ring of Gaussian integers.\\[1em]
\newpage
\textbf{E.g} $d=-3 $\\
$-3 \equiv 1 \hspace{7pt} (4) $ so $\alpha = \frac{1+\sqrt{3}}{2}$

This is the ring of Eisenstein integers. It is the same as $\mathbb{Z}[\zeta_3] = \zeta = e^{\frac{2\pi i }{3}}$.

\begin{definition}
	Let $\mathbb{Z}[\alpha]$ be a quadratic ring. The elements all have the form $A = x + y\sqrt{d}$ where $x,y$ are rational. The conjugate of such an element $\bar A = x-y \sqrt{d}$
\end{definition}


\subsubsection{Properties of conjugates}


\textbf{1} $\bar \alpha = $

\begin{enumerate}
	\item{$\bar \alpha = 
		\begin{cases}
			-\alpha & d \not \equiv 1 \hspace{7pt} (4)  \\
			1-\alpha & d \equiv 1 \hspace{7pt} (4) 
		\end{cases}$}\\[1em]
\item{$\overline{A+B} = \bar A + \bar B  $\\
	$\overline{AB} = \overline{A}  \hspace{3pt} \overline{B}$}\\[1em]
\item{$\bar A \in \mathbb{Z}[\alpha]$ if $A \in \mathbb{Z}[\alpha]$}\\[1em]
\item{ $\bar{\bar A} = A$}
\end{enumerate}
\begin{proof} $ $\\ 
	\textbf{1.} If $d \not \equiv 1 \hspace{7pt} (4)$ then $\alpha = \sqrt{d} $\\
	\hspace{70pt} $\implies \bar \alpha = - \sqrt{d} = -\alpha $\\[2em]
	If $d \equiv 1 \hspace{7pt} (4)$ then $\alpha = \frac{1+\sqrt{d} }{2}$\\
	\hspace{60pt} $\implies \bar \alpha = \frac{1-\sqrt{d}}{2} = 1 - \alpha$ \\[1em]
	
	\textbf{2.} Suppose:

	$A= x+ y\sqrt{d}$
	
	$ B= r+s\sqrt{d} $\\[1em]

	Clearly $\overline{A+B} = \bar A + \bar B $


	\begin{align*}
		\overline{A+B} & = \overline{(x+y\sqrt{d}) )(r+s\sqrt{d})}\\
		&= \overline{(xr+dys)+ (xs+yr)\sqrt{d}}\\
		& = \overline{(xr+dys)- (xs+yr)\sqrt{d}}
	\end{align*}

	\begin{align*}
		\bar A \cdot \bar B &= (x-y\sqrt{d})(r-s\sqrt{d})\\
		&=(xr+dys)+ (-xs-yr)\sqrt{d}
	\end{align*}
	\newpage
	\textbf{3.} Let $A = x+y\alpha   $\hspace{20pt} $x,y \in \mathbb{Z}$\\[1em]
	by \textbf{2.} $\bar A = x+y\alpha$\\
	by \textbf{1.} $\bar \alpha \in \mathbb{Z}[\alpha]$\\
	$\therefore \bar A \in \mathbb{Z}[\alpha]$\\[1em]
	\textbf{4.} Trivial
\end{proof}


\begin{definition}
	For an element $A \in \mathbb{Z}$ we define $N(A) = A \bar A$ - The norm of $A$
\end{definition}
Remark: If $\mathbb{Z}[\alpha]$ is a complex quadratic ring then $\bar A$ is the complex conjugate of $A$. This means $N(A) = |A|^2$\\[1em]


\textbf{E.g.} $d = -1 \implies \mathbb{Z}[\alpha] = \mathbb{Z}[i]$

The elements have the form $x+iy , \hspace{7pt} x, y \in \mathbb{Z}$
\begin{align*}
	N(x+iy) &= (x+iy)(x-iy) \\
	&= x^2 + y^2
\end{align*}


\textbf{E.g.} $d=-3 \implies -3 \equiv 1 \hspace{7pt} (4) $, so $\alpha = \frac{1+\sqrt{-3}}{2}$

\begin{align*}
	N(x+y\alpha) &= (x+y\alpha)(x+y\bar \alpha) && \bar \alpha = 1- \alpha\\
	&=x^2 + xy(\underbrace{\alpha+ 1-\alpha}_{=1}) + y^2(\underbrace{\alpha(1-\alpha)}_{=1})
\end{align*}
Note that:
\begin{align*}
	&\alpha = \frac{1+\sqrt{d}}{2}\\[1em]
	\implies &(\alpha - \frac{1}{2})^2 = \frac{d}{4}\\[1em]
	\implies &\alpha^2 - \alpha + \frac{1}{4}  =  \frac{d}{4}\\[1em]
	\implies & \alpha(1-\alpha) = \frac{1-d}{4}
\end{align*}
In this case:
\begin{align*}
	N(x+y\alpha) = x^2 + xy+y^2
\end{align*}


\subsubsection{Formula for norms}
The general formula for norms is given by: \\[1em]
$
N(x+y\alpha) = 
\begin{cases}
	x^2 - dy^2 & \text{ if } d\not \equiv 1 \hspace{7pt} (4)\\
	x^2 + xy + \frac{1-d}{4}y^2 &\text{ if } d \equiv 1 \hspace{7pt} (4)
\end{cases}
$

\newpage
\textbf{Case 1:} $d \not \equiv 1 \hspace{7pt} (4) $

$\implies \hspace{19pt}\bar \alpha \equiv - \alpha$
\begin{align*}
	N(x+y\alpha) = (x+y\alpha)(x-y\alpha) = x^2 - dy^2 &&\alpha^2 = d 
\end{align*}

\textbf{Case 2:} $\bar \alpha = 1 - \alpha $\\
$\implies \hspace{18pt} \alpha = \frac{1+\sqrt{d}}{2} $

\begin{align*}
	N(x+y\alpha) &= (x+y\alpha)(x+y(1-\alpha))\\
	&= x^2 + xy + y^2(\underbrace{\alpha - \alpha^2}_{\frac{1-d}{4}}) 
\end{align*}

	
\subsubsection{Properties of norms}
	
	
\begin{enumerate}
	\item{$N(A) \in \mathbb{Z}$}
	\item{$N(AB) = N(A)N(B) $}
	\item{If $N(A) = 0 $ then $A=0$}
\end{enumerate}
\begin{proof} $ $\\
	\begin{enumerate}
		\item{Follows from formulas for norms}
		\item{$N(AB) = AB \overline{AB}$}
		\item{If $N(A) = 0$ then $A \bar A =0$\\
			\hspace{76pt} $\therefore $ either $A=0 $ or $\bar A = 0$\\
			\hspace{76pt} $\therefore \bar A = 0 $ then $A = \bar A = \bar 0 = 0$  }
	\end{enumerate}
\end{proof}


Recall - A unit in a ring $R$ is an element with an inverse in $R$.\\[1em]

\textbf{E.g.} $1+\sqrt{2} $ is a unit in $\mathbb{Z}[\sqrt{2}] \implies (1+\sqrt{2})(\sqrt{2} -1) = 1$

\begin{corollary}
	An element $A \in \mathbb{Z}[\alpha] $ is a unit if and only if $N(A) = \pm 1$
\end{corollary}

\begin{proof}
	If $N(A) = \pm 1$ then $A \bar A = \pm 1$\\
	\hspace{105pt} $\implies A^{-1} = \pm A \in \mathbb{Z}[\alpha]$. So $A $ is a unit.
\end{proof}

If $A$ is a unit with inverse $B$, $AB = 1 \implies N(A)N(B) = N(AB) = N(1) = 1 $\\

Using this proposition, it's easy to find all the units in any complex quadratic ring.


\textbf{E.g} The units in $\mathbb{Z}[i] $ are $\pm 1, \pm i$


\begin{proof}
	Since $N(x+iy) = x^2 + y^2 $, the units correspond to the solutions to $x^2 + y^2 = 1$. These solutions are $x = \pm 1$, $y = 0$ and $x =0 $, $y = \pm 1$
\end{proof}


\newpage

\textbf{E.g.} The units in the Eisenstein integers $\mathbb{Z}[\frac{1+\sqrt{-3}}{2}]$ are  $\pm 1, \pm \alpha, \pm (\alpha -1)$. Equivalently these are $\pm 1, \pm \zeta_3, \pm \zeta^2_3$


\begin{proof}
Find all solutions to $x^2 + xy +y^2 = 1$. We can complete the square to get:
	\begin{align*}
		(x+\frac{1}{2}y)^2 + \frac{3}{4}y^2 = 1
	\end{align*}

	$y^2 < \frac{4}{3}$ and since $y$ is an integer $|y|< 1$

	Similarly $|x| <1 $.\\[1em]

	If $y=0 $ then $x \pm 1$\\
	If $y=\pm 1 $ then $x^2 + xy+ 1 = 1 \implies x=0,-y $ are solutions.\\[1em]

	So the 6 solutions are $(1,0), (-1,0), (0,1), (-1,1), (0,-1), (1,-1)$

\end{proof}


\begin{corollary}
	If $d<0$ and $d\neq -1,-3$ then the units in $\mathbb{Z}[\alpha]$ are \{1,-1\}
\end{corollary}


\begin{proof}
	Assume first that $d\not \equiv 1 \mod 4$\\[1em]
	$\implies N(x+y\alpha) = x^2 - dy^2 $ \hspace{20pt} $x,y \in \mathbb{Z} $ and $-d>1$ so $y=0 \implies x= \pm 1$
	\\[1em]

	So $(1,0), (-1,0)$ give us the two units $1 ,-1$\\[1em]

	Assume now $d \equiv1 \mod 4 \implies -d\geq -7 $ and need to find solutions to the equation:
	\begin{align*}
		&x^2 +xy+ \frac{1-d}{4}y^2 = 1\\[1em]
		\implies & (x+\frac{1}{2}y)^2 - \frac{d}{4}y^2 = 1
	\end{align*}
	Since $\frac{d}{4} > 1, y^2 < 1 \implies y=0 \implies x=\pm 1$


\end{proof}




\subsection{Norm-Euclidean quadratic rings}

\begin{definition}
	A quadratic ring $\mathbb{Z}[\alpha]$ is norm-Euclidean if $\forall A,B \in \mathbb{Z}[\alpha] $ with $B\neq 0$ \hspace{7pt}$ \exists Q,R, \in \mathbb{Z}[\alpha] $ such that:


	\begin{itemize}
		\item{$A = QB + R$}
		\item{$|N(R)| < N(B)$}
	\end{itemize}
\end{definition}


Finitely many of the quadratic rings are norm-Euclidean.


\begin{theorem}
	If $\mathbb{Z}[\alpha]$ is norm-Euclidean then every non-zero element of $\mathbb{Z}[alpha]$ can be factorised as $UQ_1\dots Q_r$
\end{theorem}
$Q_i $ are irreducible elements of $\mathbb{Z}[\alpha] $, $U$ is a unit.

This factorisation is unique in the sense that if $U_1Q_1\dots Q_r=U_2R_1 \dots R_s$ then $r=s$ and (after reordering $Q_r, R_i$ is a unit for each $U$

\newpage
\textbf{E.g} Let $d = -7$ so $\alpha = \frac{1+\sqrt{-7}}{2}$. This is norm-Euclidean.


Suppose $z= x+y \sqrt{-7} $ \hspace{7pt} $x,y \in \mathbb{Q}$. We'll show that there is an element $Q \in \mathbb{Z}[\alpha] $ such that $|N(Z-Q)| <1$.\\[1em]


Choose $b \in \mathbb{Z}$ such that $|y - \frac{b}{2}| < \frac{1}{4}$\\[1em]

Note that $z - b\alpha = (x-\frac{b}{2}) + (y-\frac{b}{2})\sqrt{-7}$\\[1em]

Then choose $a \in \mathbb{Z} $ so that $|x-\frac{b}{2} - a| \leq \frac{1}{2}$. Also note that the maximum distance to the closest integer is $\frac{1}{2}$.\\[1em]

We let $Q= a + b\alpha$ and we have:

\begin{align*}
	Z-Q = (x-\frac{b}{2} - a) + (y-\frac{b}{2}) \sqrt{-7}\\[2em]
	N(Z-Q) \leq (\frac{1}{2})^2 + 7(\frac{1}{4}) ^2 = \frac{11}{16} < 1
\end{align*}

Now to show the ring is norm-Euclidean. Choose $A, B \in \mathbb{Z}[\alpha]$ with $B \neq 0$. By what we've shown there is an element $Q \in \mathbb{Z}[\alpha]$ such that $|N(\frac{A}{B} -Q)| \leq 1$\\[1em]

Let $R = A-QB $ then $A=QB + R$
\begin{align*}
	|N(R)| &= |N(A-QB)|\\
	&= |N(\frac{A}{B} - Q ) N(B) |\\
	&< |N(B)|
\end{align*}

\textbf{E.g} Let $d=3$. In this case $\alpha = \sqrt{3} $. We'll show that the quadratic ring $\mathbb{Z}[\sqrt{3}]$ is norm-Euclidean.\\[1em]

Let $z = x + y \sqrt{3} $ with $x,y \in \mathbb{Q}$. Need to show there is an element $Q = r+s\sqrt{3} \in \mathbb{Z}[\sqrt{3}]$ such that $|N(Z-Q)| < 1$. Choose $r,s \in \mathbb{Z}$ such that:


\begin{align*}
	&|x-r|\leq \frac{1}{2}  && |y-s| \leq \frac{1}{2}
\end{align*}
\begin{align*}
	\implies& N(Z-A) = (x-r)^2 - 3(y-s)^2\\
	\implies& -\frac{3}{4} \leq N(Z-Q) \leq \frac{1}{4}\\
	\implies& |N(Z-Q)|<1
\end{align*}
Now to show that $\mathbb{Z}[\sqrt{3}]$  is norm-Euclidean. Suppose $A, B \in \mathbb{Z}[\sqrt{3}] $ with $B\neq 0$, there is already a $Q \in \mathbb{Z}[\sqrt{3}]$ such that $|N(\frac{A}{B} - Q)|<1$.\\[1em]

Let $R= A-QB$. This implies $A= QB +R$
\begin{align*}
	\implies |N(R)| &= |N(A-QB)|\\
	& = |N(\frac{A}{B} - Q ) N(B) |\\
	& < |N(B)| 
\end{align*}

Hence $\mathbb{Z}[\sqrt{3}]$ is norm-Euclidean.


\begin{theorem}
The disappointing theorem - The quadratic rings with $d = -1, -2, -3, -7, 1, 2, 3, 5, 13 $ are norm-Euclidean.
\end{theorem}

\begin{definition}
	Suppose $A, B \in \mathbb{Z}[\alpha]$. A highest common factor of $A $ and $B$ is an element $C \in \mathbb{Z}[\alpha]$ with the following properties:

	\begin{itemize}
		\item{$C$ is a factor of both $A $ and $B $ i.e. $\frac{A}{C}$ and $\frac{B}{C}$ are both in $\mathbb{Z}[\alpha]$}
		\item{If $D$ is a factor of both $A$ and $B$ then $D$ is a factor of $C$ (and hence$|N(D)| \leq |N(C)| $)}
	\end{itemize}
\end{definition}
	
	If $C$ is a highest common factor of $A$ and $B$, then so is $UC$ fo every unit $U$, but these are all the highest common factors. Hence highest common factors, if they exit are unique up to multiplication by a unit.

\begin{lemma}
	Bezout's Lemma - Let $\mathbb{Z}[\alpha] $ be norm-Euclidean ring and let $A,B \in \mathbb{Z}[\alpha]$ not both $0$. Then there is a highest common factor $C$ of $A,B $ and there exist $H, K \in \mathbb{Z}[\alpha]$, such that $HA+KB=C$ 
\end{lemma} 


\begin{proof}
	The proof goes similarly to in the ring $\mathbb{Z}$. We prove by induction on $\min(|N(A)|,|N(B)|)$. The induction step consists of writing $A=QB+R $ with $N(R)< |N(B)|$ and using the lemma. To prove the start of the induction, we assume $B=0$. But then it's easy to check that $A$ is a highest common factor.
\end{proof}


\begin{definition}
	An element $P \in \mathbb{Z}[\alpha] $ is called irreducible if:
	\begin{itemize}
		\item{$P$ is not a unit}
		\item{If $P=AB$ with $A,B \in \mathbb{Z}[\alpha]$ then either $A$ or $B$ is a unit }
	\end{itemize}
\end{definition}



\begin{definition}
	We'll say that a quadratic ring $\mathbb{Z}[\alpha]$ has unique factorisation if the following is true:
	\begin{itemize}
		\item{For every non-zero element $A \in\mathbb{Z}[\alpha] $ there is a factorisation $A = UP_1\dots P_r $ with $U$ a unit and each $P_i$ irreducible}
		\item{If we have another factorisation $A=U'Q_1 \dots Q_s$, then $r=s$ and we can reorder $Q_1,\dots, Q_s$ so that each $P_i/Q_i$ is a unit.} 
	\end{itemize}

\end{definition}
\newpage

\begin{lemma}
	Let $\mathbb{Z}[\alpha]$ be norm-Euclidean. Let $p$ be irreducible and suppose $P|AB$ in $\mathbb{Z}[\alpha]$. Then $P|A$ or $P|B$
\end{lemma}

\begin{proof}
	Suppose $P$ does not divide $A$. Then the highest common factor of $P$ and $A$ is not $P$, so it must be $1$. Therefore we can find $H,K \in \mathbb{Z}[\alpha]$ such that $HP+KA=1$. This implies $B=HPB+KPB$ which is a multiple of $P$.
\end{proof}


\begin{theorem}
	If $\mathbb{Z}[\alpha]$ is norm-Euclidean, then $\mathbb{Z}[\alpha]$ has unique factorisation.
\end{theorem}

\begin{proof}
$ $\\
	The proof is exactly as for $\mathbb{Z}$ (using the previous lemma for the uniqueness part), except that we prove by induction on $N(A)$.
\end{proof}
In fact, there are many examples when $\mathbb{Z}[\alpha]$ has unique factorisation, even though it is not norm-Euclidean. It's known that a complex quadratic ring has unique factorisation for exactly the following values of $d$ and no more:
\begin{align*}
d=-1,-2,-3,-7,-11,-19,-43,-67,-163
\end{align*}
In contrast, it is much more common for a real quadratic ring to have unique factorisation. In fact, the following is believed (but not proved):
\\[1em]
\textit{\textbf{Conjecture:}  }There are infinitely many positive square-free integers $d$ such that $\mathbb{Z}[\alpha]$ has unique factorisation. On the other hand, there are many quadratic rings which do not have unique factorisation. \\[1em]

\textbf{E.g} In the ring $\mathbb{Z}[\sqrt{-5}]$ we have non-unique factorisation. For example $6=2*3 = (1+\sqrt{-5})(1-\sqrt{-5})$.\\[2em]


The elements $2,3, 1\pm \sqrt{-5} $ are all irreducible. To see this, note that they have norms $2,9, $ $6 \& 6 $. Hence any proper factors would have norm $2 $ and $3 $. However the ring $\mathbb{Z}[\sqrt{-5}]$ has no elements of norm $2$ and $3$ since $x^2+ 5y^2$ is never equal to $2$ or $3$ fo r integers $x,y$.

\subsection{The Decomposition Theorem}

Assume that $\mathbb{Z}[\alpha]$ is a quadratic ring with unique factorisation into irreducible elements, e.g. $\mathbb{Z}[\alpha]$ could be norm-Euclidean.


\begin{lemma}
	If $Q$ is an irreducible element in $\mathbb{Z}[\alpha]$ then there exists a unique prime number $p$ such that $Q|p$
\end{lemma}


\begin{proof}
	\begin{align*}
		Q|N(Q) = \pm p_1p_2 \dots  p_r \hspace{7pt} (p_i\text{ prime})
	\end{align*}
	By uniqueness of factorisation $Q|p_i$ for some $i$ if $Q|p$ and  $Q|q$  where $p,q$ are distinct primes, $hcf(p,q) = 1 = hp+kq$ ($h, k \in \mathbb{Z})  \implies Q|1 $ \lightning
\end{proof}

The lemma means that to find all the irreducible elements, we just need to factorise all the primes in $\mathbb{Z}[\alpha]$. Suppose $Q|p$, where $Q$ is irreducible in $\mathbb{Z}[\alpha]$, $p$ prime:
\begin{align*}
	\implies & N(Q) | N(p) = p^2\\
	\implies & N(Q) = \pm p \text{ or } \pm p^2
\end{align*}
If $N(Q) = \pm p^2 $ then $Q = unit * p $ so $p$ is irreducible.





\begin{itemize}
	\item{If $P=Q_1Q_2$ where $\frac{Q_1}{Q_2}$ is not a unit, then we say $P$ is \textbf{split} in $\mathbb{Z}[\alpha]$ }
	\item{If $P = UQ^2$ ($U $ a unit, $Q $ irreducible) then we say $P$ is \textbf{ramified} in $\mathbb{Z}[\alpha]$  } 
	\item{If $P$ is irreducible in $\mathbb{Z}[\alpha]$ then we say that $P$ is \textbf{inert} in $\mathbb{Z}[\alpha]$}
\end{itemize}


\textbf{E.g} $d=-1 $\hspace{7pt}  $\alpha = \sqrt{-1} = i $\hspace{7pt} $N(x+iy)=x^2+y^2$\\[1em]

A prime number $p$ factorises in $\mathbb{Z}[i] \implies $ there is an element with norm $\pm p$


\begin{itemize}
	\item{$2 = 1^2+1^2= N(1+i) = (1+i)(1-i) = -i (1+i)^2  \implies $ 2 is ramified } 
	\item{$3$ is inert}
	\item{$5 = 2^2 + 1^2 = (2+i)(2-i) $ 5 is split}
	\item{7 is inert}
	\item{11 is inert}
	\item{$13 = 3^2 + 2^2 = (3+2i)(3-2i)$ 13 is split}
\end{itemize}

Check if a number is ramified by dividing one by the other and checking if the result is in the ring.\\[1em]

\textbf{E.g } $d=-3 $ \hspace{7pt} $\alpha = \frac{1+\sqrt{3}}{2} $ \hspace{7pt} $N(x+y\alpha) = x^2 +xy+y^2$


\begin{itemize}
	\item{2 inert}
	\item{$3= - \sqrt{-3}^2 = -(1-2\alpha)^2 $ 3 ramified}
	\item{5 inert}
	\item{$7 = N(2+\alpha) = (2+\alpha)(3-\alpha) $ }
	\item{11 inert}
\end{itemize}


Assume $\mathbb{Z}[\alpha]$ is a quadratic ring with unique factorisation. Let $p$ be an odd prime number.


\begin{align*}
	p \text{ is ramified } &\iff p|d && 2 \text{ splits } \iff d \equiv 1 \hspace{7pt} (8) \\
	p \text{ is split } &\iff \Big(\frac{d}{p}\Big) = 1 && 2 \text{ inert } \iff d \equiv 5\hspace{7pt}(8) \\
	p \text{ is inert } &\iff \Big(\frac{d}{p}\Big) = -1 && \text{in other cases 2 is ramified } \\
\end{align*}
\newpage

Idea of proof:\\[1em]

Assume $d\not \equiv 1 \hspace{7pt} (4)$, $N(x+y\alpha) = x^2-dy^2 $\\[0.5em]

If $p$ factorises then $\exists x,y \in \mathbb{Z}$, $ x^2-dy^2 = \pm p$ 


\begin{align*}
	\implies x^2 \equiv dy^2 \hspace{7pt} (p)\\
	\implies \Big(\frac{x}{y}\Big)^2 \equiv d \hspace{7pt} (p)
\end{align*}


If $d$ is a quadratic residue then $x^2 \equiv d \hspace{7pt} (p) $\hspace{15pt} $p | (x+\sqrt{d})(x-\sqrt{d})$.\\[0.5em]

If $p$ were inert then $p| x+\sqrt{d} $ or $x-\sqrt{d}$ \lightning \hspace{15pt}(number not in ring) \\
$\implies $ factorises



\subsection{Solving $|N(A) = n |$}

Assume that $\mathbb{Z}[\alpha]$ has unique factorisation, does the equation $|N(A)| = n $ have solutions?\\[1em]


\textbf{E.g} $d= -1 \hspace{20pt} \mathbb{Z}[\alpha] = \mathbb{Z}[i]  \hspace{20pt} N(x+iy)= x^2+ y^2$


\begin{align*}
	& 2= 1^2 + 1^2 && &8=2^2+2^2\\
	&3 \times && &9 = 3^2 +0^2\\
	&4 = 2^2 + 0^2 && &10 = 3^2 + 1^2\\
	&5 = 2^2+1^2 && &11 \times\\
	&6 \times && &12 \times\\
	&7 \times && &13 = 3^2 + 2^2
\end{align*}


The answer is a corollary to the Decomposition Theorem.
\begin{corollary}
	Assume $\mathbb{Z}[\alpha]$ has unique factorisation and let $n$ be a positive integer. Then the following are equivalent:

	\begin{enumerate}
		\item{$\exists A \in \mathbb{Z}[\alpha]: $ $ |N(A)| = n $}
		\item{$\forall $ inert primes $p|n$, $V_p(n)$ is even}
	\end{enumerate}
\end{corollary}


\begin{proof} $ $\\[1em]
	$\textbf{1} \implies \textbf{2}$ Assume $|N(A)| = n$
	\begin{align*}
		A=Q_1^{a_1}\dots Q_r^{a_r} \text{ for } &Q_i \text{ irreducible in }\mathbb{Z}[\alpha]\\
		&Q_i|P_i \hspace{7pt} (p_i \text{ prime}) \\[0.5em]
	\end{align*}
	
	\begin{equation*}
		|N(Q_i)| = 
		\begin{cases}
			P_i & \text{ if $P_i$ splits or is ramified}\\
			P_i^2 & \text{$P_i$ inert}
		\end{cases}
	\end{equation*}


	\begin{align*}
		n = |N(A)| = \Bigg( \prod_{\substack{\text{$P_i $ split } \\\text{or ramified} }} P_i^{a_i} \Bigg)* \Bigg( \prod_{\substack{\text{$P_i$ inert}}} \Bigg)  
	\end{align*}
	So powers of inert primes are even.$ $\\[1em]

	\textbf{2} $\implies $ \textbf{1} Let
	\begin{align*}
		n = \Bigg( \prod_{\substack{\text{$P_i$ split} \\\text{ or ramified} }} P_i^{a_i}\Bigg) * \Bigg( \prod_{\substack{\text{$P_i$ inert}}} P_i^{2a_i} \Bigg)
	\end{align*}
	Choose an element $Q_i$ with norm $\pm P_i$ if $P_i$ is split or ramified:
	\begin{align*}
		n &= N \Bigg( \prod_{\substack{\text{$P_i$ ramified} \\ \text{or split}}} Q_i^{a_i} \hspace{7pt} \times \prod_{\substack{\text{$P_i$ inert}}} P_i  \Bigg)
	\end{align*}
\end{proof}
$ $\\
\textbf{E.g} Solve $x^2 + y^2 = 585$ i.e. $N(x+iy) = 585$\\

Note $585 =3^2*5*13$ 

\begin{itemize}
	\item{$3$ is inert because $\Big( \frac{-1}{3} \Big) = -1$}
	\item{$5$ is split because $\Big( \frac{-1}{5} \Big) = +1$}
	\item{$3$ is split because $\Big( \frac{-1}{13} \Big) = +1$}
\end{itemize}

The only inert prime factor of $585$ is $3$ and its power is even so $x^2+y^2 = 585$ will have solutions.

\begin{align*}
	5 &= 2^2 + 1^2 = N(2+i) = (2+i)(2-i)\\
	13 &=3^2 + 2^2 = N(3+2i) = (3+2i)(3-2i)
\end{align*}

\begin{align*}
	585 &=  3^2 *5 * 13\\
	   &= N(3*(2+i)(3+2i))\\
	   &= N(3(6+7i-2))\\
	   &=N(12+21i)\\
	   &=12^2+21^2
\end{align*}
 
The other elements of norm $585$ are unit multiples of it:

\begin{itemize}
	\item{$3(2+i)(3-2i) = 24-3i$}
	\item{$3(2-i)(3+2i) = 24+3i$}
	\item{$3(2-i)(3-2i) = 12-21i$}
\end{itemize}



$ $\\
\textbf{E.g.} $x^2 +xy+y^2 = 84 $\\ 

Note that $84 = 2^2*3*7$


\begin{itemize}
	\item{$2$ is inert in $\mathbb{Z}[\alpha]$}
	\item{$3 = -(\sqrt{3} )^2 = -(1-2\alpha)^2 $ $\implies$ ramified}
	\item{$7 \hspace{7pt}\Big (\frac{-3}{7} \Big)  = \Big (\frac{4}{7} \Big ) = 1 $ $\implies$ 7 splits \\[1em] $7 = N(2+2\alpha) = (2+\alpha) (3-\alpha)$} 
\end{itemize}


So the elements with norm $84$ are:

\begin{itemize}
	\item{$2(1-2\alpha)(2+\alpha)*$ unit }
	\item{$2(1-2\alpha)(3-\alpha)*$ unit }
\end{itemize}
There are 6 units in this ring, therefore there are 12 solutions to $x^2 + xy +y^2 = 84$\\[1em]
One possible solution is:

\begin{align*}
	2(1-2\alpha)(2+\alpha) &= 2(2-3\alpha=3\alpha^2)\\
	&=2(2-3\alpha-2\alpha+2)\\
	&=8-10\alpha
\end{align*}

so $N(8-10\alpha) = 84$


$ $\\[1em]
\textbf{Super cool trick}\\[1em]
Using $\alpha = \frac{1+\sqrt{d}}{2}$

\begin{align*}
	\Big(\alpha - \frac{1}{2} \Big)^2 &= \frac{d}{4}\\[0.5em]
	\alpha^2 - \alpha + \frac{1}{4} &= \frac{d}{4}\\[1em]
	\alpha^2 = \frac{d-1}{4} &+ \alpha
\end{align*}

\subsection{Continued Fractions}

A finite continued fraction is $a_0+\cfrac{1}{a_1+\cfrac{1}{a_2+\cfrac{1}{a_3+ \cdots \cfrac{1}{\ddots a_n}} }}$
where $a_0 \in \mathbb{Z}$ \\and $a_1, \dots, a_n \in \mathbb{Z} >0$.\\[1em]

We'll use the notation $[a_0, \dots, a_n] = a_0+\cfrac{1}{a_1+\cfrac{1}{a_2+\cfrac{1}{a_3+ \cdots \cfrac{1}{\ddots a_n}} }}$\\[1em]
$ $\\
\textbf{E.g.} $[1,2,3,2] = 1 + \cfrac{1}{2 + \cfrac{1}{3+ \cfrac{1}{2}}} = 1+\cfrac{1}{2+\cfrac{1}{7/2}} = 1 + \cfrac{1}{2 + \cfrac{2}{7}} = 1 + \cfrac{7}{16} = \cfrac{23}{16}$ 
\\[1em]
$ $ \\
More generally if $\alpha \in \mathbb{R}$, $ \alpha > 0 $
\begin{align*}
	[a_0, \dots, a_n, \alpha] = a_0+\cfrac{1}{a_1+\cfrac{1}{a_2+\cfrac{1}{a_3+ \cdots \cfrac{1}{\ddots a_n + \cfrac{1}{\alpha}}} }}
\end{align*}

and as a consequence $[a_0, \dots, a_n] = [a_0,\dots, a_r, [a_{r+1},\dots, a_r]]$\\[1em]
$ $\\
\textbf{E.g} $[1,2,3,2]= [1,2,[3,2]] = [1,2,\frac{7}{2}] = [1, 2 + \frac{2}{7}] = [1, \frac{16}{7} ] = 1+ \frac{7}{16} = \frac{23}{16} $\\[1em]

$ $\\
Clearly every finite continued fraction is in $\mathbb{Q}$. Conversely if $\frac{n}{m} \in \mathbb{Q}$, then we can write $\frac{n}{m}$ as a finite continued fraction.\\[1em]

$ $ \\
\textbf{E.g.} By Euclid's algorithm:

\begin{align*}
	89 &= 2*39+ 11 & 89/39 &= 2 + \frac{11}{39}\\[0.5em]
	39 &= 3*11 + 6 & 39/11 &= 3 + \frac{6}{11}\\[0.5em]
	11 &= 1*6 + 5 & 11/6 &= 1+\frac{5}{6} \\[0.5em]
	6 &= 1*5+1 &  6/5 &= 1 + \frac{1}{5}\\[0.5em]
	5 &= 1*5 + 0 & 5/1 &= 5 
\end{align*}

Therefore $\frac{89}{39} = 2+ \cfrac{1}{3+ \cfrac{1}{1+\cfrac{1}{1+\cfrac{1}{5}}}} = [2,3,1,1,5]$\\[1em]

Now suppose we have a sequence $a_n \in \mathbb{Z}$ for all $n, a_1, a_2, \dots > 0$. For any $n$ we have a finite continued fraction $[a_0, \dots, a_n] = \cfrac{h_n}{k_n} \in \mathbb{Q}$\\[1em]
We define $[a_0, a_1, \dots] = \displaystyle{\lim_{n \to \infty} } [a_0, \dots , a_n] = \displaystyle{\lim_{n \to \infty}} \frac{h_n}{k_n}$



\begin{definition}
	$[a_0, a_1, \dots ]$ is called an infinite continued fraction
\end{definition}


\begin{theorem}
	For any sequence of integers $a_n > 0 $ for $n>0$, the limit $[a_0, \dots] $ exists. If $\alpha = [a_0,a_1,\dots] $ then $\Big| \alpha - \cfrac{h_n}{k_n}\Big| < \cfrac{1}{k_n^2}$ (will be proved later)
\end{theorem}


Sometimes we can calculate infinite continued fractions.\\[1em]

$ $\\
\textbf{E.g.} $\alpha = [1,2,1,2,1,2,1,2,\dots]$ Which real number is $\alpha$?

\begin{align*}
	\alpha &= [1,2,\alpha]\\
	&= \Big[1,2 + \frac{1}{\alpha}\Big]\\
	&= \Big[1, \cfrac{2\alpha+1}{\alpha}\Big]\\
	&= 1 + \cfrac{\alpha}{2\alpha+1}\\
	&= \cfrac{3\alpha + 1}{2\alpha + 1}
\end{align*}
\begin{align*}
	2\alpha^2 + \alpha &= 3\alpha + 1\\
	2\alpha^2 - 2\alpha - 1 &= 0\\[2em]
	\alpha = \cfrac{1\pm \sqrt3}{2}
\end{align*}
Since $\alpha = 1 + \cfrac{2}{1+ \dots} > 1 $, $\alpha = \cfrac{1+\sqrt 3}{2}$.\\[1em]
$ $\\
Every infinite continued fraction converges to a real number. Conversely if $\alpha$ is an irrational real number, then we can write $\alpha$ as an infinite continued fraction.




$ $ \\
\textbf{Method: } We define a sequence $\alpha_n \in \mathbb{R} $, $ a_n \in \mathbb{Z} $ such that $\alpha_0 = \alpha $ and $a_n = \lfloor\alpha_n \rfloor$
\begin{align*}
	\alpha_{n+1} = \cfrac{1}{\alpha_n - a_n} > 1&& a_n>0
\end{align*}

From this definition:
\begin{align*}
	\alpha &= \alpha_0\\
	&=a_0 + \cfrac{a_0}{\alpha_1}\\
	&= a_0 + \cfrac{1}{a_1 + \cfrac{1}{\alpha_2}}\\
	&= [a_0, a_1, a_2, \alpha_3] \text{ etc}
\end{align*}

Using this we can show that $\alpha = [a_0,a_1, \dots]$

\textbf{E.g.} Write $\sqrt{2}$ as an infinite continued fraction




\begin{align*}
	\alpha_0 &= \sqrt2 &&&& a_0 =\lfloor \sqrt{2} \rfloor = 1\\
	\alpha_1 &= \cfrac{1}{\alpha_0 - a_0 } &&&& a_1 = \lfloor \sqrt{2}  +1 \rfloor = 2\\
	& = \cfrac{1}{\sqrt{2}-1}\\
	& = \cfrac{\sqrt{2}+1}{(\sqrt{2}-1)(\sqrt{2}+1)}&\\[1em]
	& = \cfrac{\sqrt{2}+1}{2-1}\\[1em]
	& = \sqrt{2}+1
\end{align*}

\begin{align*}
	\alpha_2 &= \cfrac{1}{\alpha_1- a_1} &&&&& a_2 = \lfloor \alpha_2 \rfloor = \lfloor \alpha_1 \rfloor  = 2\\
&= \cfrac{1}{(\sqrt{2} +1 )-2 }\\
	&= \cfrac{1}{\sqrt{2}-1}\\
	&=\alpha_1
\end{align*}

\begin{align*}
	\alpha_3 &= \cfrac{1}{\alpha_2-\alpha_2} &&&&&&&&& a_3= \lfloor a_1 \rfloor = 2\\
	&= \cfrac{1}{\alpha_1-a_1}\\
	&=\alpha_2
\end{align*}

So $\alpha_2=\alpha_3=\alpha_4=\dots = \cfrac{1}{\sqrt2 - 1} = \sqrt{2} +1$ and $a_3, a_4, a_5 = 2$
\\[1em]

Therefore $\sqrt{2} = [a_0,a_1,a_2, \dots ] = [1,2,2,2,\dots]$.

$ $ \\

Using this method we can write $\sqrt{d}$ for any $+ve$ $d$ as an infinite continued fraction.
$ $\\[1em]
Recall that an element in $\mathbb{Z}[\sqrt2]$ is a unit if its norm is $\pm 1$, i.e. elements $x+y\sqrt{2} $ where $x^2 - 2y^2 = \pm 1$ i.e. $\Big| \Big( \cfrac{x}{y} \Big)^2 -2 \hspace{2pt}\Big | = 1$ so $\cfrac{x}{y}$ is close to $\sqrt{2}$.

$ $\\[1em]
Let $\cfrac{h_n}{k_n} = \underbrace{[1,2,2,\dots, 2]}_{n \text{ terms}}$\\[1em]
This is close to $\sqrt{2}$
\begin{align*}
	[1] &= 1/1 = 1 &&& 1^2-2*1^2 &= -1  \\
	[1,2] &= 1 + 1/2 = 3/2 &&& 3^2 - 2*2^2 &=+ 1\\
	[1,2,2] &= 7/5 &&& 7^2 - 2*5^2 &= -1\\
	[1,2,2,2] &=17/12 &&& 17^2-2*12^2 &=+ 1
\end{align*}


$ $\\
In this case when $\cfrac{h}{k} = [1,2,,\dots,2]$, we always have $h^2 - 2*k^2 = \pm 1$, so $h+k\sqrt{2} $ is a unit in $\mathbb{Z}[\sqrt{2}]$

\subsection{Pell's equation and units in real quadratic rings}

Let $d > 1$ be a square free integer. Pell's equation is $x^2 - dy^2=1 $. We'll see how to find the solutions $(x,y)$ in integers.\\[1em]
Let $A = x+y\sqrt{d}$. Pell's equation $\leftrightarrow $ $N(A)=1$. Therefore $A$ is a unit in $\mathbb{Z}[\sqrt{d}]$ with norm 1. \\[1em]
There are obvious solutions $x= \pm 1$, $ y= 0$. We'll call these the trivial solutions, these correspond to the units $A= \pm 1$

\begin{theorem}
For any $d$, there are non-trivial solutions
\end{theorem}

\begin{definition}
	The smallest solution $(x,y)$ with $x,y >0$ is called the fundamental solution
\end{definition}
$ $\\
\textbf{E.g.} $d = 2$ 

$\hspace{10pt}x^2-2y^2 = 1$ and so $(x,y) = (3,2)$  is the fundamental solution\\[2em]
$A^n$ is also a unit with norm $1$. This gives an infinite sequence of solutions to Pell's equations.\\[0.5em]
$A^2 = (3+2\sqrt{2})^2 = 9+12\sqrt{2} + 8 = 17+12\sqrt{2}$\\
$A^3 = (3+2\sqrt{2})(17+12\sqrt{2}) = 99 + 70\sqrt{2}$\\[1em]
So $(17,12) $ and $(99,70)$ are also the solutions to $x^2 -2y^2 = 1$


\begin{proposition}
	If $(x,y)$ is the fundamental solution, then any other solution in positive integers will be $(x_n,y_n)$ where $(x_n + y_n \sqrt{d}) = (x+y\sqrt{d})^n$
\end{proposition}


\begin{proof}
	Let $A = x+y\sqrt{d}$\\
	
	$A$ is the smallest unit with norm 1 such that $A>1$\\

	Let $B$ be any unit in $\mathbb{Z}[\sqrt{d}] $ which is bigger than 1, and has norm 1. 
	
	Want to show $B= A^n $ for some $n$\\

	$1<A<A^2<A^3<\dots \rightarrow \infty$\\
	
	There exists $n$ such that $A^n \leq B < A^{n+1}$ $\implies $ $ 1 \leq A^{-n}B < B$\\

	$A^{-n}B$ is a unit with norm 1. By choice of $A$, $A^{-n}B=1$ and $B=A^n$ 
\end{proof}

Once we have the fundamental solution, we've solved the equation. Sometimes the fundamental solution is big so it's difficult to find, for example:\\

$d=151 \implies x^2- 151 y^2 =1$\\

Fundamental solution $x=1728148040$, $y=140634693$

So we need a fast way of finding the fundamental solution.\\[1em]

If $\alpha \in \mathbb{R} $ and $\alpha $ is irrational then it has an infinite continued fraction expansion.

\begin{align*}
	\alpha = [a_0,a_1,\dots] = \lim_{n \rightarrow \infty }  a_0 + \cfrac{1}{a_1 + \cfrac{1}{a_2 +\dots \cfrac{1}{\ddots a_n}}} 
\end{align*}
The limit above converges to $\sqrt{d} $ and $[a_0,\dots,a_n]$.\\[1em]
$ $\\
Let $\cfrac{h_n}{k_n} = [a_0,\dots,a_n]$.


\begin{definition}
	The rational numbers $\cfrac{h_n}{k_n}$ are called \textbf{convergents} of $\alpha$
\end{definition}


\begin{theorem}
	If $\cfrac{h}{k} \in \mathbb{Q} $ with $\bigg| \alpha - \cfrac{h}{k} \bigg| < \cfrac{1}{2k^2}$ then $\cfrac{h}{k}$ must be one of the convergents of $\alpha$
\end{theorem}



\begin{corollary}
	If $(x,y)$ is a solution to Pell's equation $x^2 -dy^2 = 1$ for $x>y>0$, then $\cfrac{x}{y}$ is a convergent in the continued fraction of $\sqrt{d}$
\end{corollary}




\begin{proof} (Corollary)
	\begin{align*}
		x^2-dy^2 &=1\\
	(x+y\sqrt{d})(x-y\sqrt{d})&=1\\
	\end{align*}
	\vspace{-30pt}
	\begin{align*}
		|x-y\sqrt{d}|&= \cfrac{1}{x+y\sqrt{d}} < \cfrac{1}{2y}\\
		|\cfrac{x}{y} - \sqrt{d} | &< \cfrac{1}{2y^2}
	\end{align*}

	$\cfrac{x}{y} $ is a convergent.
\end{proof}

$ $\\[1em]
\textbf{E.g.} $d=7 \implies x^2-7y^2 = 1$ \\

To find the fundamental solution we find $\sqrt{7}$ as a continued fraction.


\begin{align*}
	\alpha_0 &= \sqrt{7} &&&& a_n=\lfloor \alpha_n \rfloor\\
	\alpha_{n+1} &= \cfrac{1}{\alpha_n - a_n}\\[2em]
	\alpha_1 &= \cfrac{1}{\sqrt{7}-2} = \cfrac{\sqrt{7} +2}{(\sqrt{7}-2)(\sqrt{7}+2)} = \cfrac{\sqrt{7}+2}{3} &&&& a_1 = 1\\
	\alpha_2 &= \cfrac{1}{\cfrac{\sqrt{7} +2 }{3}-1} = \cfrac{3}{\sqrt{7}-1} = \cfrac{3(\sqrt{7}+1)}{(\sqrt{7}-1)(\sqrt{7}+1)} = \cfrac{\sqrt{7}+1}{2} &&&& a_2=1\\
	\alpha_3 &= \cfrac{1}{\cfrac{\sqrt{7}+1}{2}-1} = \cfrac{2}{\sqrt{7}-1} = \cfrac{2(\sqrt{7}+1)}{6} = \cfrac{\sqrt{2}+1}{3} &&&& a_3=1 \\
	\alpha_4 &= \cfrac{1}{\cfrac{\sqrt{7}+1}{3}-1} = \cfrac{3}{\sqrt{7} -2 } = \cfrac{3(\sqrt{7}+2)}{3} = \sqrt{7}+2 &&&& a_4=4\\
	\alpha_5 &= \cfrac{1}{\sqrt{7} + 2 -4} = \cfrac{1}{\sqrt{7}-2} = \alpha_1 &&&& a_5 =1 
\end{align*}
\\[2em]
So $\sqrt{7} = [2,1,1,1,4,1,1,1,4,\dots]$

\begin{align*}
	[2] &= 2/1 &&& 2^2-7*1^2&=-3\\
	[2,1] &=3/1 &&& 3^2 - 7*1^2 &= 2 \\
	[2,1,1] &=5/2 &&& 5^2 -7*2^2 &=-3\\
	[2,1,1,1] &= 8/3 &&&  8^2 - 7*3^2 &= 1
\end{align*}

Therefore $(8,3)$ is fundamental solution.


\begin{proposition}
	If $(x,y)$ is any solution in integers to $x^2 - dy^2 = 1$, with $x>y>0$ then $\frac{x}{y} $ is a convergent.
\end{proposition}

$ $\\
\textbf{E.g.} If $d=13$, find the fundamental solution to $x^2-13y^2 =1$
\\

We define sequences $\alpha_n, a_n $ by $\alpha_0 = \sqrt{d} $, $a_n = \lfloor \alpha_n \rfloor $, $ \alpha_{n+1} = \cfrac{1}{\alpha_n -a_n} = \cfrac{1}{\alpha_n-\lfloor \alpha_n \rfloor}$


\begin{align*}
	\alpha_0 &= \sqrt{13} &&&&& a_0 &= 3\\[2em]
	\alpha_1 &= \cfrac{1}{\sqrt{13}-3} &&&&& a_1&=4\\[1em]
	&= \cfrac{\sqrt{13}+3}{(\sqrt{13}+3)(\sqrt{13}-3)}\\[1em]
	&=\cfrac{\sqrt{13}+3}{4} \\[2em]
	\alpha_2 &= \cfrac{1}{\cfrac{\sqrt{13}+3}{4}-1}   &&&&& a_2 &= 1\\[1em]
	&= \cfrac{4}{\sqrt{13}-1} \\[1em]
	&=\cfrac{4(\sqrt{13}+1)}{(\sqrt{13}-1)(\sqrt{13}+1)} \\[1em]
	&= \cfrac{4(\sqrt{13}+1)}{12} \\[1em]
	&=\cfrac{\sqrt{13}+1}{3}  \\[2em]
	\alpha_3 &= \cfrac{1}{\cfrac{\sqrt{13}+1}{3}-1} &&&&& a_3&=1\\[1em]
	&= \cfrac{3}{\sqrt{13}-2} \\[1em]
	&= \cfrac{3(\sqrt{13}+2)}{9} \\[1em]
	&= \cfrac{\sqrt{13}+2}{3}
\end{align*}
\begin{align*}
	\alpha_4 & = \cfrac{1}{\cfrac{\sqrt{13}+2}{3}-1} &&&&& a_4 &=1\\[1em]
	& = \cfrac{3}{\sqrt{13}-1}\\[1em]
	&= \cfrac{3(\sqrt{13}+1)}{12}\\[1em]
	&= \cfrac{\sqrt{13}+1}{4}\\[2em]
	\alpha_5 & = \cfrac{1}{\cfrac{\sqrt{13}+1}{4}-1} &&&&& a_5 &= 6\\[1em]
	&= \cfrac{4}{\sqrt{13}-3} \\[1em]
	&= \cfrac{4(\sqrt{13}+3)}{4}\\[1em]
	&=  \sqrt{13}+3\\[2em]
	\alpha_6 &= \cfrac{1}{\sqrt{13}-3} = \alpha_1\\[1em]
	\alpha_7 &= \alpha_2 \hspace{7pt} etc
\end{align*}
$ $\\[1em]
So $\sqrt{13} = [3,1,1,1,1,6,1,1,1,6,\dots] = [3,\overline{1,1,1,1,6}]$ 

\begin{align*}
	[3] &= 3/1 &&&&& 3^2-13*1^2&=-4\\
	[3,1] &=4/1 &&&&& 4^2-13*1^2 &=+3\\
	[3,1,1] &= 7/2 &&&&& 7^2 -13*2^2 &= -3\\
	[3,1,1,1] &=11/3 &&&&& 11^2 -13*3^2 &=+4\\
	[3,1,1,1,1] &= 18/5 &&&&& 18^2 -13*5^2 &=-1
\end{align*}

\begin{align*}
	& N(18+5\sqrt{13})=-1 \\
	\implies & N( (18+5\sqrt{13})^2) = 1\\[2em]
\end{align*}
\vspace{-5em}
\begin{align*}
	(18+5\sqrt{13})^2 &= 324+180\sqrt{13}+325\\
	&= 649+180\sqrt{13}
\end{align*}
This means that $649^2-13*180^2 = 1$. If we find a unit of norm $-1$, before any unit of norm $+1$, then its square will be the fundamental solution. 
$ $\\[1em]
In general if $\sqrt{d} = [a_0,\overline{a_1,\dots,a_n,2a_0 }]$ and if $[a_0,\dots,a_n] = \cfrac{h_n}{k_n}$ \hspace{4pt}then $h_n^2-dk_n^2 = (-1)^{n+1}$




\subsubsection{Convergence of continued fractions}


Let $[a_0,a_1,\dots ]$ be a continuous fraction. Then $x_n = [a_0,\dots, a_n] $ is the $n^{th}$ convergent.\\

Want a formula for numerator and denominator of $x_n$

\begin{align*}
	x_0 = \cfrac{a_0}{1} && x_1 = a_0 + \cfrac{1}{a_1}= \cfrac{a_1a_0+1}{a_1}
\end{align*}

Define sequences of integers $h_n,k_n$ by:

\begin{align*}
	h_0&=a_0 &&& k_0&=1\\
	h_1&=a_1a_0 + 1 &&& k_1&=a_1\\
	h_n &= a_n h_{n-1} + h_{n-2} &&& k_n&=a_nk_{n-1}+k_{n-2}
\end{align*}



\begin{lemma}
	$x_n = \cfrac{h_n}{k_n}$
\end{lemma}

\begin{proof}
By induction on $n$. True for $n=0,1$.
	\begin{align*}
		x_n &= [a_0,\dots,a_n]\\[0.5em]
		&= \Bigg[a_0,\dots,a_{n-1}+\frac{1}{a_n} \Bigg ]\\[1em]
		& = \frac{h_{n-1}}{k_{n-1}}
	\end{align*}
	\vspace{-0.5em}
	By the inductive hypothesis:
	\begin{align*}
		h'_{n-1} = (a_{n-1} + \frac{1}{a_n})h_{n-2} + h_{n-3}\\
		k'_{n-1} = (a_{n-1} + \frac{1}{a_n})k_{n-2} + k_{n-3}\\
	\end{align*}
This means that:

	\begin{align*}
		x_n &= \cfrac{(a_{n-1}+\cfrac{1}{a_n})h_{n-2} + h_{n-3} }{(a_{n-1}+\cfrac{1}{a_n})k_{n-2}+k_{n-3}}\\[1em]
		&= \cfrac{a_n a_{n-1}h_{n-2} +h_{n-2} +a_nh_{n-3} }{a_n a_{n-1}k_{n-2} +k_{n-2} +a_nk_{n-3}} \\[1em]
		&= \cfrac{a_n \overbrace{(a_{n-1}h_{n-2} + h_{n-3}) }^{h_{n-1}} +h_{n-2}}{a_n \underbrace{(a_{n-1}k_{n-2} + k_{n-3}) }_{k_{n-1}} +k_{n-2}}\\[1em]
		x_n &= \cfrac{\overbrace{a_nh_{n-1}+h_{n-2}}^{h_n} }{\underbrace{a_nk_{n-1} + k_{n-2}}_{k_n}}
	\end{align*}
	Therefore $x_n = \cfrac{h_n}{k_n}$\\
$ $\\
	Since $k_0 = 1 >0 $, \hspace{7pt}$k_1 = a_1 > 0$, \hspace{7pt} $k_n= a_nk_{n-1} +k_{n-2} >k_{n-1}$, the denominators are an increasing sequence of positive integers. 

\end{proof}


\begin{lemma}
	$h_n$ and $k_n$ are coprime and $h_{n+1}k_n - h_nk_{n+1} = (-1)^n$
\end{lemma}

\begin{proof}
By induction on $n$. Check in cases $n=0,1$. Assume true for $n-1 > 1$ and prove for $n$.
	\begin{align*}
		h_{n+1}k_n-h_nk_{n+1} &= (\cancel{a_{n+1}h_n} + h_{n-1})k_n - h_n(\cancel{a_{n+1}k_n} + k_{n-1})\\
		&= -(h_nk_{n-1} -h_{n-1}k_n\\
		&= -(-1)^{n-1}\\
		&= (-1)^n
	\end{align*}
\end{proof}

\begin{theorem}
	The continued fraction $[a_0, \dots]$ converges to a real number $\alpha$ and \\$\bigg | \alpha- \cfrac{h_n}{k_n} \bigg|< \cfrac{1}{k_n^2}$
\end{theorem}

\textbf{Alternating Series Test}
Suppose $y_n$ is decreasing and $y_n \rightarrow 0$. Then $\sum_{n=1}^{\infty} (-1)^n y_n$ converges if $S = \sum^{\infty}_{n=1} (-1)^ny^{n}$ then $S$ is between $\sum^{N}_{n=1}(-1)^ny_n $ and $\sum^{N+1}_{n=1}(-1)^ny_n$


\begin{proof}
	Let $x_n = \cfrac{h_n}{k_n}$

	\begin{align*}
		x_{n+1}-x_n = \cfrac{h_{n+1}}{k_{n+1}} -\cfrac{h_n}{k_n} = \cfrac{h_{n+1}k_n-h_nk_{n+1}}{k_nk_{n+1}} = \cfrac{(-1)^n}{k_n{k_{n+1}}} 
	\end{align*}
	\begin{align*}
		x_n &= x_0 + (x_1-x_0) + (x_2-x_1) + \dots + (x_n-x_{n-1})\\
		&= x_0 + \cfrac{1}{k_0k_1} - \cfrac{1}{k_1k_2} + \cfrac{1}{k_2k_3} -\dots + \cfrac{-1}{k_{n-1}k_n}
	\end{align*}

	Therefore $x_n$ converges to some $\alpha \in \mathbb{R} $ by the alternating series test. Also $\alpha $ in between $x_n$ and $x_{n+1}$
	\begin{align*}
		|x_n-\alpha| < |x_n-x_{n+1}| \implies \cfrac{1}{k_nk_{n+1}} < \cfrac{1}{k_n^2}
	\end{align*}
\end{proof}


Using the theorem we'll prove:

\begin{theorem}
For any square-free $d>1$, Pell's equation has non trivial solutions in integers. Equivalently, every real quadratic ring has non trivial units.
\end{theorem}

\begin{proof}
	$\sqrt{d}$ has a continued fraction expansion. For any convergent $\cfrac{h}{k}$ we have

	\begin{align*}
		\bigg | \cfrac{h}{k} -\sqrt{d} \bigg | &< \cfrac{1}{k^2} \\
		| h-k\sqrt{d}  | &< \cfrac{1}{k}\\
		 | h^2 -k^2d | &=|h+k\sqrt{d} | * |h-k\sqrt{d}|\\
		 &< \bigg| \cfrac{h}{k} + \sqrt{d} \bigg | < 2\sqrt{d}+1 
	\end{align*}

	This shows that for the convergents $\cfrac{h}{k} $ to $\sqrt{d}$, $h^2-dk^2$ takes only finitely many values. There exists $n$ which can be written as $h^2 - dk^2$ in infinitely many ways. The values of $h$ and $k$ mod $n$ have only finitely many possibilities but we have infinitely many pairs $(h,k)$ such that $h^2-dk^2=n$


	Choose two solutions $(h,k)$,$(h',k')$ where $h=h' \hspace{7pt} (n) $ and $k=k'\hspace{7pt} (n) $.

	$ $\\
	Let $A= \cfrac{h+k\sqrt{d}}{h'+k'\sqrt{d}}$. Claim $A$ is a unit in $\mathbb{Z}[\sqrt{d}].$ $ $\\[1em]
	Clearly $N(A) = \cfrac{N(h+k\sqrt{d})}{N(h'+k'\sqrt{d})} = \cfrac{n}{n} = 1$.
	Remains to show that $A \in \mathbb{Z}[\sqrt{d}]$.
	$ $\\[1em]
	$A= \cfrac{h+k\sqrt{d}}{h'+k'\sqrt{d}}  = \cfrac{(h+k\sqrt{d})(h'-k'\sqrt{d})}{h'^2 -dk'^2 } = \cfrac{(hh'-dkk')+(kh'-hk')\sqrt{d}}{n}$\\[2em]
	Recall $h=h'\hspace{7pt} (n) $ and $k=k'\hspace{7pt} (n) $. 
	$ $\\[1em]
	Therefore
	\begin{align*}
	hh'-dkk' = h^2-dk^2=n \equiv 0\hspace{7pt} (n)
	\end{align*}
	\vspace{-2em}
	\begin{align*}
		kh'-hk' \equiv kh -hk \equiv 0 \hspace{7pt} (n) 
	\end{align*}
	So $A \in \mathbb{Z}[\sqrt{d}]$ and $A$ is a unit with norm $1$ in $\mathbb{Z}[\sqrt{d}]$.
\end{proof}

\begin{theorem}
	Let $\alpha \in \mathbb{R}$ be irrational. If $\cfrac{a}{b} \in \mathbb{Q} $ with $\bigg |\cfrac{a}{b} - \alpha \bigg| < \cfrac{1}{2b^2}$ then $\cfrac{a}{b}$ is a convergent of $\alpha$  
\end{theorem}
In order to solve this, we will state and prove the following lemma:

\begin{lemma}
	Let $\alpha$ be an irrational real number $\cfrac{h_n}{k_n}$ and the $n^{th}$ convergent of $\alpha$. If $\cfrac{a}{b}$ is any rational number with $b>0$ and $b<k_{n+1}$ and $\cfrac{a}{b}$ is not a convergent then $|a-b\alpha| > |h_n-k_n\alpha|$
\end{lemma}

\begin{proof}
Consider these simultaneous equations:
	\begin{align*}
		h_nx+h_{n+1}y&=a\\
		k_nx+k_{n+1}y&=b
	\end{align*}
	The matrix
	$
	\begin{pmatrix}
		h_n & h_{n+1} \\ k_n & k_{n+1} 
	\end{pmatrix}$
	has determinant $\pm 1$ which means the solutions of $x,y$ are integers $x,y\neq 0$ because $\cfrac{a}{b} \neq \cfrac{h_n}{k_n}, \cfrac{h_{n+1}}{k_{n+1}}$. Plug $x=0$ or $y=0$ for a contradiction.\\[1em]
	Also $x,y$ have opposite signs because $b<k_{n+1}$ and $\alpha $ is between $\cfrac{h_n}{k_n}$ and $\cfrac{h_{n+1}}{k_{n+1}}$. \\[1em]
	Therefore $\cfrac{h_n}{k_n} - \alpha$ and $\cfrac{h_{n+1}}{k_{n+1}}-\alpha$ have opposite signs.\\[1em]
	Therefore $h_n-k_n\alpha$ and $h_{n+1}-k_{n+1}$ have opposite signs.\\[1em]
	Therefore $x(h_n-k_n\alpha)$ and $y(h_{n+1}-k_{n+1}\alpha)$ have the same sign.
	\begin{align*}
		| a-b\alpha| & = |(h_nx+h_{n+1}y)-(k_nx+k_{n+1}y)\alpha|\\
		&=| x(h_n-k_n\alpha) + y(h_{n+1}-k_{n+1}\alpha)|\\
		&=|x| * |h_n-k_n\alpha| + |y|*|h_{n+1}-k_{n+1}\alpha|\\
		&> |h_n-k_n\alpha|
	\end{align*}


\end{proof}
\begin{proof}
	Assume $\cfrac{a}{b}$ is not a convergent to $\alpha$, choose an $a$ such that $k_n\leq b < k_{n+1}$. By the lemma $|h_n-k_n\alpha| < \underbrace{|a-b\alpha|}_{<\cfrac{1}{2b}} = |b| * \underbrace{\bigg|\cfrac{a}{b} - \alpha \bigg | }_{<\cfrac{1}{2b^2}}$
	\\[1em]
	This means that $\bigg| \cfrac{h_n}{k_n}-\alpha \bigg| < \cfrac{1}{2bk_n}$
	\begin{align*}
		\cfrac{a}{b} \neq \cfrac{h_n}{k_n} \implies \bigg| \cfrac{a}{b} -\cfrac{h_n}{k_n} \bigg | \geq \cfrac{1}{bk_n}\\[2em]
	\end{align*}
	\begin{align*}
		\therefore \cfrac{1}{bk_n} \leq \bigg | \cfrac{a}{b} - \cfrac{h_n}{k_n} \bigg | = \bigg | \bigg(\cfrac{a}{b}-\alpha \bigg) + \bigg(a-\cfrac{h_n}{k_n} \bigg) \bigg|  \underbrace{<}_{\cfrac{1}{bk_n} < \cfrac{1}{bk_n} \text{\LARGE \lightning }} \cfrac{1}{2b^2} + \underbrace{\cfrac{1}{2bk_n}}_{\cfrac{1}{2bk_n} + \cfrac{1}{2bk_n} = \cfrac{1}{bk_n}}
	\end{align*}
	So $\cfrac{a}{b}$ must be a convergent.
\end{proof}








\end{document}
 

