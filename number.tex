\documentclass[11pt]{article}

\usepackage[left=3cm, right=3cm, top=3cm, bottom=3cm]{geometry}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{ragged2e}
%crossed out elements
\usepackage{cancel}
\usepackage{amssymb}
%lightning symbol
\usepackage{wasysym}
%position tables
\usepackage{placeins}
%use right curly braces
%\usepackage{mathtools}
%place text under sigmas and pi
\usepackage{mathtools}
%kappa%

\newenvironment{rcurly}{\left.\begin{aligned}}{\end{aligned}\right\rbrace}

\begin{document}


\numberwithin{equation}{subsection}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{definition}[theorem]{Defintion}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{lemma}[theorem]{Lemma}
%\newcommand{\R}{\mathbb{R}}
%\newcommand{\R}{\mathbb{Z}}
%\newcommand{\R}{\mathbb{C}}
%\begin{theorem}
%\begin{theorem}

\title{Number Theory}
\author{Vinesh Ramgi}
	%\date{}
	\maketitle


\newpage
	\begin{abstract}

		\centering{What did the number theorist say as he drowned?}\\[1em]
		Log, log, log, log....\\[2em]

		For an up to date version of this pdf, check my GitHub :)\\[1em]
https://github.com/vrvinny/number-theory
	\end{abstract}
\newpage
\tableofcontents{}
\newpage
	\section{Introduction/Review}
	\subsection{Introduction}
	Number Theory is the theory of the ring $\mathbb{Z}$ and other related rings. A ring (in this course) is a set $R$ with two binary operations $+$ and $*$ such that:
	\begin{itemize}
		\item ($R$, $+$) is an abelian group
		\item $*$ is associative, commutative and has an identity element $1$
		\item $x(y+z) = xy + xz \hspace{10pt} \forall x,y,z \in \mathbb{R} $

	\end{itemize}
Examples of rings:
	\begin{itemize}
		\item $\mathbb{Z}$ is a ring
		\item Every field is a ring, (e.g. $\mathbb{R}, \mathbb{C}, \mathbb{Q}$)
		\item $\mathbb{Z}/n$ \hspace{10pt} $\mathbb{Z}$ modulo $n$ = \{$0, \dots, n-1$\}
		\item $\mathbb{F}$[X] = \{ polynomials $f(x)$ with coefficients in $\mathbb{F}$


	\end{itemize}
	\subsection{Review}

	\subsubsection{Congruences}
	Let $n$ be a positive integer. Given $x,y \in \mathbb{Z}$, we say $x$ is congruentt to $y$ modulo $n$ if $x-y$ is a multiple of $n$.\\

	$x \equiv y (n)$  \hspace{10pt} or \hspace{10pt} $x \equiv y$ mod $n$
	
	\begin{flushleft}
	%\begin{align*}
		\textbf{E.g} \hspace{10pt} $2 \equiv 12 \hspace{5pt} (10)$\\
		\hspace{42pt}$\equiv  -8 \hspace{5pt} (10)$
	%\end{align*}
	\end{flushleft}
	

	We write $\mathbb{Z}/n$ for the ring of congruency classes modulo $n$, i.e. the elements are integer, with two of them regarded as the same if they are congruent modulo $n$.\\

	Since every integer is congruent to a unique integer in the set $\{0,\dots, n-1\}$, we have $\mathbb{Z}/n = \{0,\dots, n-1\}$.

	An element $x$ of $\mathbb{Z}/n $ is called "invertible" or a "unit" if $\exists y \in \mathbb{Z}/n$ such that $xy \equiv 1 (n)$.

	\begin{theorem}
$x$ is invertible modulo $n$ iff x and n are coprime
	\end{theorem}
	\textbf{Recall} Two numbers are coprime if their highest common factor is 1.

	Here's how we find the inverse of $x$ in $\mathbb{Z}/n$. Since $X$ and $n$ are coprime we can find $h, k \in \mathbb{Z}$ such that $hx+kn = 1 \implies hx = 1 \hspace{5pt} (n)$. So h is the inverse of $x$ modulo $n$.

	\begin{flushleft}
		\textbf{E.g} We'll find the inberse of 7 modulo 25 using Euclid's algorithm

		\begin{align*}
			25 &= 3\times7 + 4   &1=4-1(3) \hspace{15pt}\\
			7 &= 1\times4 + 3    &1= 4-1(7-1(4))&=2(4)-1(7)\\
			4&= 1\times3+1	     &1 = 2(25-3(7)) - 1(7) &= 2(25) - 7(7)
		\end{align*}

		\begin{align*}
			2(25) &- 7(7) = 1 \\
			&-7(7) = 1 \hspace{5pt}(25) \\
			\\(7^{-1}) &= -7= 18 \hspace{5pt} (25) \\
			7\times 18 &= 126 = 1 \hspace{5pt} (25) 
		\end{align*}
	\end{flushleft}

	We'll write $(\mathbb{Z}/n)^{\times}$ for the invertible elements in $\mathbb{Z}/n $\\
\begin{flushleft}
	%\begin{align*}
		\textbf{E.g} \\ $(\mathbb{Z}/3)^{\times}$ = \{ \cancel 0, 1, 2 \}\\ 
			$(\mathbb{Z}/6)^{\times}$ = \{ \cancel 0, 1, \cancel 2, \cancel 3, \cancel4, 5 \} 


	%\end{align*}
\end{flushleft}


\begin{theorem}
	$(\mathbb{Z}/n)^{\times}$ is a group with the operation of multiplicity.
\end{theorem}

	
	
	\subsubsection{Solving Linear Congruences}

Suppose we want to solve $ax\equiv b \hspace{5pt} (n)$ (given $a,b$ and $n$).

\begin{flushleft}
	\textbf{Case 1:} If $a$ is coprime to $n$ then we can find $a^{-1}$ modulo $n$ by Euclid's algorithm,\\ \hspace{40pt} $x \equiv a^{-1}b \hspace{5pt} (n) $


	\textbf{Case 2:} If $a$ is a factor of $n$, then there are two possibilities:\\
	\hspace{40pt} \textbf{2a)} if $a$ is also a factor of $b$ then $ax \equiv b$ \hspace{3pt} $(n)$ is equivalent to $x = \frac{b}{a} \hspace{10pt} (\frac{n}{a})$\\
	\hspace{40pt} \textbf{2b)} if $a$ is not a factor of $b$ then there are no solutions

\end{flushleft}
\newpage 
\begin{flushleft}
	\textbf{E.g.} Solve $5x = 11 \hspace{5pt} (13)$\\
	This is case 1 because 5 and 13 are coprime
	\begin{align*}
		13 &= 2\times5 + 3   &1=(3) -1(2) \\
		5 &= 1\times3 + 2 &1=(3) -1(5-1(3)) = 2(3) -(5)\\
		3 &= 1\times2 + 1 & 1 =2(13 -2(5)) - (5) = 2(13)-5(5) \\
	\end{align*}
	\begin{align*}
		1\equiv& -5(5) \hspace{10pt} (13)\\
		 5^{-1} \equiv& -5 \equiv 8\hspace{10pt} (13)\\
		 \\
		5x\equiv& 11 \hspace{10pt} (13)\\
		x \equiv 8 \times 11 \equiv& 88 \hspace{10pt} (13)\\
		\\
		x \equiv & 10 \hspace{10pt} (13)
	\end{align*}
\end{flushleft}

\begin{flushleft}
	\textbf{E.g.} Solve $7x \equiv 84 \hspace{10pt} (490)$\\
	
	\hspace{25pt} 7 is a factor of 490 so case 2)\\
	\hspace{25pt} 7 is a factor of 84 so case 2a) \\
	\vspace{5pt}
	\hspace{25pt} $7x \equiv 84 \hspace{10pt}(490)$\\
	\hspace{25pt} $x \equiv 12 \hspace{10pt} (70)$
\end{flushleft}

\begin{flushleft}
	\textbf{E.g.} Solve $7x \equiv 85 \hspace{10pt} (490)$\\
	\hspace{25pt} This is case 2b (7 is a factor of 490 but not of 85) $\therefore$ No solutions	    \\
	\vspace{5pt}
	\hspace{25pt} $7x \equiv 85 \hspace{10pt} (490)$\\
	$\implies \hspace{2pt}7x = 85 + 490y $ for some $y \in \mathbb{Z}$\\
	$\implies \hspace{2pt}0 \equiv 1 \hspace{10pt} (7) $
\end{flushleft}


\begin{flushleft}
	\textbf{E.g.} Solve $6x \equiv 3 \hspace{10pt} (21) $\\
	\hspace{22pt} This is neither case 1 nor case 2 but we can rewrite as: \\
	\vspace{5pt}
	\hspace{26pt}$3(2x) \equiv 3 \hspace{10pt} (21)$\\
	\vspace{5pt}
	\hspace{26pt}By case 2 we can solve for $2x \equiv 1 \hspace{10pt} (7) $\\
	\hspace{26pt}but now 2 is invertible modulo 7 so now solve by case 1\\
	\vspace{5pt} 
	\hspace{26pt} $\therefore x\equiv 4 \hspace{10pt} (7)$
\end{flushleft}

\subsection{Chinese Remainder Theorem}
Suppost we know the congruency class of $x$ modulo 10. Then we can work out its congruency class mod 2 and mod 5.\\
\textbf{E.g.} if $x \equiv 7 \hspace{5pt}(10)$, then $x \equiv 1 \hspace{5pt} (2) $ and $x \equiv 2 \hspace{5pt} (5) $  \vspace{5pt}\\
Then the Chinese Remainder Theorem allows us to do the opposite, i.e. if we know $x$ modulo 2 and modulo 5, then we can work out the value of $x$ modulo 10.\\
\newpage
Suppose $n$ \& $m$ are coprime positive integers, let $a \in (\mathbb{Z} / n)$ and $b \in (\mathbb{Z}/m)$ then there is a unique

\hspace{10pt} $x \in (\mathbb{Z}/nm)$ such that $x \equiv a \hspace{10pt} (n)$\\
\hspace*{136pt} $x \equiv b \hspace{10pt} (m)$ \\
\textbf{Proof of existence part:}\\
\vspace*{5pt}Since $n$ \& $m$ are coprime, we can find $h,k \in \mathbb{Z}$ such that $hn + km = 1$.\\
\vspace{5pt}Let $x = hnb + kma$\\
Check that this a solution to both congruences:
	\begin{align*}	
		\hspace{-15em} x &\equiv kma \hspace{10pt} (n) \\
		\hspace{-15em} x &\equiv (1-hn)a \hspace{10pt} (n) \\
		\hspace{-15em} x &\equiv (1)a \hspace{10pt} (n)\\ 
		\hspace{-15em} x &\equiv a \hspace{10pt}(n) 
	\end{align*}
\vspace{5pt}Similarly, this holds for $x \equiv b \hspace{10pt} (m)$.\\
\textbf{E.g.} Solve the simultaneous congruence:
\begin{flushleft}
	\hspace{10pt} $x \equiv 3 \hspace{10pt} (8)$\\
	\hspace{10pt} $x \equiv 4 \hspace{10pt} (5)$
\end{flushleft}
By the Chinese Remainder Theorem, there is unique solution modulo 40. To find the solution we let $x = hnb + kma $. \\ First find $h,k$ by Euclid's algorithm.
	\begin{align*}
		8 &= 1\times5 + 3   &1=(3) -1(2) \\
		5 &= 1\times3 + 2 &1=(3) -1(5-1(3)) = 2(3) -(5)\\
		3 &= 1\times2 + 1 & 1 =2(8 -2(5)) - (5) = 2(8)-5(5) \\
	\end{align*}
	\begin{align*}
		\hspace{-15em}\therefore x &= (2*8*4) - (3*5*3)\\
		\hspace{-15em} x &= 64 - 45 \\ 
		\hspace{-15em} \implies x &\equiv 19 \hspace{10pt} (40) 
	\end{align*}

Remark: We can use the Chinese Remainder Theorem to solvoe a congruence modulo $nm$, by first solving mod $n$ and then mod $m$ and then combining the results.\\
\textbf{E.g.} Solve $x^{2} \equiv 2 \hspace{5pt} (119)$. Note 119 = 7 * 17.\\
By CRT this is equivalent to:
\begin{align*}
	x^{2} & \equiv 2 \hspace{10pt}(7)  & \implies  x&\equiv \pm3 \hspace{10pt} (7)\\
	x^{2} & \equiv 2 \hspace{10pt} (17) & \implies x&\equiv \pm6 \hspace{10pt} (17)
\end{align*}

Now we combine the solutions:
\begin{align*}
	17 & = 2*7+3  &1=&(7) - 2(3)\\
	7 &= 2*3+1   &1 =&(7) - 2(17-2(7))\\
	& &  1=&5(7) -2(17)
\end{align*}
Since 
\begin{align*}
	x &\equiv \pm 3\hspace{10pt}(7)  \hspace{50pt}\text{We get } x \equiv 5*7*(\pm 6) - 2*17*(\pm 3) \\
	x &\equiv \pm 6 \hspace{10pt} (17) \hspace{81pt} x \equiv \pm 11 \text{  or} \pm 45 \hspace{10pt} (119) 
\end{align*}

\subsection{Prime numbers}

\begin{definition}
An integer $p\geq 2 $ is a prime number if the only factors of $p$ are $\pm 1, \pm p$
\end{definition}

We'll write $\mathbb{F}_p$ for $\mathbb{Z}/p$. This is because:
\begin{theorem}
	If p is prime, then $\mathbb{F}_p$ is a field 
\end{theorem}

\begin{proof}
	Need to check that the non-zero elements of $\mathbb{F}_p$ all have inverses.\\
	
	Let $x \in \mathbb{F}_p$ with $x \not \equiv 0 \hspace{7pt}(p)$ i.e. $x$ is not a multiple of $p$\\
	
	$\therefore$ hcf($x,p$) $=1$\\
	
	$\therefore x$ \& $p$ coprime
\end{proof}
\subsection{Fermat's Little Theorem}
\begin{theorem}
	Let $p$ be a prime number. If $x$ is not a multiple of $p$ then $x^{p-1} \equiv 1 \hspace{7pt} (p)$
\end{theorem}

\begin{proof}
	$x \in \mathbb{F}_{p}^{x} = \{1,2,\dots, p-1\}$ a group with $p-1$ elements.

	Let $n$ be the order of $x$ in this group. 
	
	(order of $x$ is smallest $n>0$ such that $x^{n} \equiv 1 \hspace{7pt} (p) )$

	By corollary to Lagrange's Theorem, $p-1$ is a multiple of $n$\\

	$x^n \equiv 1\hspace{7pt} (p) $

	$x^{p-1} \equiv 1 \hspace{7pt} (p)$
\end{proof}
\begin{theorem}
Lagrange's Theorem: If $H$ is a subgroup of a finite group $G$, then $|H|$ is a factor of $|G|$.
\end{theorem}

\begin{corollary}
Order of an element is a factor of $|G|$
\end{corollary}
We can use Fermat's Little Theorem to do calculations.\\
\textbf{E.g.} Calculate $10^{100}$ modulo $19$\\

By Fermat's Little Theorem: $10^{18} \equiv 1 \hspace{7pt} (19)$ 

\begin{align*}
	10^{100} &\equiv  (10^{18})^{5} * 10^{10} \hspace{7pt} (19)\\
	& \equiv  100^{5}\hspace{7pt} (19)\\
	& \equiv  5^5\hspace{7pt} (19) \\
	& \equiv 25 * 125 \equiv 6*11 \equiv 9 \hspace{7pt} (19) 
\end{align*}

Also using Fermat's Little Theorem we can solve congruence of the form $x^a \equiv b\hspace{7pt} (p) $ as long as $p$ prime and $a$ inverible modulo $p-1$

\subsubsection{General method to solve $x^a \equiv b\hspace{7pt} (p)$}


Let
\begin{align*} 
c = a^{-1}\hspace{7pt} (p-1)\\
	ac = 1+ (p-1)r
\end{align*}
Raise both sides of the congruence to power $c$:
\begin{align*}
	\therefore x^{ac}  &\equiv b^{c}\hspace{7pt} (p)\\
	 x^{1+(p-1)r} &\equiv b^{c}\hspace{7pt}(p)\\
	 x &\equiv b^{c}
\end{align*}
So the solution is $x \equiv b^c\hspace{7pt} (p)$\\
\textbf{E.g.} Solve $x^5 \equiv 2\hspace{7pt} (19) $

19 is prime and 5 is coprime to 18.

Find $c = 5^{-1} $ mod $ 18$

\begin{align*}
	18 =& 3*5 +3& 1=& 2*3 - 5&\\
	5 =& 2*3 - 1 & 1=&2(18-3*5) - 5&\\
	& & 1=&2*18 - 7*5&\\
	\\
	&&\therefore 5^{-1} &\equiv -7\hspace{7pt} (18)\\
	&&&\equiv 11\hspace{7pt} (18)\\ 
	\therefore x &\equiv 2^{11}\hspace{7pt} (19)\\
	& \equiv 2048 \hspace{7pt}(19)\\
	& \equiv 15\hspace{7pt} (19)
\end{align*}

\subsection{Fundamental Theorem of Arithmetic}
If $n$ is a positive integer then there is a unique factorisation, $n= p_1p_2\dots p_r$ with $p_i$ prime. "Unique" means up to reordering the primes $p_1$,$\dots$, $p_r$.
Showing that a factorisation exists is easy. For the uniqueness part we use:

\subsubsection{Euclid's Lemma}

\begin{lemma}
Suppose $p$ prime, and $p | ab$. Then $p| a$ or $p|b$.
\end{lemma}
To prove Euclid's lemma we use Bezout's lemma.
\begin{proof}
	Assume $p|ab$ but $p\not|\hspace{5pt}a $. Then hcf($a,p$) = 1
	
	By Bezout's lemma, $\exists h,k $ such that:
	
	$1 =ha + kp$ 

	$b = hab + kpb$\hspace{50pt} Both $hab$ and $kpb$ are multiples of p. \\$\therefore p | b$
\end{proof}

\subsubsection{Checking whether a number is prime}
If $n$ is composite then the smallest factor of $n$ is (apart from 1) is a prime number $p\leq \sqrt{n}$, i.e. to show that $n$ is prime, we just need to show that none of the primes up to $\sqrt{n}$ are factors of n.\\
\textbf{E.g.} Is 199 prime? 

$\sqrt{199} < 15$ since $15^2 = 225$\\
The primes up to 15 are $\cancel 2,\cancel 3,\cancel 5,\cancel 7,\cancel 11,\cancel 13$\hspace{20pt} 199 $\equiv$ 3\hspace{7pt} (7)

\hspace{190pt} 199 $\equiv $ 4\hspace{7pt} (13) 

\hspace{190pt} $\therefore$ 199 is prime

\begin{theorem}
There are infinitely many primes
\end{theorem}

\begin{proof}
Suppose $p_1, \dots, p_n$ are all the primes.

	\hspace{18pt}Let $N = p_1\dots p_n + 1$

	\hspace{18pt}$\therefore N$ has no prime factors \lightning 
\end{proof}
\flushleft{}
Similarly there are infinitely many primes $p \equiv 2 \hspace{7pt} (3)$
\begin{proof}
Assume there are only finitely many primes, call them $p_1,p_2,\dots,p_r$. All other primes\\ 
	\hspace{31pt}	are either 3 or are congruent to 1 mod 3.
	
	\hspace{35pt}Let $N=3p\dots p_{r-1}$. Since $3 \not | \hspace{5pt}N$ and $p_i \not |\hspace{5pt} N $ then all the prime factor of $N$ are 
	
	\hspace{35pt}congruent to 1 mod 3.


	\hspace{35pt}$\therefore N \equiv 1\hspace{7pt} (3) \implies$ because clearly $N \equiv 2\hspace{7pt} (3)$ 
\end{proof}


\newpage
\section{Elementary Number Theory}

\subsection{Euler Totient Function}
Recall $(\mathbb{Z}/n)^\times$ is the group of invertible elements in $\mathbb{Z}/n$.

\textbf{E.g.} $(\mathbb{Z}/6)^\times = \{ 1,6\} $

\hspace{23pt} $(\mathbb{Z}/8)^\times = \{1,3,5,7\}$

These are groups with the multiplication operation, * . The multiplication table for $(\mathbb{Z}/8)^\times$ is given below. 

\centering
	\begin{tabular}{l|llll}
		* & \multicolumn{1}{l}{1} 
		 & \multicolumn{1}{l}{3} 
		 & \multicolumn{1}{l}{5} 
		 & \multicolumn{1}{l}{7} \\ \hline
		1 & 1 & 3 & 5 & 7 \\
		3 & 3 & 1 & 7 & 5 \\
		5 & 5 & 7 & 1 & 3 \\ 
		7 & 7 & 5 & 3 & 1 \\ 
	\end{tabular}


\begin{definition}
	The Euler Totient function is $\phi(n) = |(\mathbb{Z}/n)^\times | $
\end{definition}
\raggedright
\begin{align*}	
	\textbf{E.g.} \hspace{10pt}\phi(6) &= 2 &\hspace{200pt}\\
	  \phi(8) &= 4 &\hspace{400pt}
\end{align*}
If $p$ prime then $(\mathbb{Z}/p)^\times = \{1, \dots, p-1 \}$ so  $\phi(p) = p-1$

\begin{theorem}
	Euler's Theorem- Let $x \in (\mathbb{Z}/n)^\times$ then $x^{\phi(n)} \equiv 1\hspace{7pt} (n) $ 
\end{theorem}
In the case $n=p$ is prime, this is just Fermat's Little Theorem.



\begin{proof}
	Let $d$ be the order of $x$, i.e. $x^{d} \equiv 1 \hspace{7pt} (n) $.
	By a corollary to Lagrange's Theorem, $d$ is a factor of $\phi(n) \implies x^{\phi (n)} \equiv 1 \hspace{7pt} (n)$ 
\end{proof}
We can use Euler's theorem to solve congruences and calculate powers mod $n$. To use the theorem, we need a quick way of calculating $\phi(n) $.

\begin{lemma}
	Let $n=p^a$ where $p$ is prime $a>0$. Then $\phi(n) = (p-1)p^{a-1}$
\end{lemma}
\textbf{E.g.} $\phi(8) = \phi(2^3) = (2-1)2^{3-1} = 4$
\begin{proof}
An integer is coprime to $p^a$ as long as it's not a multiple of $p$.\\
	$\therefore $ The elements of $\mathbb{Z}/p^a$ which are not invertible are the multiples of $p$. $0, p, 2p, \dots, p^a - p$.\\
	There are $p^a-1$ of these:\vspace{10pt}\\
	$\therefore |(\mathbb{Z}/p^a)^\times| = p^a - p^{a-1} = (p-1)p^{a-1}$
\end{proof}


\begin{theorem}
	Let $n$ and $m$ be coprime. Then there is an isomorphism:
	\begin{equation*}
		(\mathbb{Z}/nm)^\times \cong (\mathbb{Z}/n)^\times * (\mathbb{Z}/m)^\times
	\end{equation*}
\end{theorem}
We'll use the theorem before we prove it.\\

\textbf{Remark}: If $G$ and $H$ are groups, $G\times H  = \{ (x,y): x \in G, y \in H \}$, then $G\times H$ is a group with the operation , $(x, y)(x',y') = (xx',yy')$ and $G \times H$ is the "direct product" of $G$ and $H$ 
\begin{corollary}
	If $n$ and $m$ are coprime then $\phi(nm) = \phi(n)\phi(m)$
\end{corollary}
\begin{proof}
	\begin{align*}
		\phi(nm) = | (\mathbb{Z}/n)^\times | &= |(\mathbb{Z}/n)^\times * (\mathbb{Z}/m)^\times |\\
		&= |(\mathbb{Z}/n)^\times| * |(\mathbb{Z}/m)^\times|\\
		&= \phi(n) \phi(m)
	\end{align*}
\end{proof}
\begin{corollary}
	(Corollary of the corollary): Suppose $n = p_{1}^{a_1} \dots p_{r}^{a_r}$ with $p_1, \dots p_r$ distinct primes and $a_i > 0 $. Then 
	\begin{equation*}
		\phi(n) = (p_1 - 1)p^{a_1 - 1} \hspace{2pt}* \dots *\hspace{2pt} (p_r - 1)p_{r}^{a_r -1} 
	\end{equation*}
\end{corollary}

\begin{proof}
	Since $p_1^{a_1}, \dots, p_r^{a_r}$ are coprime,\\
	\begin{align*}
		\phi(n) & = \phi(p_1^{a_1}) \dots \phi(p_r^{a_r})&\text{by the corollary}\\
		& = (p_1 - 1)p_1^{a_1 - 1} \dots (p_r -1)p_r^{a_r-1} &\text{by the lemma} 
	\end{align*}
\end{proof}

\textbf{E.g.} Calculate $\phi(200)$
\begin{align*}
	\phi(200) &= \phi(2^3 * 5^2) &\hspace{300pt}\\
	&= (2-1)2^{3-1} * (5-1)5^{2-1}\\
	& = 4*4*5\\
	& = 80
\end{align*}

\begin{theorem}
	Suppose $n$ and $m$ are coprime, then $(\mathbb{Z}/nm)^\times \cong (\mathbb{Z}/n)^\times * (\mathbb{Z}/m)^\times$\\
	The isomorphism is the map $x \mapsto (x \mod n, x \mod m)$
\end{theorem}

\textbf{E.g.} $n=4 $, $m=5$ 
\begin{align*}
	(\mathbb{Z}/4)^\times &= \{1,3\}\\
	(\mathbb{Z}/5)^\times &= \{1,2,3,4\}\\
	\therefore (\mathbb{Z}/4)^\times * (\mathbb{Z}/5)^\times &= \{ (1,1), (1,2), (1,3), (1,4),\\
	&\hspace{20pt} (3,1), (3,2), (3,3), (3,4)\}\\
	(\mathbb{Z}/20)^\times &= \{1,3,7,9,11,13,17,19\}
\end{align*}
The isomorphism is: 
\begin{align*}
	1&\mapsto(1,1)  &11\mapsto(3,1)\\
	3&\mapsto(3,3)  &13\mapsto(1,3)\\
	7&\mapsto(3,2)  &17\mapsto(1,2)\\
	9&\mapsto(1,4)  &19\mapsto(3,4)
\end{align*}

\begin{proof}
	Let $\Phi: \mathbb{Z}/nm \mapsto \mathbb{Z}/n * \mathbb{Z}/m$\\
	\hspace{30pt} $\Phi(x) = (x\mod n, x \mod m)$ \\
	\hspace{30pt} This is a bijection by the Chinese Remainder Theorem.\\
	\hspace{30pt} We'll next show that $x$ is invertible mod $nm \iff x$ is invertible mod $n$ and mod $m$
	$(\implies)$ Suppose $x$ is invertible mod $nm$ 
	%\vspace{10pt}
	\begin{align*}
		\text{Let } xy &\equiv 1\hspace{7pt}(nm) \hspace{285pt}\\
		\therefore xy & \equiv 1\hspace{7pt} (n)\\
		xy &\equiv 1 \hspace{7pt} (m)
	\end{align*}
	\hspace{34pt} $\therefore x$ invertible mod $n$ and $m$ 

	$(\impliedby) $ Suppose $x$ invertible mod $n$ and $m$
	\begin{align*}
		xa &\equiv 1\hspace{7pt} (n)\\
		xb &\equiv 1\hspace{7pt} (n)\hspace{270pt}
	\end{align*}
	\hspace{36pt}By the Chinese Remainder Theorem, $\exists y$ such that $y \equiv a\hspace{7pt} (n)$\\ 
	$\hspace{281pt} y \equiv b \hspace{7pt} (m)$
\begin{equation*}
\begin{rcurly}
	\therefore xy &\equiv xa \equiv 1\hspace{7pt} (n)\\
	&\equiv xb \equiv 1  \hspace{7pt} (m) \\
\end{rcurly}
	\implies xy \equiv 1 \hspace{7pt}  (nm) \text{    by the Chinese Remainder Theorem} 
\end{equation*}
	We've shown that $\Phi$ gives a bijection between $(\mathbb{Z}/nm)^\times$ and $(\mathbb{Z}/n)^\times$ * $(\mathbb{Z}/m)^\times$. We'll next check that $\Phi (xy) = \Phi (x) \Phi (y)$.\\
	\begin{align*}
		\Phi(xy) &= (xy \mod n, xy \mod m)\\
		& =(x \mod n , x \mod m) * (y \mod n, y \mod m)\\
		&= \Phi (x) \Phi(y)
	\end{align*}
\end{proof}
\subsection{Euler's Theorem}
If $x \in (\mathbb{Z}/n)^\times $ then $x^{\phi{(n)}} \equiv 1\hspace{7pt} (n) $ and $	\phi(p_1^{a_1} \dots p_r^{a_r}) = (p_1-1) p^{a_1 -1} \dots (p_r-1)p_r^{a_r-1}$\\ \vspace{7pt}
\textbf{E.g.} Calculate $7^{135246872002} \mod 10000$ 
\begin{align*}
	&7 \text{ coprime to  10000 so } 7^{\phi(10000)} \equiv 1\hspace{7pt} (10000) \hspace{180pt}\\
	& 10000 = 2^4 *5^4\\
	\therefore &\phi(10000) = (2-1)2^3 * (5-1)*5^3 = 8*500\\
	&7^{4000} \equiv 1 \hspace{7pt}(10000) \implies 7^n \text{ depends only on } n \text{ mod 4000}\\
	&135246872002 \equiv 2 (4000)\\
	\therefore& 7^{135246872002} \equiv 7^2 \equiv 49\hspace{7pt} (10000)
\end{align*}
We can also use Euler's THeorem to solve congruence with powers
\newpage
\subsubsection{Solving equations of the form $x^{a} \equiv b \hspace{7pt} (n)$}


Supose we want to solve $x^a \equiv b\hspace{7pt} (n)$ where $b$ is coprime to $ n$ and $a$ is coprime to $\phi(n)$. Clearly any solution $x$ must be coprime to $n$ by Euler's Theorem $x^{\phi(n)} \equiv 1\hspace{7pt} (n)$.\\
$\therefore$ The congruency class of $x^y \mod n $ depends only $y \mod \phi(n)$ \\ \vspace{7pt}

Let 

\begin{equation*}
	c =a^{-1} \mod \phi(n)
\end{equation*}
Raise both sides of the congruence to power $c$:
\begin{equation*}
	x^{ac} \equiv x^1 \equiv b^c\hspace{7pt} (n) 
\end{equation*}
$\therefore $ The solution is $x \equiv b^c \hspace{7pt} (n)$
\\[1em]


\textbf{E.g.} $x^7 \equiv 3\hspace{7pt}(50) $ 
\\3 is coprime to 50,
\begin{align*}
	50 &= 2*5^2 \\ \implies \phi(50) &= 1*4*5 = 20
\end{align*}
7 is coprime to $\phi(50)$. To solve, we need to find
\begin{align*}
	c &\equiv 7^{-1} \mod \phi(50)\\
	&\equiv 3 \hspace{7pt} (20) \\[1em]
	x &\equiv 3^3 \equiv 27\hspace{7pt} (50) 
\end{align*}


\textbf{E.g.} $x^{27} \equiv 5\hspace{7pt} (123)$\\
5 is coprime to 123,

\begin{align*}
	123 &= 3*41\\
	\implies \phi(123) &= 2*40 = 80
\end{align*}
27 is coprime to 80

To solve, we find $27^{-1} \mod 80$ 
\begin{align*}
	80 &= 3*27 - 1\\
	\implies 1 &= 3*27 - 80 \\[1em]
	27^{-1} &= 3\\[1em]
	x &= 5^3\\
	x &= 125 \equiv 2\hspace{7pt} (123)
\end{align*}

\subsection{Primitive roots}
Recall, let $G$ be a finite group. $G$ is called a cyclic group if $\exists x \in G$ such that, every element in $G$ has the form $x^n$ for some $n \in \mathbb{Z}$, i.e. $G = \{ 1,x,x^2, \dots , x^{n-1}\}$ where $n$ is the order of $x$, equivalentl the order of $x$ is $|G|$. The element $x$ is called a generator of $G$.

\begin{theorem}
	(Gauss' Theorem), For ever prime number $p$, the group $\mathbb{F}^{\times}_{p}$ is cyclic
\end{theorem}
\begin{definition}
	A generator of $\mathbb{F}^{\times}_p$ is called a primitive root. Equivalently, this is an element of order $p-1$
\end{definition}
\textbf{E.g.} $p=7, x=3$ We'll see that 3 is a primitive root modulo 7
\begin{align*}
	\text{Powers of 3 in }F^{\times}_7: && 3^0 =1 && 3^3 \equiv 6 \hspace{7pt}(7) && 3^6 \equiv 1\hspace{7pt} (7)\\
	&& 3^1= 3 && 3^4 \equiv 4 \hspace{7pt}(7) \\
	&& 3^2 \equiv 2\hspace{7pt} (7) &&3^5 \equiv 1 \hspace{7pt} (7)
\end{align*}
so 3 is a primitive root modulo 7.
There is a quicker way to check whether $x$ is a primitive root.

\begin{proposition}
	Let $x \in \mathbb{F}^{\times}_p$, then $x$ is a primitive root modulo $p$ if and only if for every prime factor $q$ of $p-1$:
	\begin{equation*}
		x^{\frac{p-1}{q}} \neq 1\hspace{7pt} (p)
	\end{equation*}
\end{proposition}

\begin{proof}
Assume the second statement is false, so $\exists$ prime factor $q$ of $p-1$ such that:
	\begin{align*}
		&x^{\frac{p-1}{q}} \equiv 1\hspace{7pt} (p) \hspace{0pt} &\therefore \text{order of } x \leq \frac{p-1}{q} < p-1\\
&& \therefore x \text{ is not a primitive root}
	\end{align*}
Conversely, assume $x$ is not a primitive root, so $x$ doe not have order $p-1$. But the order of $x$ is a factor of $p-1$.\\
Suppose the order of $x$ is $\frac{p-1}{d}$, $d>1$.\\

Let $q$ be a prime factor of $d  \implies q | p-1$ \\

	$\frac{p-1}{q}$ is a multiple of $\frac{p-1}{d}$ but $x^{\frac{p-1}{q}} \equiv 1\hspace{7pt} (p) \implies x^{\frac{p-1}{q}} \equiv 1 \hspace{7pt} (p)$

\end{proof}

\textbf{E.g.} $p=29$\\
By the proposition $x$ is a primitive root mod 29 $\iff x^{28/2} \not \equiv 1\hspace{7pt} (29)$ and \\
\hspace{259pt} $x^{28/7} \not \equiv 1 \hspace{7pt} (29)$\\[1em]

\hspace{230pt} $\iff x^{14} \not \equiv 1 \hspace{7pt} (29) $ and\\
\hspace{259pt} $x^4 \not \equiv 1\hspace{7pt} (29)$ 


\begin{align*}
	\text{Try }x=2: &&2^4 &\equiv 16 \not \equiv 1\hspace{7pt} (29)  \\
	&& 2^{14} &\equiv 128^2 \equiv 12^2 \equiv 144 \equiv -1 \hspace{7pt} (29)\\
	\therefore 2 \text{ is a primitive root mod 29}
\end{align*}

Another trick to speed up the calculation:\\
$\mathbb{F}_p$ is a field $\therefore$ every polynomimal of $d$ has no more than $d$ in $\mathbb{F}$ (proved in 2201).\\
\hspace{55pt} $\therefore$ if $x^2 \equiv 1 \hspace{7pt} (p)$ then $x \equiv \pm 1 \hspace{7pt} (p)$
\\[1em]  


This means that checking whether $x^{14} \equiv 1 \hspace{7pt}(29)$ is equivalent to checking whether $x^7 \equiv \pm 1 \hspace{7pt} (29)$.
\\[1em]

\textbf{E.g} 3 is also a primitive root modulo 29

\begin{align*}
	3^2& \equiv 9 \not \equiv \pm 1 \hspace{7pt} (29) &&&&&&&&&\\
	3^4& \equiv 1 \hspace{7pt} (29)\\[1em]
	3^7& \equiv 27^2 * 3 \hspace{7pt} (29)\\
	&\equiv (-2)^2 * 3 \equiv 12 \hspace{7pt} (29)\\
	&\equiv \pm 1 \hspace{7pt}(29) \\[1em]
	&\therefore 3^{14} \not \equiv 1 \hspace{7pt} (29)
\end{align*}

\subsection{Roots of unity and Cyclotomic Polynomials}
A complex number $\zeta$ is called an $n^{th}$ root of unity if $\zeta ^n = 1$. The $n^{th}$ roots of unity are $e^{2\pi i \frac{a}{n}}$ for $a = \{0, 1, \dots, n-1\} $\\
We call $\zeta$ a primitive $n^{th}$ root of unity if $n$ smaller power than $\zeta^n$ is equal to 1, i.e. $\zeta$ has order $n$ in $\mathbb{C}^\times$ if $\zeta$ is not a primitive $n^{th}$ root of unity $\zeta = e^{2\pi i \frac{b}{d}}$ where $b = \{0,\dots, d-1\}$ for $d<n$\\
$\therefore \frac{a}{n} = \frac{b}{d}$\\[1em]
The cancellation happens when $a$ is not coprime to $n$. This shows that the primitive $n^{th}$ of unity are $e^{2\pi i \frac{a}{n}}$, $a \in (\mathbb{Z}/n)^\times$.

\begin{corollary}
	There are exactly $\phi(n)$ primitive $n^{th}$ roots of unity
\end{corollary}
We'll actually prove a more precise version of Gauss' Theorem.
\begin{theorem}
	For every factor $d$ of $p^{-1}$ there are $\phi(d)$ elements in $\mathbb{F}^{\times}_{p}$ of order d.
\end{theorem}
\begin{definition}
	The $n^{th}$ cyclotomic polynomial is:
	\begin{equation*}
		\Phi_{n} (x) = \Pi_{\substack{\text{primtive }\\ n^{th} \text{roots}\\ \text{of unity } \zeta }  }(X- \zeta)  
	\end{equation*}
	i.e $\zeta ^n = 1 $ and no smaller power of $\zeta$ is 1, $\zeta = e^{2 \pi i \frac{a}{n} }, a \in (\mathbb{Z}/n)^\times$
\end{definition}
This has degree $\phi(n)$.\\[1em]
\newpage{}
\textbf{E.g.} n=4\\
Primitive  $4^{th}$ roots of unity are $i,-i$:
\begin{align*}
	\Phi_4(x) &= (x-i)(x-(-i))&&&&&&\\
	&= x^2 + 1
\end{align*}

\begin{lemma}
	For every $n>0$:
	\begin{equation*}
		x^n - 1 = \Pi_{\substack{\text{factors}\\ d \text{ of } n }} \Phi_{d} (x)
	\end{equation*}
\end{lemma}
\textbf{E.g.} Calculate $\Phi_6 (x)$


\begin{align*}
	\text{By the lemma} &&&& x^6 -1 &= \Phi_1 \Phi_2 \Phi_3 \Phi_6 &&&& x^6-1 = (x^3 - 1) \Phi_2 \Phi_6 \\
	&&&& x^3 -1 &= \Phi_1 \Phi_3 
\end{align*}
\begin{align*}
	\therefore \Phi_6 = \frac{x^6-1}{(x^3-1(x+1)} = \frac{x^3+1}{x+1} =x^2-x+1
\end{align*}
Let $p$ be a prime number. A primitive root mod $p$ is an $x \in \mathbb{F}_p^{\times}$, such that $x$ generates $\mathbb{F}^\times_p$. Equivalently order = $p-1$

\subsubsection{How to calculate $\Phi_n(x)$}
\begin{lemma}
	$x^n - 1 = \Pi_{\substack{d|n}} \Phi_d(x)$ 
\end{lemma}

\textbf{E.g.} $n=4$
\begin{align*}
	x^4-1 &= \Phi_1 \Phi_2 \Phi_4 && && \Phi_1 = x-1\\
	&&&&& \Phi_2 = (x-(-1)) = x+1\\
	&&&&& \Phi_4 = (x-i)(x-(-i))= x^2+1\\
	& =(x-1)(x+1)(x^2+1)
\end{align*}

\begin{proof}
	\begin{equation*}
x^n - 1 = \Pi_{\substack{\\\zeta \text{ is an }\\ n^{th} \text{ root of}\\ \text{unity}}} (x- \zeta)
	\end{equation*}
		
		but every $n^{th}$ root of unity is a primitive $d^{th}$ root of unity for some $d|n$.\\
	\begin{equation*}
		x^{n} = \Pi_{\substack{d|n} } (\Pi_{\substack{\text{primitive} \\d^{th} \text{roots} \\ \text{of unity} }}  (x-\zeta) )= \Pi_{d|n} \Phi_x (x)
	\end{equation*}
\end{proof}
\newpage
\textbf{E.g.} Calculate $\Phi_5(x)$
\begin{align*}
	x^5-1  &= \Phi_1(x) \Phi_5(x) &&&&\\
	&=(x-1) \Phi_5(x)\\[1em]
	\Phi_5(x) &= \frac{x^5-1}{x-1} = 1+x+x^2+x^3+x^4 
\end{align*}
More generally if $p$ prime then $x^p-1 = (x-1) \Phi_p(x) \implies \Phi_p(x) = 1+x+\dots +x^{p-1}$

\textbf{E.g.} Calculate $\Phi_8(x)$
\begin{align*}
	x^8-1 &= \Phi_1(x) \Phi_2(x) \Phi_4(x) \Phi_8(x) &&&&&\\[1em]
	x^4-1 &= \Phi_1(x) \Phi_2(x) \Phi_4(x) \implies \Phi_8(x) = \frac{x^8-1}{x^4-1} = x^4+1 
\end{align*} 

\begin{corollary}
	$\Phi_n(x)$ has coefficients in $\mathbb{Z}$
\end{corollary}

\begin{proof}
	$\Phi_n(x)$ = \LARGE{$\frac{x^n-1}{\Pi_{\substack{d|n \\ d\neq n}}\Phi_d(x) }$}\\[0.5em]
	\normalsize
We'll prove the corollary by induction on $n$, clearly true when $n=1$. Assume $\Phi_d$ has integer coefficients $\forall d<n$.

It is proved in Algebra 3 (MATH2201) that, if $f,g \in \mathbb{Z}[X] $ and $g$ monic then $f=qg+r$ where $deg(r) < deg(g)$ and $g,r \in \mathbb{Z}[x]$. \\
Using this, we get that the denominator $\Pi_{\substack{ d|n \\ d \neq n}} \Phi_d (x) $ is a monic polynomial with coefficients in $\mathbb{Z} \implies \Phi_n \in \mathbb{Z}[X].$
\end{proof}

\subsubsection{Gauss' Theorem}
\begin{theorem}
	Let $n$ be a factor of $p-1$, where $p$ is prime. Then there are exactly $\phi(n)$ elements of order $n$ in $\mathbb{F}^\times_p$. These are the roots of $\Phi $ in $\mathbb{F}^\times_p$. In particular there are $\phi(p-1)$ primitive roots.
\end{theorem}

\begin{proof}
	Let $f(x) = x^{p-1} -1$\\
	By Fermat's Little theorem, $f(x) = 0 \hspace{7pt} (p) $ for $x=1,\dots, p-1 $ for $(x\neq 0)$ 
	\begin{align*}
		\therefore f(x) &= (x-1)(x-2)\dots (x-(p-1)) &&&&&&&&&&&&&&&&&&&\\
		&= \Pi_{\substack{n|p-1}} \Phi_n (x)
	\end{align*}
	This implies that:
	\begin{itemize}
		\item{Each $\Phi_n $ (for $n|p-1$) factorises completely into linear factors with no repeated roots\\ $\therefore \Phi_n $ has $\phi(n)$ roots in $\mathbb{F}_p$  }
		\item{Every element of $\mathbb{F}^\times_p$ is a root of exactly one of the polynomials $\Phi_n$ with $n|p-1$ } 
	\end{itemize}
	It remains to show that the roots of $\Phi_n(x)$ in $\mathbb{F}_p$ has order of exactly $n$.\\
	Suppose $\Phi_n(x) \equiv 0 \hspace{7pt}(p)$\\[1em]
	By the lemma $\Phi_n(x)$ is a factor $x^n -1$ \\
	\hspace{140pt} $\therefore x^n - 1 \equiv 0 \hspace{7pt}(p)$\\
	\hspace{140pt} $\therefore x^n \equiv 1 \hspace{7pt} (p)$\\[1em]
	Suppose $x^m \equiv 1 \hspace{7pt} (p) $ for some $m|n$, $m<n$\\[0.5em]
	\hspace{12pt} $\implies x^m - 1 \equiv 0 \hspace{7pt} (p)$\\[1em]

	By the lemma $\Pi_{\substack{d|m}}\Phi_d(x) \equiv 0 \hspace{7pt} (p)$\\[0.5em]
	\hspace{41pt} $\implies \Phi_d(x) \equiv 0\hspace{7pt} (p)$ for some $d$ \hspace{7pt}\lightning \\
We already know that $x$ is only a root of 1 of the cyclotomic polynomials, therefore $x$ has order $n$. 
\end{proof}


\subsection{Quadratic reciprocity (Quadratic equations modulo prime numbers)}
Recall we can solve $x^a \equiv b\hspace{7pt} (p)$ as long as $a$ is coprime to $p-1$. This won't work if $a=2$ because $a$ will not be invertible mod $p-1$. An easier question to ask is, which quadratic equations have solutions modulo $p$?\\
\textbf{E.g.} Does $x^2 \equiv 37 \hspace{7pt} (149)$ have solutions?\\[1em]

Notation: We always let $p$ be an odd prime (i.e. $p\neq 2$)\\[0.5em]

An element $a \in \mathbb{F}^\times_p $ is a quadratic residue if $x^2 \equiv a \hspace{7pt} (p)$ has solutions.

An element $a \in \mathbb{F}^\times_p $ is a quadratic non-residue if there are no solutions. \\[1em]
The quadratic residue symbol is defined for $a \in \mathbb{F}^\times_p$ by

\begin{equation*}
(\frac{a}{p}) =
\begin{cases}
		1 \hspace{11pt} \text{ a quadratic residue}\\
		-1 \hspace{7pt} \text{a quadratic non-residue}
\end{cases}
\end{equation*}

\begin{lemma}
	Let $g$ be a primitive root modulo $p$ ($p$ odd prime). Then $g^r$ is a quadratic residue iff $r$ even.
\end{lemma}

\begin{proof}
	\begin{align*}
		(\impliedby)& \text{Assume }r \text{ even} &&&&&(\implies) &\text{Assume }g^r\equiv x^2 \hspace{7pt} (p)\\
		&\text{Clearly } g^r \text{ is a square in } \mathbb{F}^\times_p &&&&&& x\equiv g^s \hspace{7pt} (p) \hspace{15pt} (s \in \mathbb{Z}) \text{ since } g \text{ primitive roots}\\
		&\text{So }g^r \text{ is a quadratic residue} &&&&& \therefore & g^r \equiv g^{2s} \hspace{7pt} (p)\\
		& &&&&& & g^{r-2s} \equiv 1 \hspace{7pt} (p)\\
		& &&&&& & g \text{ has order } p-1 \text{ ,so } r-2s \text{ is a multiple of }p-1 \\
		& &&&&& & p\text{ odd } \implies p-1 \text{ is even }\implies r \text{ is even}
	\end{align*}
\end{proof} 
\newpage
\textbf{E.g.} $p=7$\\[1em]

%\begin{minipage}{.5\linewidth}

	
	\begin{tabular}{cc}	
\begin{tabular}{l|l}
	\centering
	$x$     & $x ^2 \mod 7$ \\ \cline{1-2}
	$\pm 1$ & 1              \\
	$\pm 2$ & 4              \\
	$\pm 3$ & 2               
\end{tabular}
%\end{minipage}
	$\implies $ \hspace{25pt}

\begin{tabular}{l|l}
	$a$ & $(\frac{a}{7})$ \\\cline{1-2}
	1 & 1   \\
	2 & 1   \\
	3 & -1  \\
	4 & 1   \\
	5 & -1  \\
	6 & -1 
\end{tabular}
\end{tabular}
	\\[1em]So 1,2,4 are quadratic residues; 3,4,6 are quadratic non-residues\\



\begin{corollary}
	There are exactly $\frac{p-1}{2}$ quadratic residues and $\frac{p-1}{2}$ quadratic non-residues mod $p$
\end{corollary}

\begin{definition}
	Euler's criterion: Let $p$ be an odd prime and $a \in \mathbb{F}^\times_p \implies (\frac{a}{p}) \equiv a^{\frac{p-1}{2}} \hspace{7pt} (p)$\\
	Also $(\frac{ab}{p}) = (\frac{a}{p}) (\frac{b}{p})$
\end{definition}
\begin{proof}
	$(a^{\frac{p-1}{2}})^2 \equiv 1 \hspace{7pt} (p)$ by Fermat's Little theorem.\\[1em] 
	\hspace{25pt}$\therefore a^\frac{p-1}{2} \equiv \pm 1 \hspace{7pt} (p)$\\[0.5em]
	Let $a= g^r $ where $g$ is a primitive root $\implies a^{\frac{p-1}{2}} \equiv g^{(p-1)\frac{r}{2}}$
	\begin{align*}	
		a \text{ is a quadratic residue} &\iff r \text{ is even} &&&&&\\
		&\iff (p-1)\frac{r}{2} \text{ is a multiple of } p-1 \\
		&\iff g^{(p-1)\frac{r}{2}} \equiv 1 \hspace{7pt} (p)\\
		&\iff a^{\frac{p-1}{2}} \equiv 1 \hspace{7pt} (p)
	\end{align*}
\end{proof}
To calculate $(\frac{a}{p})$, we'll use three theorems:

\subsubsection{Quadratic Reciprocity Law}
Let $p,q$ be distinct odd prime numbers. Then $(\frac{p}{q}) = (-1)^{\frac{(p-1)(q-1)}{4}}$




\large
\begin{equation*}
	\text{i.e.} \hspace{7pt} (\frac{p}{q}) =  
	\begin{cases}
		(\frac{q}{p}) &\text{ if } p \equiv 1 \hspace{7pt} (4) \text{ or } q \equiv 1\hspace{7pt} (4)\\
		-(\frac{q}{p}) &\text{ if } p \equiv q \equiv -1 \hspace{7pt} (4)
	\end{cases}
\end{equation*}

\subsubsection{First Nebensatz}
\normalsize If $p$ is an odd prime, then $(\frac{-1}{p}) = (-1)^{\frac{p-1}{2}}$
\large
\begin{equation*}
	\text{i.e.} \hspace{7pt} (\frac{-1}{p}) = 
	\begin{cases}
		1 & p \equiv 1\hspace{7pt} (4)\\
		-1 & p \equiv -1 \hspace{7pt} (4)
	\end{cases}
\end{equation*}

\subsubsection{Second Nebensatz}
\normalsize Let $p$ be an odd prime, then $(\frac{2}{p}) = (-1)^{\frac{p^2 - 1}{ 8}}$
\large
\begin{equation*}
	\text{i.e.} \hspace{7pt} (\frac{2}{p}) = 
	\begin{cases}
		1 & p \equiv \pm 1\hspace{7pt} (8)\\
		-1 & p \equiv \pm 3 \hspace{7pt} (8) 
	\end{cases}
\end{equation*}
\normalsize
We'll prove the theorems later. \\[1em]

\textbf{E.g.} Does the congruence $x^2 \equiv 37 \hspace{7pt} (199)$ have solutions?

\begin{align*}
	199 \text{ is an odd prime } (\frac{37}{199})&= +(\frac{199}{37}) &\text{ by quadratic reciprocity}\\
	&\equiv (\frac{14}{37}) &\text{ because } 199 \equiv 14\hspace{7pt} (37)\\
	&\equiv (\frac{2}{37}) (\frac{7}{37}) &\text{by the corollary}\\
	&\equiv (-1) (\frac{7}{37}) &\text{by the }2^{nd} \text{ Nebensatz}\\
	&\equiv (-1)(+1) (\frac{37}{7}) &\text{by the quadratic reciprocity law}\\
	&\equiv -(\frac{2}{7}) &\text{because }37\equiv 2 \hspace{7pt} (7)\\
	&\equiv - (+1) &\text{by the } 2^{nd} \text{ Nebensatz} \\
	&\equiv -1 &\therefore x^2\equiv 37\hspace{7pt} (199) \text{ has no solutions}
\end{align*}
\textbf{E.g.} $x^2 \equiv 47 \hspace{7pt} (53) $ have solutions?
\begin{align*}
	(\frac{47}{53}) = +(\frac{53}{47}) = (\frac{6}{47}) = (\frac{2}{47})(\frac{3}{47}) = (+1)(-1) (\frac{47}{3}) = -(-\frac{1}{3}) = -(-1) = +1
\end{align*}
This shows that 47 is a quadratic residue mod 53, so $x^2 \equiv 47 \hspace{7pt}(53)$ does have solutions. $(x=10)$\\[1em]

We can speed up the test for primitive roos using quadratic reciprocity,
\begin{align*}
	x \text{ is a primitive root mod }p \iff \forall q | p-1, q \text{ prime } x^{\frac{p-1}{q}} \not \equiv 1 \hspace{7pt} (p)
\end{align*}
This means we need to calculate $x^{\frac{p-1}{q}} \hspace{7pt} (p)$ for primes $q | p-1$, the biggest power of $x$ to calculate is $x^{\frac{p-1}{2}}$. But we can calculate this, because it is $(\frac{x}{p})$ by Euler's criterion.\\[0.5em]

\textbf{E.g.} Is 35 a primitive root modulo 83?\\[0.5em]
The primes $q$ dividing 82 are $2,41$, need to check $35^2, 35^{41}$\\
$35^2 \not \equiv 1 \hspace{7pt} (83) $ because $35 \not \equiv \pm 1 \hspace{7pt} (83)$, a quadratic equation cannot have more than 2 roots.\\
$35^{41} \equiv (\frac{35}{83} ) \hspace{7pt} (83) = (\frac{5}{83}) (\frac{7}{83}) = (\frac{83}{5}) (-1) (\frac{83}{7}) = (\frac{3}{5}) (-1) (\frac{-1}{7}) = (\frac{5}{3}) (-1)(-1) = (\frac{2}{3})$  $= -1 \not \equiv 1 \hspace{7pt} (83)$ \\
So 35 is a primitive root modulo 83.

\begin{proof}
	\textit{First Nebensatz:} \\
	By Euler's criterion, $(\frac{-1}{p}) \equiv (-1)^{\frac{p-1}{2}} \hspace{7pt}(p)$. \\ 
	Both sides are $\pm 1$, and $+1 \not \equiv -1 \hspace{7pt} (p) $ because $p\geq 3 \implies$ they are equal.
\end{proof}

\textbf{E.g.} Find the first primitive root modulo 41\\
$40 = 2^3  * 5 $ 


\begin{equation*}
	x\in \mathbb{F}^{\times}_{41}  \text{ is a primitive root} \iff 
	\begin{cases}
		x^{\frac{40}{2}} \not \equiv 1 \hspace{7pt}(41)\\
		x^{\frac{40}{5}} \not \equiv 1 \hspace{7pt}(41) 
	\end{cases}
\end{equation*}
\begin{equation*}
	\text{We can then simplify the conditions to:    }
	\begin{cases}
		\frac{x}{41} = -1\\
		x^4 \not \equiv \pm 1 \hspace{7pt} (41)
	\end{cases}
\end{equation*}

\begin{align*}
	\text{Try } x=2: \hspace{10pt} &(\frac{2}{41}) = 1  && && \implies \text{not a primitive root} \\
	\text{Try } x=3:  \hspace{10pt}&  (\frac{3}{41}) = (\frac{41}{3}) = (\frac{2}{3}) = -1 && \text{and } 3^4 = 81 \equiv -1\hspace{7pt} (41) &&\implies \text{not a primitive root}\\
	\text{Try } x=4: \hspace{10pt}&&&&& \implies \text{not a primitive root}\\
	\text{Try } x=5 \hspace{16pt}& (\frac{5}{41}) = (\frac{41}{5}) = (\frac{1}{5}) = 1 &&&& \implies \text{not a primitive root}\\
	\text{Try } x =6:  \hspace{10pt} &(\frac{6}{41}) = (\frac{2}{41}) (\frac{3}{41})= 1 * -1 =-1 \\
	&2^4 * 3^4 = -2^4 \equiv 16 \hspace{7pt} (41) \not \equiv \pm 1  &&&& \implies \text{so 6 is a primitive root} 
\end{align*}
\\[1em]

\textbf{E.g.} For which primes $p$ does the congruence $x^2 \equiv -3 \hspace{7pt} (p)$ have solutions? 
\\[0.5em]
Notice $x=1$ is a solution mod 2,\\
\hspace{30pt} $x=2$ is a solution mod 3.\\

For primes $p \neq 2,3 $ it depends on $(\frac{-3}{p})$\\


\begin{align*}
	\text{We'll calculate $(\frac{-3}{p})$} && (\frac{-3}{p}) &= (\frac{-1}{p})   (\frac{3}{p})\\
	&&&= (-1)^{\frac{p-1}{2}} (\frac{3}{p})\\
	&&&= (-1)^{\frac{(3-1)(p-1)}{4}}(\frac{p}{3})\\
	&&&= (\frac{p}{3})
\end{align*}
List the squares mod 3, $1^2 = 1 \hspace{7pt} (3), 2^2 = 1 \hspace{7pt} (3) $
\begin{equation*}
	\therefore (\frac{p}{3}) = 
	\begin{cases}
		1  &\text{if $p\equiv1 \hspace{7pt} (3)$}\\
		-1 & \text{if $p\equiv 2 \hspace{7pt} (3)$} 
	\end{cases}
\end{equation*}
We've shown that $x^2 \equiv -3\hspace{7pt} (p)$ has solutions iff $p \neq 2 \text{ or } p \equiv 1 \mod 3$ .
\begin{corollary}
	There are infinitely many primes $p \equiv 1 \hspace{7pt} (3)$
\end{corollary}

\begin{proof}
Assume there are only finitely many, and call them $p_1, p_2, \dots, p_r$\\
Let $N = n^2 +3 $ where $n=2p_1\dots p_r$\\
Take a prime factor $q$ of $N$\\[1em]
	$N \equiv 0\hspace{7pt} (q)$\\
	$n^2 + 3 \equiv 0 \hspace{7pt} (q) $\\
	$n^2 \equiv -3 \hspace{7pt}(q)$\\
	We've just shown that this implies $q = 2 $ or 3 or $q \equiv 1\hspace{7pt} (3)$ but $q \neq 2, 3, q \not \equiv 1 \hspace{7pt}(3) $ \lightning 
\end{proof}

Before we prove the $2^{nd}$ Nebensatz, we need to know about a new ring.\\[0.5em]
Let $\zeta= e^{\frac{2\pi i}{8}}$, a primitive $8^{th}$ root of unity.

We'll use the ring $\mathbb{Z}[\zeta] = \{f(\zeta) \colon f \in \mathbb{Z} \} = \{a_0 + a_1\zeta +a_2 \zeta^2 +\dots + a_n\zeta^n : a_i \in \mathbb{Z} \}$\\
This is clearly a ring (closed under +,*).

\subsection{Uniqueness Lemma}

Every $A \in \mathbb{Z}[\zeta]$ can be written uniquely as $A = W + x\zeta + y\zeta^2 +z\zeta^3$ with $w,x,y,z \in \mathbb{Z}$.\\
We'll use congruence modulo $p$ in the ring $\mathbb{Z}[\zeta]$ to prove the $2^{nd}$ Nebensatz.

\begin{definition}
	Let $A,B \in \mathbb{Z}[\zeta]$\\
	We'll say $A \equiv B \hspace{7pt} (p\mathbb{Z}[\zeta])$ if $A-B = pC$ for some $c \in \mathbb{Z}[\zeta]$
\end{definition}
\begin{align*}
	\text{Suppose } & A = a_0 + a_1\zeta + a_2\zeta^2 +a_3\zeta^3\\
	& B = b_0 + b_1\zeta + b_2\zeta^2 +b_3\zeta^3\\
	& C = c_0 + c_1\zeta + c_2\zeta^2 +c_3\zeta^3
\end{align*}
The equation $A-B = pC$ is equivalent (by uniqueness lemma) to:
\begin{align*}
a_0 -b_0 =pC_0, \\
	a_1 -b_1 =pC_1,\\
	a_2 -b_2 =pC_2, \\
	a_3 -b_3 =pC_3,  
\end{align*}
This implies that the congruence $A \equiv B \hspace{7pt} (p\mathbb{Z}[\zeta])$ is equivalent to $a_i \equiv b_i \hspace{7pt} (p)$ for $i=0,1,2,3$

\begin{corollary}
	$1\not \equiv -1 \hspace{7pt}(p\mathbb{Z}[\zeta])$ if $p$ is an odd prime. 
\end{corollary}
This means that to calculate $(\frac{2}{p})$ it is enough to calculate its congruency class mod $(p\mathbb{Z}[\zeta])$
The uniquess lemma is implied by a more general result:

\subsubsection{General Uniqueness Lemma}
Let $m \in \mathbb{Z}[X]$ be monic and irreducible over $\mathbb{Q}$ of degree $d$. If $\alpha \in \mathbb{C}$ is a root of $m$, then every element of $\mathbb{Z}[\alpha]$ can be written uniquely as $a_0 +a_1+\dots+a_{d-1}\alpha^{d-1}$ with $a_i \in \mathbb{Z}$.

The uniqueness lemma for $\mathbb{Z}[\zeta]$ follows because $\zeta$ is a root of $m(x)= \Phi_8(x) = x^4 +1$. It is proved in (7202 Groups \& Rings) that $x^4 +1$ is irreducible over $\mathbb{Q}$.


\begin{proof}
	(General Uniqueness Lemma)\\[0.5em]
	Let $A \in \mathbb{Z}[\alpha]$ and $m(\alpha) = 0$
	\begin{align*}
		\text{Existence: } && &A= f(\alpha) \text{ for some } f \in \mathbb{Z}[X] \hspace{100pt}\\[0.5em]
		&& &\text{divide $ f $ by $m$ with remainder, } f=q*m+r  && deg(r)<deg(m)<d \\[0.5em]
		\therefore &&&f(\alpha) = q(\alpha) m(\alpha) +r(\alpha)\\[0.5em]
		\therefore &&& A=r(\alpha)\\
	\end{align*}
	\begin{align*}
		\text{Uniqueness: } &&&\text{Suppose }A=f(\alpha) = g(\alpha) \hspace{7pt} (f\neq g) \text{ where $f$ \& $g$ both have degree} <d\\[0.5em]
		\therefore &&&h(\alpha) = 0 \text{ where } h=f-g \hspace{7pt}(\neq 0) \\[0.5em]
		&&& m\text{ is irreducible over $\mathbb{Q}$ and has a bigger degree than $h$}\\[0.5em]
		\therefore&&& m \not |\hspace{3pt} h \text{ in } \mathbb{Q}[x] \text{, so $m$ and $h$ are coprime in $\mathbb{Q}[x]$}\\[1em]
		&&&\exists a,b \in \mathbb{Q}[x] \text{ such that :}\\[0.25em]
		&&& 1= am +bh = a(\alpha)m(\alpha)+b(\alpha)h(\alpha) = 0  \hspace{100pt} m(\alpha)= 0 &&h(\alpha)=0\\[0.25em]
		\implies&&& 1=0 \\[0.1em]
		\implies&&& f=g
	\end{align*}
\end{proof}


\begin{lemma}
In any ring $R$ with any prime $p$
	\begin{equation*}
		(x+y)^p \equiv x^p +y^p\hspace{7pt} (pR) \text{ for any } x,y \in R 
	\end{equation*}
\end{lemma}
\begin{proof}
Sufficient to show that each binomial coefficient:
	\begin{align*}
		c=\frac{p!}{i!(p-i)!} && i =1,2,\dots,p-1 \text{ is a multiple of p}
	\end{align*}
	\begin{align*}
		i!(p-i)! \not \equiv 0 \hspace{7pt} (p) \implies  \in \mathbb{F}^\times_p
	\end{align*}
\end{proof}

\newpage{}
\begin{proof}
	$2^{nd}$ Nebensatz\\[1em]

	Let $p$ be an odd prime and let $G = \zeta + \zeta^{-1} = \sqrt{2}$. We'll calculate $G^p$  $mod$  $ (p\mathbb{Z}[\zeta]) $ in two ways.\\

	\textbf{First Calculation: }
	\begin{align*}
		G^P &= (\zeta + \zeta^{-1})^p\\
		&= \zeta^p + \zeta^{-p} \mod (p\mathbb{Z}[\zeta]) \text{ by the lemma}\\
	\end{align*}
	Since $\zeta^8 = 1$ this only depends $p$ modulo 8 if $p \equiv \pm 1 (8)$ then, 
	\begin{align*}
		G^p = \zeta + \zeta^{-1} \equiv G \hspace{7pt}(p\mathbb{Z}[\zeta])\\
	\end{align*}
	If $p\equiv \pm 3 \hspace{7pt}(8)$ then, 
	\begin{align*}
	G^p \equiv \zeta^3 + \zeta^{-3} \equiv -G \hspace{7pt}(p\mathbb{Z}[\zeta])
	\end{align*}
	So in summary, 

	\begin{align*}
		G^{p} \equiv (-1)^{\frac{p^2-1}{8}}G \hspace{7pt}(p\mathbb{Z}[\zeta])
	\end{align*}
	\textbf{Second Calculation:}\\[1em]
	Since $G^2 = 2$,
	\begin{align*}
		G^p &= G * 2^{\frac{p^2-1}{2}} \\
		&= G * (\frac{2}{p})\hspace{7pt} (p\mathbb{Z}[\zeta]) \text{ by Euler's criterion} 
	\end{align*}
Comparing the results of these two calculations we get:
	\begin{align*}
		(\frac{2}{p}) G = (-1)^{\frac{p^2 -1}{8}} G \hspace{7pt}(p\mathbb{Z}[\zeta])
	\end{align*}

	Note $G^2 * \frac{p+1}{2} \equiv 1 \hspace{7pt}(p\mathbb{Z}[\zeta])$, i.e. $G$ is invertible modulo $p\mathbb{Z}[\zeta]$ with inverse $G*\frac{p+1}{2}$
	\begin{align*}
		\implies & (\frac{2}{p}) \equiv (-1)^{\frac{p^2-1}{8}} \hspace{7pt}(p\mathbb{Z}[\zeta])\\
	\end{align*}

		\text{Since $1 \equiv -1\hspace{7pt} (p\mathbb{Z}[\zeta])$}, 
	\begin{align*}
		(\frac{2}{p}) = (-1)^{\frac{p^2 -1}{8}}
	\end{align*}
\end{proof}
The proof of the $2^{nd}$ Nebensatz worked because $\sqrt{2} \in \mathbb{Z}[\zeta]$\\
To prove the quadratic reciprocity law, we'll show that $\sqrt\pm p)$ is in another cyclotomic ring
\newpage
	Let $\zeta_p = e^{\frac{2\pi i }{p}} $, a primtive $p^{th}$ root of unity. We'll work in the ring modulo $q\mathbb{Z}[\zeta]$.

	\begin{definition}
		The $p^{th}$ Gauss sum (where $p$ is an odd prime):\large
		\begin{equation*}
			G(p) = \sum_{a=1}^{p-1}(\frac{a}{p})\zeta^a_p \in \mathbb{Z}[\zeta_p]
		\end{equation*}

	\end{definition}
		\normalsize
		\begin{lemma}
			$G(p)^2 = (-1)^{\frac{p-1}{2}}$ 
		\end{lemma}
\begin{proof}
		\begin{align*}
			G(p)^{2} &= \Bigg(\sum^{p-1}_{a=1} (\frac{a}{p}) \zeta^a_p\Bigg)\Bigg(\sum^{p-1}_{b=1} (\frac{b}{p}) \zeta^b_p \Bigg) \\
			&= \sum_{a,b \in \mathbb{F}^\times_p}(\frac{a}{p})(\frac{b}{p})  \zeta^a_p \zeta^b_p\\
			&= \sum_{a,b \in \mathbb{F}^\times_p} (\frac{ab}{p})\zeta^{a+b}_p\\	
			\intertext{Let $c\equiv a^{-1}b \hspace{7pt} (p)$, as $b$ runs through $\mathbb{F}^\times_p$, so does $c$}
			&= \sum_{a,c \in \mathbb{F}^\times_p} (\frac{a^2}{p}) \zeta^{a+ac}_p\\
			&= \sum_{c \in \mathbb{F}^\times_p} (\frac{c}{p})\bigg( \sum_{a=1}^{p-1} (\zeta^{1+c}_p)^a\bigg)
		\end{align*}
		Note the second summation is a geometric progression. Recall that,
	\begin{align*}
		\sum^{p-1}_{i=1} r^i = 
		\begin{cases}
			\cfrac{r^p -1}{r-1} &r \neq 1\\
			p-1 & r=1
		\end{cases}
	\end{align*}
	Summing the geometric progression:

	\begin{align*}
		\sum_{a=1}^{p-1} \big(\zeta^{1+c}_p\big)^{a} =& 
		\begin{cases}
			\cfrac{\big(\zeta_p^{1+c} \big)^p - \zeta^{1+c}_p }{\zeta^{1+c}_p - 1} & \text{if } c \not \equiv 1 \hspace{7pt} (p)\\
			p-1 & \text{if } c \not \equiv -1 \hspace{7pt} (p)
		\end{cases}
		\\[1em] =&
		\begin{cases}
			-1 &c \not \equiv -1 \hspace{7pt} (p)\\
			p-1 & c \equiv -1 \hspace{7pt} (p)
		\end{cases}
	\end{align*}
	\newpage
	\begin{align*}
		\therefore G(p)^2 &= \sum_{c \in \mathbb{F}^\times_p} (\frac{c}{p}) (-1) + p(\frac{-1}{p}) &&\\
		\intertext{ $\sum_{c \in \mathbb{F}^\times_p} (\frac{c}{p}) (-1) = 0$ since there are $\frac{p-1}{2}$ quadratic residues and quadratic non-residues. }
		&= p(\frac{-1}{p}) \\
		&= (-1)^{\frac{p-1}{2}}p &\text{ by the $1^{st}$ Nebensatz}
	\end{align*}
\end{proof}

\subsubsection{Uniqueness Lemma for $\mathbb{Z}[\zeta_p]$}
Every element $A \in \mathbb{Z}[\zeta_p] $ can be written uniquely as:
\begin{align*}
	A = a_0 + a_1\zeta + \dots + a_{p-2}\zeta^{p-2} && \text{with } a_i \in \mathbb{Z} 
\end{align*}
This is because $\zeta_p$ is a root of $m(x) = \Phi_p(x) = 1+x+\dots +x^{p-1}$. It's proved in 7202 that $\Phi_p$ is irreducible over $\mathbb{Q}$.

\begin{proof}
	Quadratic Reciprocity law\\[1em]
	We'll calculate $G(p)^q \hspace{7pt}(q\mathbb{Z}[\zeta_p])$ in two ways.\\[1em]

	\textbf{First Calculation:}
	\begin{align*}
		G(p)^q &= \bigg(\sum_{a=1}^{p-1} (\frac{a}{p}) \zeta^a_p \bigg)^q\\
		&=\sum_{a=1}^{p-1} \bigg((\frac{a}{p}) \zeta^a_p \bigg)^q\hspace{7pt} (p\mathbb{Z}[\zeta]) \\
		\intertext{Since $q$ is odd, $(\frac{a}{p})^q = (\frac{a}{p})$}
		G(p)^q &\equiv \sum_{a \in \mathbb{F}^\times_p }(\frac{a}{p}) \zeta^{aq}_p
		\intertext{Let $b \equiv aq \hspace{7pt} (p) $, and as $a$ runs through $\mathbb{F}^\times_p$ so does $b$ }
		G(p)^q &\equiv \sum_{b \in \mathbb{F}^\times_p} (\frac{bq^{-1}}{p})\zeta^b_p\\
		&= (\frac{q^{-1}}{p}) \sum_{b \in \mathbb{F}^\times_p} (\frac{b}{p}) \zeta^b_p\\
		\intertext{Note that $G(p) = \sum_{b \in \mathbb{F}^\times_p} (\frac{b}{p}) \zeta^b_p$ which implies, }
		G(p)^q &\equiv (\frac{q^{-1}}{p}) G(p) \hspace{7pt}(q\mathbb{Z}[\zeta_p])\\
		&\equiv (\frac{q}{p}) G(p) \hspace{7pt}(q\mathbb{Z}[\zeta_p])
	\end{align*}
	\textbf{Second Calculation: }\\[1em]
	Since $G(p)^2 = (-1)^{\frac{p-1}{2}}p$,
	\begin{align*}
		G(p)^q &= G(p) \bigg( (-1)^{\frac{p-1}{2}} p\bigg)^{\frac{q-1}{2}}  \\
		&= G(p) (-1)^{\frac{(p-1)(q-1)}{4}} p^{\frac{q-1}{2}}\\
		\therefore G(p)^q& \equiv G(p) (-1)^{\frac{(p-1)(q-1)}{4}} (\frac{p}{q}) \hspace{7pt}(q\mathbb{Z}[\zeta_p]) \hspace{50pt} \text{ by Euler's criterion}
	\end{align*}
Comparing the two results we get:
	\begin{align*}
		(\frac{q}{p}) G(p) \equiv (-1)^{\frac{(p-1)(q-1)}{4}} (\frac{p}{q})G(p) \hspace{7pt}(q\mathbb{Z}[\zeta_p])
	\end{align*}
	We need to check that $G(p)$ is invertible modulo $q\mathbb{Z}[\zeta_p]$,\\[1em]
	$G(p)^2 = \pm p$, which is invertible modulo $q$\\[0.5em]
	$G(p)$ has inverse $G(p) * (\pm p)^{-1} \hspace{7pt}(q\mathbb{Z}[\zeta_p])$\\[0.5em]
	$\therefore (\frac{p}{q}) \equiv (-1)^{\frac{(p-1)(q-1)}{4}} (\frac{p}{q}) \hspace{7pt}(q\mathbb{Z}[\zeta_p]) $\\[0.5em]
	Since $1 \equiv -1 \hspace{7pt}(q\mathbb{Z}[\zeta_p]) $, it follows that $(\frac{q}{p}) = (-1)^{\frac{(p-1)(q-1)}{4}} (\frac{p}{q})$
\end{proof}

\newpage
\section{P-adic Number theory}
This means methods for congruences modulo $p^n$, $p$ prime and $n$ large.\\[1em]

If we want to solve $f(x)=0$, $x \in \mathbb{R}$ we can use the Newton-Raphson method:
\begin{itemize}
	\item{Begin with an "approximate solution" $a_0$}
	\item{Define a sequence recursively $a_{n+1} = a_n - \cfrac{f(a_n)}{f'(a_n)}$}
\end{itemize}
Very often $a_n$ converge to a limit $a$ and $f(a) = 0$.

We can use the same method in number theory for solving congruences. Suppose $f(x)$ is a polynomial with coefficients in $\mathbb{Z}$ and we want to solve $f(x)\equiv 0 \hspace{7pt} (p^N)$ ($p$ prime, $n$ large)

We can try this:
\begin{itemize}
	\item{Find a solution $a_0$ to $f(a_0) \equiv 0 \hspace{7pt} (p^r)$ where $r$ is small}
	\item{Define a recursive sequence $a_{n+1} = a_n - \cfrac{f(a_n)}{f'(a_n)}$}
\end{itemize}
If $n$ is large enough, then often $f(a_n) \equiv 0\hspace{7pt} (p^N)$\\[1em]

\textbf{E.g.} Let $f(x) = x^2 + 2$, $p=3$\\
Suppose we want to solve $x^2 +2 \equiv 0 \hspace{7pt} (3^N)$ \\[0.5em]

Let $a_0 = 1: $ $f(a_0) = 1^2 + 2 = 3 \equiv 0 \hspace{7pt} (3)$\\[0.5em]
Define the sequence $a_n$ by $a_{n+1} = a_n = \cfrac{f(a_n)}{f'(a_n)}=a_n - \cfrac{a_n^2 +2}{2a_n} = \cfrac{a_n}{2} - \cfrac{1}{a_n}$
\begin{align*}
	a_0 &= 1 &&&&&&&&&&&&&&&&\\
	a_1 &= \frac{1}{2} -1 = \frac{-1}{2} \\
	a_2 &= \frac{-1}{4} +2 = \frac{7}{4}
\end{align*}
It turns out that $ \frac{-1}{2} $ is a solution mod 9 $\implies -1 *2^{-1} \mod 9$\\
\hspace{75pt} $\frac{7}{4} $ is a solution mod 81 $\implies 7*4^{-1} \mod 9$\\[0.5em]
$2^{-1} \equiv 5 \hspace{7pt} (9) \implies a_1 \equiv 4 \hspace{7pt} (9) $\\[0.5em]
$4^{-1} \equiv -20 \hspace{7pt} (81) \implies  a_2 = \frac{7}{4} \equiv -140 \equiv 22\hspace{7pt} (81)$\\[1em]
$a_3 $ would be a solution mod $3^8$.\\[1em]
In this example, we're reducing rational numbers mod $p^n$ not just integers. If $\frac{a}{b}$ is arational numbe,r then we can reduce this modulo $p^n$ as long as $b$ is invertible mod $p^n$, i.e. when b is not a multiple of p. We'll write:

\begin{equation*}
	\mathbb{Z}_{(p)} = \{\frac{a}{b} : a,b \in \mathbb{Z}, p \not | b\}
\end{equation*}
$\mathbb{Z}_{(p)} $ is closed under $+, *$, so $\mathbb{Z}_{(p)}$ is a ring contained in $\mathbb{Q}$ containing $\mathbb{Z}$. This is called the "local ring of $p$" and is the set of rational number which can be reduce modulo $p^n$ $(\forall n)$


\begin{definition}
	If $p$ is a prime number and $n \in \mathbb{Z}$, then the valuation of $n$, at $p$ is:

	\begin{equation*}
		V_{p}(n) = 
		\begin{cases}
	max\{a:  p^a | n\} & n \neq 0\\
			\infty & n=0
		\end{cases}
	\end{equation*}
\end{definition}
A simple statement that can be made is, $V_{p}(nm) = V_p(n) + V_p(m)$ .
We can also extend $V_p$ to a function on $\mathbb{Q}$, $V_p(\frac{n}{m}) = V_p(n) - V_p(m)$.

With this notation:
\begin{equation*}
	Z_{(p)} = \{ x\in \mathbb{Q} : V_p(x) \geq 0 \}
\end{equation*}
\begin{align*}
	x \equiv y \hspace{7pt} (p^{a}) \iff V_p(x-y) \geq a
\end{align*}

\textbf{E.g} 
\begin{align*}
	V_2(\frac{7}{12}) =-2 && V_2(\frac{7}{12}) =-1&&   V_5(\frac{7}{12}) =0 && V_7(\frac{-7}{12}) =+1  
\end{align*}


\subsection{Hensel's Lemma}
Let $p$ be a prime number. Let $f \in \mathbb{Z}_{(p)}[x]$ and $a_0 \in \mathbb{Z}_{(p)}$ such that $f(a_0) \equiv 0 \hspace{7pt} (p^{2c+1})$ where $c= V_P(f'(a_0))$.

Then if we define $a_{n+1} = a_n - \cfrac{f(a_n}{f'(a_n)}$ then $a_n \in \mathbb{Z}_{(p)}$ and $f(a_n) \equiv 0 \hspace{7pt} (p^{2c+2^n})$ 

\begin{proof}
We'll prove the following by induction on $n$
	\begin{enumerate}
		\item{$a_n \in \mathbb{Z}_{(p)}$ and $a_n \equiv a_0 \hspace{7pt} (p^{c+1})$}
		\item{$V_p(f'(a_n)) = c$}
		\item{$f(a_n) \equiv 0 \hspace{7pt}(p^{2c+2^n})$}
	\end{enumerate}
	If $n=0$ then the statements 1,2,3 are all true for $a$ by assumption.
	Now assume 1,2,3 for $a_n$, we'll prove them for $a_{n+1}$\\[1em]
	Let $a_{n+1} = a_n - \delta$  where $\delta = \cfrac{f(a_n)}{f'(a_n)}$\\[0.5em]	
	\textbf{1: }
	\begin{align*}	
		V_p(\delta) &= V_p(f(a_n)) -V_p(f'(a_n)) \\
		&\hspace{70pt} =c &\text{ by \bf{2:}}\\
		&\geq 2c+2^n &\text{ by \bf{3:}}\\
		V_p(\delta) &\geq 2c +2^n - c\\
		V_p(\delta) &\geq c +2^n &\textbf{(*)}\\
	\end{align*}
	\text{By \bf{(*)}}
	\begin{align*}
		&V_p(\delta) \geq 0 \implies \delta \in \mathbb{Z}_{(p)} &&\\[0.5em]
		\therefore & \text{ }a_{n+1} = a_n - \delta \in \mathbb{Z}_{(p)}
	\end{align*}
	\text{By \bf{(*)}}
	\begin{align*}
		V_{p} \geq c+1 &\implies \delta \equiv 0 \hspace{7pt} (p^{c+1})\\[0.5em]
		a_{n+1} &\equiv a_n \hspace{7pt} (p^{c+1})\\
		&\equiv a_0 \hspace{7pt} (p^{c+1}) && \text{by \bf{1}}
	\end{align*}
	\textbf{2: }We've shown that $a_{n+1} \equiv a_0 \hspace{7pt} (p^{c+1})$
	\begin{align*}
		\therefore \hspace{7pt} f'(a_{n+1}) &\equiv f'(a_0) \hspace{7pt} (p^{c+1})\\
		&\not \equiv 0 &&\text{because } V_p(f'(a_0)) = c\\
		&&& \text{also } f'(a_{n+1}) \equiv f'(a_0) \hspace{7pt} (p^c)\\
		&&& \hspace{62pt} \equiv 0 \hspace{7pt} (p^c)\\[0.5em]
		&&& \text{because } V_p(f'(a_0)) = c \hspace{7pt} (p^c)\\[1em]
		\therefore V_p(f'(a_{n+1})) &=c 
	\end{align*}
	\textbf{3: } Must show that $f(a_{n+1}) \equiv 0 \hspace{7pt} (p^{2c+2^{n+1}})$
	\begin{align*}
	a_{n+1} &= a_n - \delta \\[1em]
		a_{n+1}^r &= (a_n -\delta)^r\\
		&= a_n^r - ra_n^r\delta +  \text{multiples of } \delta^2
	\end{align*}
	By \textbf{(*)}:
	\begin{align*}
		 V_p(\delta) &\geq c+2^n\\[1em]
		\therefore V_p(\delta^2) &\geq 2c + 2^{n+1}\\[1em]
		\therefore \delta^2 &\equiv 0 \hspace{7pt} (p^{2c+2^{n+1}})
	\end{align*}
	This implies $a^r_{n+1} \equiv a^r_n - ra^{r-1}_n \delta \hspace{7pt} (p^{2c+2^{n+1}})$\\

	Suppose $f(x) = \sum c_r * x$. Substiuting $a_{n+1}$, we get:
	\begin{align*}
		f(a_{n+1}) &= \sum c_r(a_n^r - ra^{r-1}_n \delta) \hspace{7pt} (p^{2c+2^{n+1}})\\
		&= \sum c_ra_n^r - \bigg(\sum rc_ra_n^{r-1} \bigg)\delta \hspace{7pt} (p^{2c+2^{n+1}})\\
		&= f(a_n) - f'(a_n) *\cfrac{f(a_n)}{f'(a_n)} \equiv 0 \hspace{7pt} (p^{2c+2^{n+1}})
	\end{align*}
\end{proof}
\newpage
\textbf{E.g.} $f(x) = x^3 + x + 1$, $p =3$\\
Find a root of $f$ mod 81\\[1em]
Note that $ f'(x) = 3x^2+1$ and $f(1) = 3 \equiv 0$\\[0.5em]
Try $a_0 = 1$
\begin{align*}
	c&= V_3(f'(a_0)) \\
	&=V_3(4) \\
	&=0
\end{align*}
$3^{2c+1} = 3 $ and $a_0$ is a root of $f$ modulo 3\\
$\therefore a_0 = 1 $ satisfies the conditions of Hensel's lemma.
\begin{align*}
	a_1 &= 1 - \cfrac{a_0}{f'(a_0)} \\
	& = 1 - \cfrac{3}{4}
\end{align*}
It is sufficient to work out $a_1$ mod 9
\begin{align*}
	4^{-1} \equiv 1 \hspace{7pt} (3) && \frac{3}{4} \equiv 3 *1 \hspace{7pt} (9) && a_1 \equiv -2 \hspace{7pt}(9)  
\end{align*}
Check 
\begin{align*}
	f(a_1) &\equiv (-2)^3 + (-2) + 1 \\
	f(2) &= -9 \equiv 0 \hspace{7pt} (9)
\end{align*}
\begin{align*}
	a_2 &= -2 - \frac{f(-2)}{f'(-2)}\\
	&= -2 - \frac{-9}{13}
\end{align*}
This should be a root of $f$ modulo 81. 
\begin{align*}
	13^{-1} &\equiv -2\hspace{7pt} (9)\\[1em]
	\implies \frac{9}{13} &\equiv -18 \\
\end{align*}
\begin{align*}
	a_2 \equiv -2 -18 \equiv -20\\
\end{align*}
\begin{align*}
	\text{Check } f(a_2) = (-20)^3 -20 +1 &\equiv -8000 -19 \\
	&= -8019\\ 
	&= -81*99\\
	&=0\hspace{7pt} (81)
\end{align*}
\newpage
\subsection{Quadratic Congruences}
We'll see how to find out whether $x^2 \equiv b \hspace{7pt} (n) $ has solutions.\\[0.5em]
Suppose $n= p_1^{a_1} \dots p_r^{a_r}$ ($p_i$ distinct primes). There are solutions modulo $n \iff \forall i$, there are solutions modulo $p_i^{a_i}$ by the Chinese Remainder Theorem.
	
	
\begin{proposition}
Suppose $p$ is an odd prime not dividing $b$.
	If $x^2 \equiv b \hspace{7pt} (p)$  has solutions then $x^2 \equiv b\hspace{7pt} (p^r)$ has solutions for all $r$
\end{proposition}
	

\begin{proof}
	Suppose there is a solution $a_0$ modulo $p$, i.e. $a_0^2 \equiv b \hspace{7pt} (p)$\\[0.5em]
	Let $f(x) = x^2 - b$.  We'll check that $a_0$ satisfies the conditions of Hensel's lemma.
	\begin{align*}
		c &= V_p(f'(a_0)) \\
		&= V_p(2a_0) && \text{ and since } p\neq 2\\
		\implies c &=V_p(a_0) 
	\end{align*}
	Also since $p \not | b$, we know $p \not | a_0$:
	\begin{align*}
		\therefore\hspace{7pt} & c =0 \\
		\therefore\hspace{7pt} &f(a_0) \equiv \hspace{7pt} (p^{2c+1})  \implies a_0 \text{ satisfies the conditions of Hensel's lemma}\\
		\therefore \hspace{7pt} & \text{We have roots of $f$ modulo all powers of $p$}
	\end{align*}
\end{proof}

\textbf{Remark}\\
Suppose we want a root of $f$ modulo $p^{13}$\\
Choose $n$ so that $2c+2^n \geq 13$\\
$f(a_n) \equiv 0\hspace{7pt} (p^{2c+2^n}) \implies f(a_n) \equiv 0 \hspace{7pt} (p^{13})$\\[1em]

The proposition would be false if we allowed $p=2$

\textbf{E.g.} Let $b = 3$

\begin{align*}
	\begin{split}
		x^2 &\equiv 3 \hspace{7pt} (2) \text{ has a solution}\\
		x^2 &\equiv 3 \hspace{7pt} (4) \text{ has no solutions} 
	\end{split} &&&&&
	\begin{tabular}{l|l}	
		\multicolumn{1}{l|}{$x$} & \multicolumn{1}{l}{$x^2$ mod 4} \\ \hline
		0 & 0 \\
		1 & 1 \\
		2 & 0 \\
		3 & 1                      
	\end{tabular} &&&&& \\[1em]
\end{align*}

if $b=5$
\begin{align*}
	\begin{split}
		x^2 &\equiv 5 \hspace{7pt} (2) \text{ has a solution}\\
		x^2 &\equiv 5 \hspace{7pt} (4) \text{ has solutions} \\
		x^2 &\equiv 5 \hspace{7pt} (8) \text{ has no solutions} 
	\end{split} &&&&&
	\begin{tabular}{l|l}	
		\multicolumn{1}{l|}{$x$} & \multicolumn{1}{l}{$x^2$ mod 8} \\ \hline
		0        & 0 \\
		$\pm1$   & 1 \\
		$\pm2$   & 4 \\
		$\pm3$   & 1 \\
		$\pm 4$  & 0
	\end{tabular} &&&&& \\[1em]
\end{align*}

\begin{proposition}
	Suppose $b$ is odd. If $x^{2} = \equiv b \hspace{7pt} (8)$ has solutions then $x^2 \equiv b\hspace{7pt} (2^r) $ has solutions for all $r$ 
\end{proposition}
\begin{proof}
	Suppose $a_0 \equiv b \hspace{7pt} (8) $, this implies $a_0$ is odd.\\
	Let $f(x) = x^2 -b$ \\[0.5em]
       	$\therefore c = V_2(f'(a_0)) = V_2(2a_0) = 1 $ because $a_0$ is odd\\[0.5em]
	$\therefore 2^{2c+1} = 8$\\[0.5em]
	$\therefore a_0$ is a root of $f$ modulo $p^{2c+1}$\\[0.5em]
	By Hensel's lemma, there are solutions modulo all powers of 2.\\[1em]
\end{proof}

\textbf{E.g.} For which $n$ does the congruence $x^2 \equiv 5 \hspace{7pt} (5) $ have solutions?\\[1em]
First consider the case $n \equiv p^r $\hspace{7pt} ($p$ prime)\\
If $p \neq 2, 5 $ then by the first propositiong, there are solutions $p^n \iff (\frac{5}{p}) = 1$\\[0.5em]
$(\frac{5}{p}) = + (\frac{p}{5})$ depends on $p $ mod $5$ 

\begin{align*}
	\begin{tabular}{l|l}
		\multicolumn{1}{l|}{x} & \multicolumn{1}{l}{s} \\ \hline
		1                       & 1                      \\
		2                       & -1                     \\
		3                       & -1                     \\
		4                       & 1                     
	\end{tabular}&
	\begin{split}
		&\text{ (different $x$)}\\
		&\text{ The congruence $x^2 \equiv 5 \hspace{7pt} (p) $ has solutions}\\
		&\iff  p\equiv 1,4 \hspace{7pt} (5) \text{ (in the cases $p \neq 2, 5$)}
	\end{split}
\end{align*}
For $p=2$, \hspace{3pt} $x^2 \equiv 5 \hspace{7pt} (2) $ has a solution, $x=1$ \\
\hspace{55pt} $x^2 \equiv 5 \hspace{7pt}(4) $  has a solution, $x=1$\\ 
But the only odd square mod 8 is 1. So $x^2 \equiv 5 \hspace{7pt} (8)$ has no solutions.\\
$\therefore $ no solutions mod $2^n$ if $n\geq 3$\\[1em]
For $p=5$ \hspace{3pt} $x^2 = 5 \hspace{7pt} (5)$ has solutions, here's how we check. Assume:
\begin{align*}
	x^2 &\equiv 5 \hspace{7pt} (25)\\
	\therefore x^2 &\equiv 0 \hspace{7pt} (5) \\[0.5em]
	\text{So } & 5 | x^2 \\
	\text{So } & 5 | x \\
	\therefore x^2 &\equiv 0 \hspace{7pt} (25) \hspace{7pt} \text{\lightning}
\end{align*}
So there are solution modulo $n$ if  $n = 2^a * 5^b * \Pi p_i^{c_i} $ where $a\leq 2, b\leq 1, p_i \equiv 1 \hspace{7pt} (5),c_i \in \mathbb{N} $ \\[1em]

\textbf{E.g.} For which $n$ does $x^2 \equiv -7\hspace{7pt}  (n)$ have solutions?\\[1em]
Assume $p$ is a prime $\neq 2, 7$



\begin{align*}
	\begin{split}
		(\frac{-7}{p}) &= (\frac{-1}{p}) (\frac{7}{p})\\[0.5em]
		&= (-1)^{\frac{p-1}{2}}(-1)^{\frac{(7-1)(p-1)}{4}} (\frac{p}{7})\\[0.5em]
		&= (-1)^{\frac{p-1}{2} + \frac{3(p-1)}{2}} (\frac{p}{7})\\[0.5em]
		&= (+1) (\frac{p}{7}) \text{ depends on $p$ mod 7}
	\end{split}&&
	\begin{tabular}{l|l}
		\multicolumn{1}{l|}{x} & \multicolumn{1}{l}{$\bigg(\cfrac{x}{7}\bigg)$} \\[0.8em] \hline
	1 & 1 \\ 
	2 & 1 \\ 
	3 & -1\\
	4 & 1 \\
	5 & -1\\
	6 & -1\\                 
	\end{tabular}
	\begin{split}
		&3^2 = 9 \equiv 2 \mod 7 \\[1em]
		&x^2 \equiv -7 \hspace{7pt} (p^r) \text{ has solutions}\\[1em]
		&\implies p \equiv 1,2,4 \mod 7
	\end{split}
\end{align*}
	\\[1em]
For $p=2$:  $-7 \equiv 1 \hspace{7pt} (8)$ so -7 is a square modulo 8 by the proposition.\\
 \hspace{53pt}$x^2 \equiv -7\hspace{7pt} (2^r)$ has solutions for all r. \\[1em]

 For $p=7$: $x^2 \equiv -7 \hspace{7pt} (7)$ has a solution $x=0$ but $x^2 \equiv -7 \hspace{7pt} (7^2)$ has no solutions. Suppose 

\begin{align*}
	x^2 &\equiv -7 \hspace{7pt} (7^2)\\
	\therefore x^2 &\equiv 0\hspace{7pt} (7) \\[1em]
	\therefore 7 &| x^2\\
	\implies  7 &| x\\[1em]
	\implies x^2 &\equiv 0 \hspace{7pt} (49)\hspace{7pt} \text{\lightning} 
\end{align*}
So $x^2 \equiv -7\hspace{7pt} (n) $ has solutions $\iff n = 7^a * \Pi p_i^{b_i}$ where $a\leq 1$, $p_i \equiv 1,2,4\hspace{7pt} (7)$, $b_i \in \mathbb{N}$

\subsection{P-adic congruence}
Suppose we have a series $\sum^\infty_{n=1} x_n $ for $x_n \in \mathbb{Z}_{(p)}$. We'll say that the series converges \textbf{p-adically} if for every $a$, there are only finitely many terms $x_n$ with $x_n \not \equiv \hspace{7pt} (p^a)$. We can add up the series in $\mathbb{Z}/p^a$ because only finitely many terms are non zero.


\begin{lemma}
	$\sum x_n$ converges p-adically $\iff V_p(x_n) \rightarrow \infty$ 
\end{lemma}
\begin{proof}
	If $V_p(x_n) \rightarrow \infty$ then for $n$ significantly large, $V_p(x_n) \geq a$, i.e., $x_n\equiv 0 \hspace{7pt} (p^a)$ \\[0.5em]
\end{proof}

\textbf{E.g.} p=3
\begin{align*}
	(1+3x)^{\frac{1}{2}} = 1 + \frac{1}{2}(3x) + \frac{(\frac{1}{2}) (\frac{-1}{2}) (3x)^2}{2!} + \frac{(\frac{1}{2}) (\frac{-1}{2}) (\frac{-3}{2})(3x)^3 }{3!}
\end{align*}
	if $x \in \mathbb{Z}_{(3)}$ then this series converge 3-adically.
	\newpage
\begin{align*}
	(1+3x)^{\frac{1}{2}} &\equiv 1 \hspace{7pt} (3)\\
	&\equiv 1 + \frac{3x}{2} \hspace{7pt} (9)\\
	&\equiv 1 + \frac{3x}{2} + \frac{9}{8}x^2\hspace{7pt} (27)\\
	&\equiv 1 + \frac{3x}{2} + \frac{9}{8}x^2 + \frac{27}{16}x^3 \hspace{7pt} (27)\\
\end{align*}
	We can write these polynomials with integer coefficients.
\begin{align*}
	(1+3x)^{\frac{1}{2}} &\equiv 1 + 15x + 9x^2 \hspace{7pt} (27)\\
	&\equiv 1 + 42x + 9x^2 + 27x^3 \hspace{7pt} (81)
\end{align*}
Important point; these polynomials play the same role in number theory $(1+3x)^{\frac{1}{2}}$ does in analysis $\sqrt(1+3x)$\\
\textbf{E.g.} 
\begin{align*}
	(1+15x+9x^2)^2 &= 1 + (30)x+(18+15^2)x^2 + (2*9*15)x^3 + (81)x^4\\
	&\equiv 1+3x \hspace{7pt} (27)
\end{align*}
	
	\textbf{E.g.} Find a square root of 7 in $\mathbb{Z}/81$

\begin{align*}
	7^\frac{1}{2} &= (1+3*2)^{\frac{1}{2}}\\
	&\equiv 1 + 42*2 + 9*2^2 + 27*2^3 \hspace{7pt} (81) \\
	&\equiv 1 + 84 + 36-27 \hspace{7pt} (81)\\
	&\equiv 13\hspace{7pt} (81)
\end{align*}
	Check $13^2 = 169 \equiv 7\hspace{7pt} (81)$\\[0.5em]
	This works because of a result called the power series trick.\\[1em]
	
\textbf{Notation} We'll write $\mathbb{Z}_{(p)}\Big[[x]\Big]$ for the set of power series in $x$ with coefficient in $\mathbb{Z}_{(p)}$. $\mathbb{Z}_{(p)}\Big[[x]\Big]$ is a ring with addition and multiplication of power series as operations. We can often compose two power series $f,g \in \mathbb{Z}_{(p)}\Big[[x]\Big]$ to get a new power series $f \circ g$. $(f \circ g)(x) = f(g(x)) $.

We can define $f \circ g$ as long as either $f$ is a polynomial or $g$ has zero constant term.
Suppose

\begin{align*}
	f(x) &= \sum^\infty_{n=0} a_nx^n\\
	g(x) &= \sum^\infty_{n=0} b_nx^n\\
\end{align*}
We'll see that $f \circ g$ is a power series
\begin{align*}
	f(g(x)) &= \sum_{n=0}^\infty a_n(\sum^\infty_{m=1} b_mx^m)^n\\
	&=  \sum_{n=0}^\infty a_n  \sum_{m_1=0}^\infty  \sum_{m_2=0}^\infty\dots \sum_{m_n=0}^\infty  b_{m_1} \dots b_{m_n} x^{m_1 + \dots + m_n}
\end{align*}
so $f(g(x)) = \sum c_d x^d$ where \[c_d = \underbrace{\sum^\infty_{m_1,\dots,m_n =1} a_nb_{m_1}\dots b_{m_n}}_\text{finite sum in $\mathbb{Z}_{(p)}$}\]\\
Note $f \circ g$ is not defined otherwise.

\textbf{E.g} 
\begin{align*}
	f(x) &= 1+x+x^2 + \dots\\
	g(x) &= 1 + x\\[1em]
	\implies f(g(x)) &= 1 + (1+x) + (1+x)^2\\
\end{align*}
This has constant term $1+1+1+1 + \dots $, so $f\circ g$ is not defined.


\subsection{Power Series Trick}

Suppose $f,g,h$ are power series with coefficients in $\mathbb{Z}_{(p)}$. Assume either $f$ is a polynomial or $g$ has no constant term. Also assume: 

\begin{itemize}
	\item{For small real numbers $x$, $f(x), g(x), h(x)$ converge and $f(g(x)) = h(x)$}
	\item{For all $x \in \mathbb{Z}_{(p)}$, $f(x), g(x)$ and $h(x)$ converge p-adically}
\end{itemize}
Then for all $x \in \mathbb{Z}_{(p)} $, $f(g(x)) \equiv h(x)$ \hspace{7pt} $(p^n)$\\[0.5em]
In the example $f(x) = x^2, g(x) = (1+3x)^\frac{1}{2}, h(x) = 1+3x$.\\
For small real $x$, $f(g(x)) = h(x)$, so as long as we know that $g(x)$ converges 3-adically ($\forall x \in \mathbb{Z}_{(3)}$) the power series trick implies $g(x)^2 \equiv 1+3x \hspace{7pt} (3^n)$\\[1em]


How do we check for p-adic convergence?

\begin{lemma}
	$\sum x_n$ converge p-adically if and only if $V_p(x_n) \rightarrow \infty$
\end{lemma}
We need a way of calculating valuations of $n^th$ term of a square.

\begin{proposition}
	$V_p(n!) = \lfloor{\frac{n}{p}} \rfloor +   \lfloor{\frac{n}{p^2}} \rfloor +  \lfloor{\frac{n}{p^3}} \rfloor + \dots \leq \frac{n}{p-1} $
\end{proposition}
We'll prove this later, first use the properties to show that $(1+3x)^\frac{1}{2}$ converge 3-adically for all $x \in \mathbb{Z}_{(3)}$
\begin{align*}
	(1+3x)^\frac{1}{2} &= 1+ \frac{1}{2} (3x) + \frac{(\frac{1}{2}) (\frac{-1}{2}) (3x)}{2!} +\dots \\[1em]
	n^{th} \text{ term } &= \cfrac{(\frac{1}{2}) (\frac{1}{2}-1) (\frac{1}{2}-2)\dots (\frac{1}{2} - n+1) }{n!}(3x)^n\\[2em]
	V_3(n^{th} \text{ term}) &= V_3\Bigg((\frac{1}{2})(\frac{1}{2}-1) \dots (\frac{1}{2}-n+1)\Bigg) - V_3(n!) + V_3((3x)^n) \\
	&\geq 0 - \frac{n}{3-1} + n\\
	&\geq \frac{n}{2} \rightarrow \infty \text{ as } n \rightarrow \infty\\
	\implies & \text{series converges 3-adically}
\end{align*}

\textbf{E.g.} Assume $p$ is an odd prime\\[1em]

Let $exp(px) = 1+px+\frac{(px)^2}{2!} + \frac{(px)^3}{3!} + \dots$.\\
We'll see that this converges for all $x\in \mathbb{Z}_{(p)}$
\begin{align*}
	n^{th} \text{ term }&= \frac{(px)^n}{n!}\\[2em]
	V_p(n^{th} \text{ term } &= V_p((px)^n) - V_p(n!)\\
	&= (n*V_p(p)) + (n*V_p(x))) - V_p(n!)\\
	   &\hspace{30pt} 1 \hspace{60pt} \geq 0 \hspace{30pt}\leq \frac{n}{p-1}\\
	   & \geq n - \frac{n}{p-1}\\[0.5em]
	   &\geq (\frac{p-2}{p-1}) \rightarrow \infty \text{ for } p \neq 2
\end{align*}

















	
	\end{document}
 
